(self.webpackChunk=self.webpackChunk||[]).push([[9561],{4216:(e,t,n)=>{n.r(t),n.d(t,{createReaderGmailThreadIntegration:()=>Jo});var i,o=n(57050),a=n(48044),s=n(27378),r=n(29511),l=n(74850),d=n(19751),c=n(66310),u=n(77176),m=n(49708),h=n(41398),p=n(24209),g=n(40151),f=n(17343),b=n(23063),k=n(93508),w=n(76974),I=n(11407),y=n(62337),_=n(28728),C=n(15555),v=n(13718),E=n(85985),M=n(2834),U=n(38194),S=n(73975);!function(e){e.getEqById=function(){return S.f7(((e,t)=>e&&t?e.annotation.id===t.annotation.id:e===t))}}(i||(i={}));class N{constructor(e,t=l.Y.create(N.name)){this._options=e,this._log=t,this._rawHoveredAnnotation=this._options.mouseData.pipe(v.U(I.S.hz30),d.skipBy(_.Z.eq),u.U((({client:e,offset:t})=>{if(e&&t&&function(e,t){var n;let i=t.ownerDocument.elementFromPoint(e.left,e.top);(null===(n=null==i?void 0:i.shadowRoot)||void 0===n?void 0:n.elementFromPoint)&&(i=i.shadowRoot.elementFromPoint(e.left,e.top));return t.contains(i)}(e,this._options.textNode)){const e=this._options.highlightGeometry.geometry.get();return Array.from(e.keys()).reduce(((n,i)=>{const o=e.get(i);if(o){const e=o.rects&&(null===o.meta.highlightDisplayFormat||C.jk.isInteractable(o.meta.highlightDisplayFormat))&&o.rects.find((e=>y.UL.contains(t,e)));if(e)return{annotation:o.meta.annotation,activeHighlightId:o.meta.highlightId,activeHighlightRect:e,highlightIds:[],highlightRects:[]}}return n}),null)}return null})),u.U((e=>{if(!e)return null;const t=this._options.highlightGeometry.geometry.get(),n=[],i=[];return t.forEach(((t,o)=>{t.meta.annotation.id===e.annotation.id&&(n.push(o),i.push(...t.rects))})),{...e,highlightIds:n,highlightRects:i}})),d.skipBy(i.getEqById()),d.shareReplay({bufferSize:1,refCount:!0})),this._offByUpdatedGeometry=e=>this._options.highlightGeometry.geometry.pipe(u.U((t=>e&&t.has(e.activeHighlightId)?e:null)),E.h((e=>null===e)),f.h(null),M.b((e=>this._log.trace("OffByUpdatedGeometry",e))))}}class x extends N{constructor(e,t=l.Y.create(x.name)){var n;super(e,t),this._switchByDisplayedCard=()=>(0,o.ls)(c.w((e=>this._options.cardHovered.pipe(u.U((t=>t?this._options.getCurrentCardAnnotationState():e))))),d.skipBy(i.getEqById())),this.activeAnnotation=m.R((null===(n=this._options.textNode.ownerDocument)||void 0===n?void 0:n.defaultView)||this._options.textNode,"click").pipe(h.M(this._rawHoveredAnnotation.pipe(this._switchByDisplayedCard())),u.U((([e,t])=>t)),c.w((e=>e?p.T(this._offByUpdatedGeometry(e),this._options.offByTextPositionChange||g.E,this._options.cardDismissed.pipe(f.h(null))).pipe(b.q(1),k.O(e)):w.of(null))),k.O(null),d.skipBy(i.getEqById()),d.shareReplay({bufferSize:1,refCount:!0})),this.hoveredAnnotation=this._rawHoveredAnnotation}}var P=n(23923),F=n(28043),K=n(63919),R=n(28094),L=n(95981),B=n(25924),A=n(34379),T=n(18505),O=n(2780),G=n(68383),z=n(92783),H=n(90361),V=n(98403),D=n(14601),Z=n(2844),Y=n(38983),q=n(57356),j=n(51655),Q=n(70718),W=n(13822);function J(e,t,n,i=!1,o=!1){const a=(0,j.Me)(e).body,s=(0,j.Jj)(e);let r={left:"0px",top:"0px"};if(t.fieldPaintingPositioning===q.Q.nonPositioned&&t.positionedAncestor===a){const e=s.getComputedStyle(a);r={left:e.marginLeft||"0px",top:e.marginRight||"0px"}}else if(t.positionedAncestor!==a){const e=s.getComputedStyle(t.positionedAncestor);r={left:e.borderLeftWidth&&`-${e.borderLeftWidth}`||"0px",top:e.borderTopWidth&&`-${e.borderTopWidth}`||"0px"}}return a=>{a.style.position="absolute",a.style.top=r.top,a.style.left=i?"auto":r.left,o||(a.style.right=i?r.left:"auto",a.style.pointerEvents="none"),function({subjectElement:e,isPositioned:t,subjectElementStyle:n,integrationRoot:i,positionedAncestor:o}){t?(i.style.zIndex=n.zIndex,e.insertAdjacentElement("afterend",i)):o.insertAdjacentElement("afterbegin",i)}({subjectElement:e,isPositioned:t.fieldPaintingPositioning===q.Q.positioned,subjectElementStyle:n,integrationRoot:a,positionedAncestor:t.positionedAncestor})}}function X(e){return y.Pf.create({...e.client,...e.size})}class ${constructor(e,t=!1,n){this._highlightsSubject=e,this._innerElementsInteractive=t,this._subscriptions=new D.w,this._mouse=Y.h.create({offset:null,client:null}),this._fakeMouse=Y.h.create(null),this.getFieldPositionRelativeToViewport=()=>{const e=this._highlightsSubject.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}},this._prepareHighlights=(e,t=(0,j.is)(e))=>{const n=(0,j.o)(e),i=(0,Q.fL)(e,!1,n,t);return{layout:i,rootInjector:J(e,i,n),enableHighlightsBlendingOnRoot:(0,R.$)(e,n)}},this._prepareInnerElements=(e,t=(0,j.is)(e),n)=>{const i=(0,j.o)(e),o=n||(0,Q.fL)(e,!1,i,t);return{layout:o,rootInjector:J(e,o,i,!0,this._innerElementsInteractive)}},this._highlights=this._prepareHighlights(this._highlightsSubject),this._innerElements=this._prepareInnerElements(this._highlightsSubject,void 0,this._highlights.layout),this._win=(0,j.Jj)(this._highlightsSubject),this._createTextNodeRect=e=>({page:K.Cv.fromClient(e.client,{top:this._win.scrollY,left:this._win.scrollX}),offset:e.offset,client:e.client,size:e.size,padding:e.padding}),this.textNode={rect:this._highlights.layout.textField.paddingRect.map(this._createTextNodeRect),visibleRect:this._highlights.layout.textField.visibleRect.map(this._createTextNodeRect),scroll:this._highlights.layout.textField.scroll,scrollSize:this._highlights.layout.textField.scrollSize,scroller:(0,A.iX)(this._highlightsSubject,{rect:this._highlights.layout.textField.paddingRect.map(this._createTextNodeRect),scrollSize:this._highlights.layout.textField.scrollSize})},this.highlightHeightOffset=0,this.mouse=Y.h.combine(this._mouse,this._fakeMouse,((e,t)=>t||e)),this._subscriptions.add(Z.aj([this._highlights.layout.textField.paddingRect.behavior,this._highlights.layout.textField.scroll.behavior]).pipe((0,u.U)((([e,t])=>({rect:X(e),scroll:t}))),(0,c.w)((({rect:e,scroll:t})=>(0,z.Am)()?(0,B.q7)(this._win,e,t):(0,B.B0)(this._win,e,t))),(0,F.x)(H.fS)).subscribe(V.wW(this._mouse))),n&&this._subscriptions.add(Z.aj([this._highlights.layout.textField.paddingRect.behavior,this._highlights.layout.textField.scroll.behavior]).pipe((0,u.U)((([e,t])=>({rect:X(e),scroll:t}))),(0,c.w)((({rect:e,scroll:t})=>n.pipe(u.U((n=>{if(n){const i=K.Ir.create({left:n.clientX,top:n.clientY});return{client:i,offset:y.UL.contains(i,e)?K.p8.fromClientPoint(i,e,t):null}}return null}))))),(0,F.x)(H.fS)).subscribe(V.wW(this._fakeMouse)))}createGeometryLayout(){return new L.D((()=>X(this._highlights.layout.textField.paddingRect.getCurrent())),(()=>this._highlights.layout.textField.scroll.getCurrent()),(()=>X(this._highlights.layout.textField.paddingRect.getApproximate())),(()=>this._highlights.layout.textField.scroll.getApproximate()))}render(e,t){const n={position:"absolute",top:0,left:0},i=(0,j.Me)(this._highlightsSubject),o=e.highlights&&T.VB.get({monitorAs:"highlights"}).inject(O.EM.fromDocument(i,"grammarly-extension"),(e=>{t.highlightsBlendingEnabled&&this._highlights.enableHighlightsBlendingOnRoot(e),this._highlights.rootInjector(e)}),G.G7.showWhenLoaded(s.createElement("div",{"data-grammarly-part":"highlights",style:n},s.createElement(W.V,{layout:this._highlights.layout},s.createElement("div",{style:n},s.createElement(e.highlights,null)))))),a=e.innerElements&&T.VB.get({monitorAs:"inner-elements"}).inject(O.EM.fromDocument(i,"grammarly-extension"),this._innerElements.rootInjector,G.G7.showWhenLoaded(s.createElement("div",{"data-grammarly-part":"inner-elements",style:{position:"absolute",top:0,right:0}},s.createElement(e.innerElements,null)))),r=e.outerElements&&T.VB.get({monitorAs:"outer-elements"}).inject(O.EM.fromDocument(i,"grammarly-extension"),O.zs.appendChild(i.documentElement),G.G7.showWhenLoaded(s.createElement(e.outerElements,null)),{eventPropagationHandler:t.eventPropagationHandler});return{dispose:()=>{null==o||o.dispose(),null==r||r.dispose(),null==a||a.dispose()}}}dispose(){this._subscriptions.unsubscribe()}}var ee,te,ne=n(64015),ie=n(32243),oe=n(97565),ae=n(55415);function se(e){return ae.CE(e,"updateContextInfoId","kind")}!function(e){e.eqByDocId=S.Uz((e=>e.docId))(P.eo.eq)}(ee||(ee={})),function(e){e.isActionItem=function(e){return e.kind===oe.j.Kind.readerActionItem},e.fromMessage=function(e){return ae.CE(e,"updateContextInfoId")}}(te||(te={}));var re,le,de=n(30625),ce=n(83078),ue=n(22232),me=n(5114),he=n(95195),pe=n(26328);!function(e){let t;!function(e){e.setRecapBarPopup="setRecapBarPopup",e.toggleInlineHighlights="toggleInlineHighlights",e.setItemMenuVisibleFor="setItemMenuVisibleFor",e.setHighlightMenuVisibleFor="setHighlightMenuVisibleFor",e.highlightMenuHovered="highlightMenuHovered",e.toggleRecapBar="toggleRecapBar",e.reply="reply",e.replyResult="replyResult",e.setItemChecked="setItemChecked",e.replyToItem="replyToItem",e.replyToItemResult="replyToItemResult",e.copyItem="copyItem",e.copyItemResult="copyItemResult",e.removeItem="removeItem",e.undoRemoveItem="undoRemoveItem",e.itemFeedback="itemFeedback",e.toggleItemFeedbackMenu="toggleItemFeedbackMenu",e.showAnyway="showAnyway",e.toggleReplyPanelExpanded="toggleReplyPanelExpanded",e.toggleReplyPanelMode="toggleReplyPanelMode",e.learnMoreLinkVisited="learnMoreLinkVisited",e.optInTryItOutModal="optInTryItOutModal",e.optInTryItOutModalResult="optInTryItOutModalResult",e.optInDismissModal="optInDismissModal",e.optInDismissModalResult="optInDismissModalResult",e.genericFeedbackModal="genericFeedbackModal",e.genericFeedbackModalResult="genericFeedbackModalResult",e.itemFeedbackModalResult="itemFeedbackModalResult",e.recapMenuItemClick="recapMenuItemClick",e.aboutRecapModal="aboutRecapModal",e.aboutRecapModalResult="aboutRecapModalResult",e.turnOffRecapModal="turnOffRecapModal",e.turnOffRecapModalResult="turnOffRecapModalResult",e.dataCollectionPolicyLinkVisited="dataCollectionPolicyLinkVisited",e.termsOfServiceLinkVisited="termsOfServiceLinkVisited",e.privacyPolicyLinkVisited="privacyPolicyLinkVisited",e.highlightHover="highlightHover",e.showNotification="showNotification",e.dismissNotification="dismissNotification",e.onboardingAnchorMounted="onboardingAnchorMounted",e.onboardingAnchorUnmounted="onboardingAnchorUnmounted",e.onboardingSetKind="onboardingSetKind",e.onboardingShown="onboardingShown",e.onboardingNext="onboardingNext",e.onboardingPrev="onboardingPrev",e.onboardingDismiss="onboardingDismiss",e.panelScroll="panelScroll",e.panelOverflow="panelOverflow"}(t=e.Kind||(e.Kind={})),e.is=function(e){return t=>t.kind===e}}(re||(re={})),(0,ue.L0)(void 0),function(e){e.ofKind=function(e){return E.h(re.is(e))},e.ofDocId=function(e){return E.h((({docId:t})=>t===e))},e.ofUIMode=function(e){return E.h((({uiMode:t})=>t===e))}}(le||(le={}));var ge,fe,be=n(6234);!function(e){e.create=function(e,t){return`${e}|${t}`}}(ge||(ge={})),function(e){e.Impl=class{constructor(e,t,n,i,s){this._actions=e,this._csActions=i,this._followUps=Y.h.create(new Map),this._keyPoints=Y.h.create(new Map),this._highlights=Y.h.create(new Map),this._subscriptions=new D.w,this._feedbacks=new Map,this._checks=new Map,this._dismissed=new Map,this._dismissedUndoable=new Map,this.followUps=this._followUps.view(a.UI(pe.DY(be.Jr.FollowUp.ord))),this.keyPoints=this._keyPoints.view(a.UI(pe.DY(be.Jr.KeyPoint.ord))),this.highlights=this._highlights.view(),(0,o.zG)(me.fromNullable("optedIn"===(null==s?void 0:s.kind)?null==s?void 0:s.docs:{}),ce.bw(ie.Su(((e,t)=>{var n,i,a;return this._checks.set(e,(0,o.zG)(me.fromNullable(null===(n=null==t?void 0:t.itemStates)||void 0===n?void 0:n.followUps),me.fold((()=>new Set),ie.To(new Set,((e,t,n)=>(0,o.zG)(be.Jr.FollowUp.codec.decode(n),he.g_((()=>t),(n=>n.checked?t.add(e):t)))))))),this._feedbacks.set(e,(0,o.zG)(me.fromNullable(null===(i=null==t?void 0:t.itemStates)||void 0===i?void 0:i.followUps),me.fold((()=>new Map),ie.To(new Map,((e,t,n)=>(0,o.zG)(be.Jr.FollowUp.codec.decode(n),he.g_((()=>t),(n=>n.feedback?t.set(ge.create(e,be.YB.followUp),n.feedback):t)))))),(e=>{var n;return(0,o.zG)(me.fromNullable(null===(n=null==t?void 0:t.itemStates)||void 0===n?void 0:n.keyPoints),me.fold((()=>e),ie.To(e,((e,t,n)=>(0,o.zG)(be.Jr.KeyPoint.codec.decode(n),he.g_((()=>t),(n=>n.feedback?t.set(ge.create(e,be.YB.keyPoint),n.feedback):t)))))))}),(e=>{var n;return(0,o.zG)(me.fromNullable(null===(n=null==t?void 0:t.itemStates)||void 0===n?void 0:n.highlights),me.fold((()=>e),ie.To(e,((e,t,n)=>(0,o.zG)(be.Jr.Highlight.codec.decode(n),he.g_((()=>t),(n=>n.feedback?t.set(ge.create(e,be.YB.highlight),n.feedback):t)))))))}))),this._dismissed.set(e,(0,o.zG)(me.fromNullable(null===(a=null==t?void 0:t.itemStates)||void 0===a?void 0:a.followUps),me.fold((()=>new Set),ie.To(new Set,((e,t,n)=>(0,o.zG)(be.Jr.FollowUp.codec.decode(n),he.g_((()=>t),(n=>n.dismissed?t.add(ge.create(e,be.YB.followUp)):t)))))),(e=>{var n;return(0,o.zG)(me.fromNullable(null===(n=null==t?void 0:t.itemStates)||void 0===n?void 0:n.keyPoints),me.fold((()=>e),ie.To(e,((e,t,n)=>(0,o.zG)(be.Jr.KeyPoint.codec.decode(n),he.g_((()=>t),(n=>n.dismissed?t.add(ge.create(e,be.YB.keyPoint)):t)))))))}),(e=>{var n;return(0,o.zG)(me.fromNullable(null===(n=null==t?void 0:t.itemStates)||void 0===n?void 0:n.highlights),me.fold((()=>e),ie.To(e,((e,t,n)=>(0,o.zG)(be.Jr.Highlight.codec.decode(n),he.g_((()=>t),(n=>n.dismissed?t.add(ge.create(e,be.YB.highlight)):t)))))))}))),t})))),this._subscriptions.add(t.annotations.pipe(u.U((e=>(0,o.zG)(e,a.Su(((e,t)=>(0,o.zG)(t.annotations,ne.hX(te.isActionItem),ne.UI((e=>({id:be.Jr.FollowUp.Id.create(e.id),kind:be.YB.followUp,apiKind:e.kind,checked:!1,feedback:me.none,delta:e.delta,span:e.span}))),pe.nI,me.chain((t=>this._itemsNotDismissed(e,t))),me.map((t=>this._itemsWithFeedback(e,t))),me.map((t=>this._itemsWithChecks(e,t)))))),a.oA)))).subscribe((e=>this._followUps.set(e)))),this._subscriptions.add(t.summaries.pipe(u.U((e=>(0,o.zG)(e,a.Su(((e,t)=>(0,o.zG)(t.items,ne.Su(((e,t)=>({id:be.Jr.KeyPoint.Id.create(t.id),kind:be.YB.keyPoint,apiKind:oe.j.Kind.readerSummaryItem,feedback:me.none,delta:t.delta,index:e}))),pe.nI,me.chain((t=>this._itemsNotDismissed(e,t))),me.map((t=>this._itemsWithFeedback(e,t)))))),a.oA)))).subscribe((e=>this._keyPoints.set(e)))),this._subscriptions.add(Z.aj([t.annotations,n.view("expandedMessages").pipe(u.U(a.DZ((0,o.ls)(de.zk,me.map(ae.ei("textMap"))))))]).pipe(u.U((([e,t])=>(0,o.zG)(e,a.Su(((e,n)=>(0,o.zG)(n.annotations,ne.DZ((n=>(0,o.zG)(me.fromNullable(n.delta),me.alt((()=>(0,o.zG)(me.fromNullable(t.get(e)),me.map((e=>e.getRichText())),me.map((e=>e.slice(n.span.s,n.span.e)))))),me.map((t=>({id:n.id,docId:e,kind:be.YB.highlight,apiKind:n.kind,feedback:me.none,span:n.span,delta:t})))))),pe.nI,me.chain((t=>this._itemsNotDismissed(e,t))),me.map((t=>this._itemsWithFeedback(e,t)))))),a.oA)))).subscribe((e=>this._highlights.set(e)))),this._subscriptions.add(this._handleSetItemChecked()),this._subscriptions.add(this._handleItemFeedback()),this._subscriptions.add(this._handleRemoveItem()),this._subscriptions.add(this._handleUndoRemoveItem())}_itemFeedback(e,t,n){return(0,o.zG)(me.fromNullable(this._feedbacks.get(e)),me.chain((e=>me.fromNullable(e.get(ge.create(t,n))))))}_itemsWithFeedback(e,t){return(0,o.zG)(t,pe.UI((t=>({...t,feedback:this._itemFeedback(e,t.id,t.kind)}))))}_itemCheck(e,t){return(0,o.zG)(me.fromNullable(this._checks.get(e)),me.fold((()=>!1),(e=>e.has(t))))}_itemsWithChecks(e,t){return(0,o.zG)(t,pe.UI((t=>({...t,checked:this._itemCheck(e,t.id)}))))}_itemDismissed(e,t,n){return(0,o.zG)(me.fromNullable(this._dismissed.get(e)),me.fold((()=>!1),(e=>e.has(ge.create(t,n)))))}_itemsNotDismissed(e,t){return(0,o.zG)(t,pe.hX((t=>!this._itemDismissed(e,t.id,t.kind))))}_handleSetItemChecked(){return this._actions.pipe(le.ofKind(re.Kind.setItemChecked)).subscribe((({docId:e,item:t,checked:n})=>{(0,o.zG)(me.fromNullable(this._checks.get(e)),me.alt((()=>{const t=new Set;return this._checks.set(e,t),me.some(t)})),me.map((e=>n?e.add(t.id):e.delete(t.id)))),this._followUps.modify(a.Su(((e,t)=>this._itemsWithChecks(e,t)))),this._csActions.readerUpdateFollowUpItemState({docId:e,item:{id:t.id,kind:be.YB.followUp,dismissed:this._itemDismissed(e,t.id,be.YB.followUp),checked:n}})}))}_handleItemFeedback(){return this._actions.pipe(le.ofKind(re.Kind.itemFeedback)).subscribe((({docId:e,item:t,feedback:n})=>{(0,o.zG)(me.fromNullable(this._feedbacks.get(e)),me.alt((()=>{const t=new Map;return this._feedbacks.set(e,t),me.some(t)})),ce.bw((e=>e.set(ge.create(t.id,t.kind),n)))),t.kind===be.YB.followUp?(this._followUps.modify(a.Su(((e,t)=>this._itemsWithFeedback(e,t)))),this._csActions.readerUpdateFollowUpItemState({docId:e,item:{id:t.id,kind:be.YB.followUp,dismissed:this._itemDismissed(e,t.id,be.YB.followUp),checked:this._itemCheck(e,t.id),feedback:n}})):t.kind===be.YB.keyPoint?(this._keyPoints.modify(a.Su(((e,t)=>this._itemsWithFeedback(e,t)))),this._csActions.readerUpdateKeyPointItemState({docId:e,item:{id:t.id,kind:be.YB.keyPoint,dismissed:this._itemDismissed(e,t.id,be.YB.keyPoint),feedback:n}})):t.kind===be.YB.highlight?(this._highlights.modify(a.Su(((e,t)=>this._itemsWithFeedback(e,t)))),this._csActions.readerUpdateHighlightItemState({docId:e,item:{id:t.id,kind:be.YB.highlight,dismissed:this._itemDismissed(e,t.id,be.YB.highlight),feedback:n}})):(0,ue.L0)(t)}))}_handleRemoveItem(){return this._actions.pipe(le.ofKind(re.Kind.removeItem)).subscribe((({docId:e,item:t})=>{(0,o.zG)(me.fromNullable(this._dismissed.get(e)),me.alt((()=>{const t=new Set;return this._dismissed.set(e,t),me.some(t)})),ce.bw((e=>e.add(ge.create(t.id,t.kind))))),(0,o.zG)(me.fromNullable(this._dismissedUndoable.get(e)),me.alt((()=>{const t=new Map;return this._dismissedUndoable.set(e,t),me.some(t)})),ce.bw((e=>e.set(ge.create(t.id,t.kind),t)))),t.kind===be.YB.followUp?(this._followUps.modify((0,o.ls)(a.Su(((t,n)=>t===e?this._itemsNotDismissed(t,n):me.some(n))),a.oA)),this._csActions.readerUpdateFollowUpItemState({docId:e,item:{id:t.id,kind:be.YB.followUp,dismissed:!0,checked:this._itemCheck(e,t.id),feedback:me.toUndefined(this._itemFeedback(e,t.id,be.YB.followUp))}})):t.kind===be.YB.keyPoint?(this._keyPoints.modify((0,o.ls)(a.Su(((t,n)=>t===e?this._itemsNotDismissed(t,n):me.some(n))),a.oA)),this._csActions.readerUpdateKeyPointItemState({docId:e,item:{id:t.id,kind:be.YB.keyPoint,dismissed:!0,feedback:me.toUndefined(this._itemFeedback(e,t.id,be.YB.keyPoint))}})):t.kind===be.YB.highlight?(this._highlights.modify((0,o.ls)(a.Su(((t,n)=>t===e?this._itemsNotDismissed(t,n):me.some(n))),a.oA)),this._csActions.readerUpdateHighlightItemState({docId:e,item:{id:t.id,kind:be.YB.highlight,dismissed:!0,feedback:me.toUndefined(this._itemFeedback(e,t.id,be.YB.highlight))}})):(0,ue.L0)(t)}))}_handleUndoRemoveItem(){return this._actions.pipe(le.ofKind(re.Kind.undoRemoveItem),M.b((({docId:e,item:t})=>{(0,o.zG)(me.fromNullable(this._dismissedUndoable.get(e)),me.chain(a.P5(S.yv)(ge.create(t.id,t.kind))),ce.bw((t=>{(0,o.zG)(me.fromNullable(this._dismissed.get(e)),ce.bw((n=>{n.delete(ge.create(t.id,t.kind)),0===n.size&&this._dismissed.delete(e)}))),(0,o.zG)(me.fromNullable(this._dismissedUndoable.get(e)),ce.bw((n=>{n.delete(ge.create(t.id,t.kind)),0===n.size&&this._dismissedUndoable.delete(e)}))),t.kind===be.YB.followUp?(this._followUps.modify((0,de.ni)(P.eo.eq)(e,me.fold((()=>pe.of(t)),(e=>pe.QI(t,e))))),this._csActions.readerUpdateFollowUpItemState({docId:e,item:{id:t.id,kind:be.YB.followUp,dismissed:!1,checked:this._itemCheck(e,t.id),feedback:me.toUndefined(this._itemFeedback(e,t.id,be.YB.followUp))}})):t.kind===be.YB.keyPoint?(this._keyPoints.modify((0,de.ni)(P.eo.eq)(e,me.fold((()=>pe.of(t)),(e=>pe.QI(t,e))))),this._csActions.readerUpdateKeyPointItemState({docId:e,item:{id:t.id,kind:be.YB.keyPoint,dismissed:!1,feedback:me.toUndefined(this._itemFeedback(e,t.id,be.YB.keyPoint))}})):t.kind===be.YB.highlight?(this._highlights.modify((0,de.ni)(P.eo.eq)(e,me.fold((()=>pe.of(t)),(e=>pe.QI(t,e))))),this._csActions.readerUpdateHighlightItemState({docId:e,item:{id:t.id,kind:be.YB.highlight,dismissed:!1,feedback:me.toUndefined(this._itemFeedback(e,t.id,be.YB.highlight))}})):(0,ue.L0)(t)})))}))).subscribe()}dispose(){this._subscriptions.unsubscribe()}};e.SingleDocMock=class{constructor(e,t,n,i,o){this._actions=e,this._followUps=Y.h.create(new Map),this._keyPoints=Y.h.create(new Map),this._highlights=Y.h.create(new Map),this._subscriptions=new D.w,this.followUps=this._followUps.view(),this.keyPoints=this._keyPoints.view(),this.highlights=this._highlights.view(),this._followUps.set(n?new Map([[t,n]]):new Map),this._keyPoints.set(i?new Map([[t,i]]):new Map),this._highlights.set(o?new Map([[t,o]]):new Map),this._subscriptions.add(this._handleItemChecked()),this._subscriptions.add(this._handleItemFeedback()),this._subscriptions.add(this._handleRemoveItem())}_handleItemChecked(){return this._actions.pipe(le.ofKind(re.Kind.setItemChecked),M.b((({item:e,checked:t})=>{this._followUps.modify(a.UI(pe.UI((n=>n.id===e.id?{...n,checked:t}:n))))}))).subscribe()}_handleRemoveItem(){return this._actions.pipe(le.ofKind(re.Kind.removeItem),M.b((({item:e})=>{this._followUps.modify(a.DZ(pe.hX((t=>t.id!==e.id))))}))).subscribe()}_handleItemFeedback(){return this._actions.pipe(le.ofKind(re.Kind.itemFeedback),M.b((({item:e,feedback:t})=>{switch(e.kind){case be.YB.followUp:this._followUps.modify(a.UI(pe.UI((n=>n.id===e.id?{...n,feedback:me.some(t)}:n))));break;case be.YB.keyPoint:this._keyPoints.modify(a.UI(pe.UI((n=>n.id===e.id?{...n,feedback:me.some(t)}:n))));break;case be.YB.highlight:this._highlights.modify(a.UI(pe.UI((n=>n.id===e.id?{...n,feedback:me.some(t)}:n))));break;default:(0,ue.L0)(e)}}))).subscribe()}dispose(){this._subscriptions.unsubscribe()}}}(fe||(fe={}));var ke,we,Ie=n(17771),ye=n(45614),_e=n(71249);function Ce(e,t,n,i,a){const s=n||i;return(me.isNone(t.lowQualityInfo)||t.showLowQualityContentRequested)&&(0,o.zG)(ve(e,t,s),ce.FX(!1))?(0,o.zG)(t.highlightsToggledByUser,me.alt((()=>me.some(s))),me.filter((()=>a))):me.none}function ve(e,t,n){return(0,o.zG)(t.recapBarToggledByUser,me.map((e=>"compact"===e)),me.alt((()=>e.recapHidden?me.some(!0):me.none)),me.alt((()=>(0,o.zG)(t.goodForAnnotations,me.filter((e=>!e)),me.map(o.W8)))),me.alt((()=>(0,o.zG)(t.lowQualityInfo,me.map(o.W8)))),me.alt((()=>"idle"===t.checkingState?me.some(!n):me.none)))}!function(e){e.empty=function(){return{highlightsToggledByUser:me.none,recapBarToggledByUser:me.none,showLowQualityContentRequested:!1,lowQualityInfo:me.none,goodForAnnotations:me.none,checkingState:"initial"}}}(ke||(ke={})),function(e){let t;!function(e){e.empty=function(){return{docs:new Map,thread:{recapHidden:!1}}}}(t=e.State||(e.State={}));e.Impl=class{constructor(e,n,i,s,r){this._actions=e,this._csActions=n,this._readerCSState=i,this._telemetry=r,this._subscriptions=new D.w,this._state=Y.h.create(t.empty()),this.state=this._state.view(),this._subscriptions.add(s.docInfo.subscribe((e=>this._state.lens("docs").modify((t=>(0,o.zG)(Array.from(e.values()),_e.u4(t,((e,t)=>(0,de.ni)(P.eo.eq)(t.docId,this._updateDocState(t.docId,{lowQualityInfo:t.filtered,goodForAnnotations:me.some(t.goodForAnnotations)}))(e))))))))),this._subscriptions.add(this._readerCSState.view((e=>"optedIn"===e.kind?e.docs:{})).subscribe((e=>this._state.lens("docs").modify((t=>(0,o.zG)(ye.qo(e||{}),_e.u4(t,((e,[t,n])=>(0,de.ni)(P.eo.eq)(t,this._updateDocState(t,{highlightsToggledByUser:me.fromNullable(n.highlightsEnabled)}))(e)))))))));const l=new Set;this._subscriptions.add(s.pendingUpdates.subscribe((e=>{this._state.lens("docs").modify((t=>{const n=new Set(e.keys());return n.forEach((e=>l.add(e))),(0,o.zG)(Array.from(n),_e.u4(t,((e,t)=>(0,de.ni)(P.eo.eq)(t,this._updateDocState(t,{checkingState:"inProgress"}))(e))),a.Su(((e,t)=>({...t,checkingState:!n.has(e)&&l.has(e)?"idle":t.checkingState}))))}))}))),this._subscriptions.add(this._handleInlineHighlightsToggle()),this._subscriptions.add(this._handleShowAnyway()),this._subscriptions.add(this._handleToggleRecapBar()),this._subscriptions.add(this._handleHideRecap())}_handleInlineHighlightsToggle(){return this._actions.pipe(le.ofKind(re.Kind.toggleInlineHighlights),M.b((({docId:e,enabled:t})=>{this._csActions.readerToggleInlineHighlights({docId:e,enabled:t}).catch(this._onHandleReject("CSActions.toggleReaderInlineHighlights"))}))).subscribe()}_handleShowAnyway(){return this._actions.pipe(le.ofKind(re.Kind.showAnyway),M.b((({docId:e})=>this._state.lens("docs").modify((0,de.ni)(P.eo.eq)(e,this._updateDocState(e,{showLowQualityContentRequested:!0})))))).subscribe()}_handleToggleRecapBar(){return this._actions.pipe(le.ofKind(re.Kind.toggleRecapBar),M.b((({docId:e,isCompact:t})=>this._state.lens("docs").modify((0,de.ni)(P.eo.eq)(e,this._updateDocState(e,{recapBarToggledByUser:me.some(t?"compact":"full")})))))).subscribe()}_handleHideRecap(){return this._actions.pipe(le.ofKind(re.Kind.turnOffRecapModalResult),E.h((({result:e})=>"hideRecap"===e))).subscribe((()=>this._state.modify((e=>({thread:{recapHidden:!0},docs:(0,o.zG)(e.docs,a.UI((e=>({...e,recapBarToggledByUser:me.none}))))})))))}_emptyDocState(e){var t,n;return{...ke.empty(),highlightsToggledByUser:me.fromNullable(null===(n=null===(t=this._readerCSState.view((e=>"optedIn"===e.kind?e.docs:{})).get())||void 0===t?void 0:t[e])||void 0===n?void 0:n.highlightsEnabled)}}_updateDocState(e,t){return n=>({...this._emptyDocState(e),...(0,o.zG)(n,me.getOrElse((()=>({})))),...t})}_onHandleReject(e){return t=>{const n=`${e} promise rejection: ${String(t)}`;this._telemetry.readerGmail.warning("promiseRejection",n,t)}}dispose(){this._subscriptions.unsubscribe()}};e.SingleDocMock=class{constructor(e,n,i){this._actions=e,this._subscriptions=new D.w,this._state=Y.h.create(t.empty()),this.state=this._state.view(),this._state.set({thread:{recapHidden:!1},docs:(0,o.zG)(null!=i?i:me.some({}),me.fold((()=>new Map),(e=>{var t,i,o,a,s,r;return new Map([[n,{highlightsToggledByUser:null!==(t=e.highlightsToggledByUser)&&void 0!==t?t:me.none,recapBarToggledByUser:null!==(i=e.recapBarToggledByUser)&&void 0!==i?i:me.none,showLowQualityContentRequested:null!==(o=e.showLowQualityContentRequested)&&void 0!==o&&o,lowQualityInfo:null!==(a=e.lowQualityInfo)&&void 0!==a?a:me.none,goodForAnnotations:null!==(s=e.goodForAnnotations)&&void 0!==s?s:me.some(!0),checkingState:null!==(r=e.checkingState)&&void 0!==r?r:"idle"}]])})))}),this._subscriptions.add(this._handleInlineHighlightsToggle()),this._subscriptions.add(this._handleShowAnyway()),this._subscriptions.add(this._handleToggleRecapBar())}_handleInlineHighlightsToggle(){return this._actions.pipe(le.ofKind(re.Kind.toggleInlineHighlights),M.b((({enabled:e})=>{this._state.lens("docs").modify(a.UI((t=>({...t,highlightsToggledByUser:me.some(e)}))))}))).subscribe()}_handleShowAnyway(){return this._actions.pipe(le.ofKind(re.Kind.showAnyway),M.b((()=>{this._state.lens("docs").modify(a.UI((e=>({...e,showLowQualityContentRequested:!0}))))}))).subscribe()}_handleToggleRecapBar(){return this._actions.pipe(le.ofKind(re.Kind.toggleRecapBar),M.b((({isCompact:e})=>this._state.lens("docs").modify(a.UI((t=>({...t,recapBarToggledByUser:me.some(e?"compact":"full")}))))))).subscribe()}dispose(){this._subscriptions.unsubscribe()}}}(we||(we={}));var Ee=n(16027),Me=n(13027),Ue=n(44669),Se=n(93756),Ne=n(12187),xe=n(5739),Pe=n(69801),Fe=n(42603);const Ke={large:{along:33,across:12},small:{along:16,across:8}},Re=s.forwardRef((function({placement:e,style:t,theme:n="light",size:i="large"},o){return s.createElement("div",{ref:o,style:{width:Ke[i].along},...(0,Ne.Sh)(Fe.arrow,"light"===n?Fe.arrowLight:Fe.arrowDark)},s.createElement("svg",{width:Ke[i].along,height:Ke[i].across,viewBox:`0 0 ${Ke[i].along} ${Ke[i].across}`,fill:"none",style:{...t,transform:`${(null==t?void 0:t.transform)||""} rotate(${Le(e)}deg)`.trimStart(),...Be(i,e)}},"large"===i?s.createElement("path",{d:"M1.14,0L31.86,0C28.02,0 26.015,0.867 23.874,3.552L17.514,11.014C16.939,11.689 15.891,11.689 15.315,11.014L8.955,3.552C6.815,0.867 4.98,0 1.14,0Z",fill:"inherit"}):s.createElement("path",{d:"M16,0L8,8L0,-0L16,0Z",fill:"inherit"})))}));function Le(e){return(null==e?void 0:e.startsWith("right"))?90:(null==e?void 0:e.startsWith("bottom"))?180:(null==e?void 0:e.startsWith("left"))?270:0}function Be(e,t){return(null==t?void 0:t.startsWith("bottom"))?{top:-Ke[e].across}:(null==t?void 0:t.startsWith("top"))?{bottom:-Ke[e].across}:(null==t?void 0:t.startsWith("right"))?{transformOrigin:"top left",top:.5*-Ke[e].along,left:0}:(null==t?void 0:t.startsWith("left"))?{transformOrigin:"top right",top:.5*-Ke[e].along,right:0}:{}}var Ae;!function(e){let t,n;function i(e,t){return t?s.createElement(Ue.d,{onClickAway:t.onClickAway,additionalEventSources:t.additionalEventSources},e):e}!function(e){const t=({content:e,placement:t,useArrow:n,dataGrammarlyPart:i="ui-kit-popover-redux",referenceElement:o,offsets:a,boundaryAreaPadding:r,theme:l="light",arrowSize:d="large",style:c})=>{const[u,m]=s.useState(null),[h,p]=s.useState(null),{styles:g,attributes:f,state:b}=(0,Me.D)(o,u,{placement:t,modifiers:[{name:"offset",options:{offset:[null==a?void 0:a.along,((null==a?void 0:a.away)||0)+(n?Ke[d].across:0)]}},{name:"arrow",options:{element:h,padding:8}},...r?[{name:"preventOverflow",options:{padding:r}}]:[]]});return s.createElement("div",{ref:m,"data-grammarly-part":i,style:{...c,...g.popper},...f.popper},s.createElement("div",{...(0,Ne.Sh)(Pe.container,"light"===l?Pe.containerLight:Pe.containerDark)},e,n?s.createElement(Re,{ref:p,style:g.arrow,placement:null==b?void 0:b.placement,theme:l,size:d}):null))};e.UIPart=Ee.UI.Node.make((({state:e})=>s.createElement(xe.F.Fragment,null,e.pipe(u.U((({content:e,placement:n,useArrow:i,dataGrammarlyPart:o,referenceElement:a,offsets:r,boundaryAreaPadding:l,theme:d,arrowSize:c,style:u})=>s.createElement(t,{content:e,placement:n,useArrow:i,dataGrammarlyPart:o,referenceElement:a,offsets:r,boundaryAreaPadding:l,theme:d,arrowSize:c,style:u}))))))),e.createFlow=e=>()=>e}(t||(t={})),function(e){let n;!function(e){e.UIPart=Ee.UI.Union.asOption(Ee.UI.Composite.make(Ee.UI.Grid.make((({slots:e})=>s.createElement("div",null,e.popped))),t.UIPart)),e.createFlow=e=>Ee.Z.composeUnion({None:()=>w.of(null),Some:Ee.Z.composeKnot({value:t.createFlow(e.view("props"))})},(()=>e.view("show").view(me.fromPredicate((e=>!!e)))))}(n||(n={}));const i=Ee.UI.Transition.make({fadein:Pe.fadein},{fadeout:Pe.fadeout});e.UIPart=Ee.UI.Animated.make(i,n.UIPart),e.createFlow=(e,t=!0)=>Ee.Z.animatingFlow(n.createFlow(e),function(e){return(t,n)=>me.isSome(n)?me.isNone(t)||me.isNone(t.value)?me.some(Se.F2("fadein")):e?me.some(Se.Hk("fadeout","fadein")):me.none:me.some(Se.t$("fadeout"))}(t))}(n||(n={})),e.WithChildren=e=>{const[t,o]=s.useState(null),a=s.useMemo((()=>Y.h.create({props:e,show:e.show})),[]),r=s.useMemo((()=>t?Ee.UI.mount(n.UIPart,n.createFlow(a.view((e=>({...e,props:{...e.props,referenceElement:t}}))),e.animateBetweenStates)):null),[t]);return s.useEffect((()=>{a.set({props:e,show:e.show})})),i(s.createElement("div",null,s.createElement("div",{ref:o,style:e.childrenContainerStyles},e.children),t?r:null),e.clickAwayOptions)},e.WithRef=e=>{const t=s.useMemo((()=>Y.h.create({props:e,show:e.show})),[]),o=s.useMemo((()=>Ee.UI.mount(n.UIPart,n.createFlow(t,e.animateBetweenStates))),[]);return s.useEffect((()=>{t.set({props:e,show:e.show})})),i(s.createElement("div",null,o),e.clickAwayOptions)}}(Ae||(Ae={}));var Te,Oe=n(90845),Ge=n(61922),ze=n(60797),He=n(25262);!function(e){e.Reply=({className:e,width:t=24})=>s.createElement(Ge.a1,{className:e,width:t,viewBox:"0 0 24 24"},s.createElement("path",{d:"M14 17.5C13.7239 17.5 13.5 17.2761 13.5 17C13.5 16.7239 13.7239 16.5 14 16.5V17.5ZM5.5 11.5C5.5 11.7761 5.27614 12 5 12C4.72386 12 4.5 11.7761 4.5 11.5H5.5ZM10 16.5C10.2761 16.5 10.5 16.7239 10.5 17C10.5 17.2761 10.2761 17.5 10 17.5V16.5ZM3 17L2.64645 17.3536L2.29289 17L2.64645 16.6464L3 17ZM5.64645 13.6464C5.84171 13.4512 6.15829 13.4512 6.35355 13.6464C6.54882 13.8417 6.54882 14.1583 6.35355 14.3536L5.64645 13.6464ZM6.35355 19.6464C6.54882 19.8417 6.54882 20.1583 6.35355 20.3536C6.15829 20.5488 5.84171 20.5488 5.64645 20.3536L6.35355 19.6464ZM12.7071 12.2929L12.3536 11.9393L12.7071 12.2929ZM18.2909 6.00195C18.4862 5.80668 18.8028 5.80668 18.9981 6.00195C19.1933 6.19721 19.1933 6.51379 18.9981 6.70905L18.2909 6.00195ZM5.00195 6.70905C4.80668 6.51379 4.80668 6.19721 5.00195 6.00195C5.19721 5.80668 5.51379 5.80668 5.70905 6.00195L5.00195 6.70905ZM11.2929 12.2929L11.6464 11.9393L11.2929 12.2929ZM18 6.5H6V5.5H18V6.5ZM18.5 16V7H19.5V16H18.5ZM14 16.5H18V17.5H14V16.5ZM5.5 7V11.5H4.5V7H5.5ZM19.5 16C19.5 16.8284 18.8284 17.5 18 17.5V16.5C18.2761 16.5 18.5 16.2761 18.5 16H19.5ZM6 6.5C5.72386 6.5 5.5 6.72386 5.5 7H4.5C4.5 6.17157 5.17157 5.5 6 5.5V6.5ZM18 5.5C18.8284 5.5 19.5 6.17157 19.5 7H18.5C18.5 6.72386 18.2761 6.5 18 6.5V5.5ZM10 17.5H3V16.5H10V17.5ZM2.64645 16.6464L5.64645 13.6464L6.35355 14.3536L3.35355 17.3536L2.64645 16.6464ZM3.35355 16.6464L6.35355 19.6464L5.64645 20.3536L2.64645 17.3536L3.35355 16.6464ZM12.3536 11.9393L18.2909 6.00195L18.9981 6.70905L13.0607 12.6464L12.3536 11.9393ZM5.70905 6.00195L11.6464 11.9393L10.9393 12.6464L5.00195 6.70905L5.70905 6.00195ZM13.0607 12.6464C12.4749 13.2322 11.5251 13.2322 10.9393 12.6464L11.6464 11.9393C11.8417 12.1346 12.1583 12.1346 12.3536 11.9393L13.0607 12.6464Z",fill:"inherit",stroke:"none"})),e.Feedback=({className:e,width:t=24})=>s.createElement(Ge.a1,{className:e,width:t,viewBox:"0 0 24 24"},s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 8C3.5 6.61929 4.61929 5.5 6 5.5H18C19.3807 5.5 20.5 6.61929 20.5 8V14.3429C20.5 15.7236 19.3807 16.8429 18 16.8429H10.3884L6.16667 19.9979V16.8429H6C4.61929 16.8429 3.5 15.7236 3.5 14.3429V8ZM6 6.5C5.17157 6.5 4.5 7.17157 4.5 8V14.3429C4.5 15.1713 5.17157 15.8429 6 15.8429H7.16667V18.0021L10.056 15.8429H18C18.8284 15.8429 19.5 15.1713 19.5 14.3429V8C19.5 7.17157 18.8284 6.5 18 6.5H6ZM17 10H7V9H17V10ZM17 13H7V12H17V13Z",fill:"inherit",stroke:"none"})),e.ThumbsDown=({className:e,width:t=18})=>s.createElement(Ge.a1,{className:e,width:t,viewBox:"-1 -1 22 20"},s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.94506 1.49087L3.94129 1.49999L1.22638 7.89292C1.06797 8.31105 1.03966 8.85929 1.01631 9.57841L1.01618 9.58249C1.01167 9.72126 1.00697 9.8662 1.00031 10.0091C1.00591 10.1675 1.08822 10.3603 1.28344 10.5353C1.48809 10.7188 1.74942 10.8182 1.97538 10.8182H8.88923L7.78363 16.1831C7.74404 16.3671 7.78727 16.6111 7.90957 16.807C7.92806 16.8367 7.94592 16.8618 7.96283 16.883C7.97026 16.8765 7.97776 16.87 7.98532 16.8633C8.08412 16.7763 8.18009 16.6875 8.25236 16.6196C8.28819 16.5859 8.31747 16.558 8.33751 16.5387L8.36015 16.5169L8.36114 16.516L13.3603 11.4772C13.5028 11.3373 13.5926 11.1398 13.5926 10.9091V1.81818C13.5926 1.57101 13.483 1.34726 13.3061 1.1944C13.1632 1.07085 12.9836 1 12.7901 1H4.67906C4.66798 1 4.6565 1.00023 4.64528 1.00068M9.06411 17.2273C9.06411 17.2273 8.27026 18 8.10374 18C7.25484 18 6.60509 16.9062 6.80597 15.9727L7.66214 11.8182H1.97538C0.984023 11.8182 0 10.9917 0 9.9917C0.0070643 9.84692 0.0119094 9.6977 0.0168363 9.54596C0.039042 8.86205 0.0629075 8.12702 0.299089 7.51818L3.0208 1.10909C3.03813 1.06714 3.05698 1.02601 3.07728 0.985763C3.28437 0.575142 3.64235 0.257042 4.07809 0.102666C4.2438 0.0439576 4.42076 0.00892764 4.60495 0.00149288C4.62942 0.000509854 4.65435 0 4.67906 0H12.7901C13.2356 0 13.6447 0.165198 13.9601 0.437858C14.3466 0.771997 14.5926 1.26752 14.5926 1.81818V10.9091C14.5926 11.4091 14.3943 11.8636 14.0609 12.1909L9.06411 17.2273ZM4.64528 1.00068C4.56232 1.00405 4.48416 1.01971 4.41203 1.04526C4.22152 1.11276 4.06246 1.25304 3.97014 1.43608C3.96113 1.45395 3.95276 1.47222 3.94506 1.49087M17.3951 1V9.90909H19V1H17.3951ZM16.3951 0.75C16.3951 0.335787 16.7308 0 17.1451 0H19.25C19.6642 0 20 0.335786 20 0.75V10.1591C20 10.5733 19.6642 10.9091 19.25 10.9091H17.1451C16.7308 10.9091 16.3951 10.5733 16.3951 10.1591V0.75Z",fill:"inherit",stroke:"none"})),e.ThumbsUp=({className:e,width:t=18})=>s.createElement(Ge.a1,{className:e,width:t,viewBox:"-1 -1 22 20"},s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.0549 16.5091L16.0587 16.5L18.7736 10.1071C18.932 9.68895 18.9603 9.14071 18.9837 8.42159L18.9838 8.41751C18.9883 8.27874 18.993 8.1338 18.9997 7.99095C18.9941 7.83251 18.9118 7.63967 18.7166 7.46467C18.5119 7.28121 18.2506 7.18182 18.0246 7.18182L11.1108 7.18182L12.2164 1.8169C12.256 1.63292 12.2127 1.38894 12.0904 1.19295C12.0719 1.16332 12.0541 1.13822 12.0372 1.11697C12.0297 1.12346 12.0222 1.13004 12.0147 1.13671C11.9159 1.22375 11.8199 1.31246 11.7476 1.38043C11.7118 1.41412 11.6825 1.44205 11.6625 1.46127L11.6399 1.48305L11.6389 1.48402L6.63965 6.52285C6.49717 6.66269 6.40741 6.86024 6.40741 7.09091L6.40741 16.1818C6.40741 16.429 6.51702 16.6527 6.69386 16.8056C6.83679 16.9291 7.01641 17 7.20987 17L15.3209 17C15.332 17 15.3435 16.9998 15.3547 16.9993M10.9359 0.772727C10.9359 0.772727 11.7297 -7.23009e-07 11.8963 -7.08451e-07C12.7452 -6.34238e-07 13.3949 1.09375 13.194 2.02727L12.3379 6.18182L18.0246 6.18182C19.016 6.18182 20 7.0083 20 8.0083C19.9929 8.15308 19.9881 8.3023 19.9832 8.45404C19.961 9.13795 19.9371 9.87298 19.7009 10.4818L16.9792 16.8909C16.9619 16.9329 16.943 16.974 16.9227 17.0142C16.7156 17.4249 16.3577 17.743 15.9219 17.8973C15.7562 17.956 15.5792 17.9911 15.395 17.9985C15.3706 17.9995 15.3456 18 15.3209 18L7.20987 18C6.76441 18 6.35535 17.8348 6.03991 17.5621C5.65335 17.228 5.40741 16.7325 5.40741 16.1818L5.40741 7.09091C5.40741 6.59091 5.60568 6.13636 5.93913 5.80909L10.9359 0.772727ZM15.3547 16.9993C15.4377 16.996 15.5158 16.9803 15.588 16.9547C15.7785 16.8872 15.9375 16.747 16.0299 16.5639C16.0389 16.5461 16.0472 16.5278 16.0549 16.5091M2.60495 17L2.60495 8.09091L1.00003 8.09091L1.00003 17L2.60495 17ZM3.60495 17.25C3.60495 17.6642 3.26916 18 2.85495 18L0.750031 18C0.335817 18 3.05469e-05 17.6642 3.05831e-05 17.25L3.14057e-05 7.84091C3.14419e-05 7.4267 0.335818 7.09091 0.750031 7.09091L2.85495 7.09091C3.26916 7.09091 3.60495 7.4267 3.60495 7.84091L3.60495 17.25Z",fill:"inherit",stroke:"none"})),e.ThumbsDownFilled=({className:e,width:t=18})=>s.createElement(Ge.a1,{className:e,width:t,viewBox:"-1 -1 22 20"},s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.0208 1.10909C3.03813 1.06714 3.05698 1.02601 3.07728 0.985763C3.28437 0.575142 3.64235 0.257042 4.07809 0.102666C4.2438 0.0439576 4.42076 0.00892764 4.60495 0.00149288C4.62942 0.000509854 4.65435 0 4.67906 0H12.7901C13.2356 0 13.6447 0.165198 13.9601 0.437858C14.3466 0.771997 14.5926 1.26752 14.5926 1.81818V10.9091C14.5926 11.4091 14.3943 11.8636 14.0609 12.1909L9.06411 17.2273C9.06411 17.2273 8.27026 18 8.10374 18C7.25484 18 6.60509 16.9062 6.80597 15.9727L7.66214 11.8182H1.97538C0.984023 11.8182 0 10.9917 0 9.9917C0.0070643 9.84692 0.0119094 9.6977 0.0168363 9.54596C0.039042 8.86205 0.0629075 8.12702 0.299089 7.51818L3.0208 1.10909Z",fill:"inherit",stroke:"none"}),s.createElement("path",{d:"M17.1451 0C16.7308 0 16.3951 0.335787 16.3951 0.75V10.1591C16.3951 10.5733 16.7308 10.9091 17.1451 10.9091H19.25C19.6642 10.9091 20 10.5733 20 10.1591V0.75C20 0.335786 19.6642 0 19.25 0H17.1451Z",fill:"inherit",stroke:"none"})),e.ThumbsUpFilled=({className:e,width:t=18})=>s.createElement(Ge.a1,{className:e,width:t,viewBox:"-1 -1 22 20"},s.createElement("path",{d:"M16.9792 16.8909C16.9618 16.9329 16.943 16.974 16.9227 17.0142C16.7156 17.4249 16.3576 17.743 15.9219 17.8973C15.7562 17.956 15.5792 17.9911 15.395 17.9985C15.3706 17.9995 15.3456 18 15.3209 18L7.20984 18C6.76438 18 6.35532 17.8348 6.03988 17.5621C5.65332 17.228 5.40738 16.7325 5.40738 16.1818L5.40738 7.09091C5.40738 6.59091 5.60565 6.13636 5.9391 5.80909L10.9359 0.772727C10.9359 0.772727 11.7297 0 11.8962 0C12.7451 0 13.3949 1.09375 13.194 2.02727L12.3378 6.18182L18.0246 6.18182C19.0159 6.18182 20 7.0083 20 8.0083C19.9929 8.15308 19.9881 8.3023 19.9831 8.45404C19.9609 9.13795 19.9371 9.87298 19.7009 10.4818L16.9792 16.8909Z",fill:"inherit",stroke:"none"}),s.createElement("path",{d:"M2.85492 18C3.26913 18 3.60492 17.6642 3.60492 17.25L3.60492 7.84091C3.60492 7.4267 3.26913 7.09091 2.85492 7.09091L0.750001 7.09091C0.335788 7.09091 0 7.42669 0 7.84091V17.25C0 17.6642 0.335787 18 0.75 18H2.85492Z",fill:"inherit",stroke:"none"})),e.Hide=({className:e,width:t=24})=>s.createElement(Ge.a1,{className:e,width:t,viewBox:"0 0 24 24"},s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.49205 10.5522C4.73941 10.4295 5.03944 10.5305 5.16218 10.7779C7.91042 16.3166 16.0896 16.3166 18.8378 10.7779C18.9606 10.5305 19.2606 10.4295 19.508 10.5522C19.7553 10.675 19.8563 10.975 19.7336 11.2223C16.6178 17.5018 7.38215 17.5018 4.26639 11.2223C4.14365 10.975 4.24468 10.675 4.49205 10.5522ZM5.06784 13.8847C5.2631 14.0799 5.2631 14.3965 5.06784 14.5918L3.85355 15.806C3.65829 16.0013 3.34171 16.0013 3.14645 15.806C2.95118 15.6108 2.95118 15.2942 3.14645 15.0989L4.36073 13.8847C4.55599 13.6894 4.87258 13.6894 5.06784 13.8847ZM18.9322 13.8847C19.1274 13.6894 19.444 13.6894 19.6393 13.8847L20.8536 15.0989C21.0488 15.2942 21.0488 15.6108 20.8536 15.806C20.6583 16.0013 20.3417 16.0013 20.1464 15.806L18.9322 14.5918C18.7369 14.3965 18.7369 14.0799 18.9322 13.8847ZM8.17599 16.2196C8.42298 16.3431 8.52309 16.6434 8.39959 16.8904L7.59007 18.5094C7.46658 18.7564 7.16624 18.8565 6.91925 18.733C6.67226 18.6095 6.57215 18.3092 6.69564 18.0622L7.50517 16.4432C7.62866 16.1962 7.929 16.0961 8.17599 16.2196ZM15.824 16.2196C16.071 16.0961 16.3713 16.1962 16.4948 16.4432L17.3044 18.0622C17.4279 18.3092 17.3277 18.6095 17.0807 18.733C16.8338 18.8565 16.5334 18.7564 16.4099 18.5094L15.6004 16.8904C15.4769 16.6434 15.577 16.3431 15.824 16.2196ZM12 16.9763C12.2762 16.9763 12.5 17.2001 12.5 17.4763V19.0953C12.5 19.3715 12.2762 19.5953 12 19.5953C11.7239 19.5953 11.5 19.3715 11.5 19.0953V17.4763C11.5 17.2001 11.7239 16.9763 12 16.9763Z",fill:"inherit",stroke:"none"})),e.Show=({className:e,width:t=24})=>s.createElement(Ge.a1,{className:e,width:t,viewBox:"0 0 24 24"},s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.333 11.1961C16.1813 5.6013 7.81872 5.6013 4.66699 11.1961C4.60002 11.315 4.60002 11.4628 4.66699 11.5817C7.81872 17.1765 16.1813 17.1765 19.333 11.5817C19.4 11.4628 19.4 11.315 19.333 11.1961ZM3.79573 10.7053C7.32991 4.43157 16.6701 4.43158 20.2043 10.7053C20.4429 11.1289 20.4429 11.6489 20.2043 12.0725C16.6701 18.3462 7.32991 18.3462 3.79572 12.0725C3.5571 11.6489 3.55711 11.1289 3.79573 10.7053Z",fill:"inherit",stroke:"none"}),s.createElement("path",{d:"M14.6667 11.3889C14.6667 12.8616 13.4728 14.0556 12 14.0556C10.5272 14.0556 9.33333 12.8616 9.33333 11.3889C9.33333 9.91613 10.5272 8.72222 12 8.72222C13.4728 8.72222 14.6667 9.91613 14.6667 11.3889Z",fill:"inherit",stroke:"none"})),e.Info=({className:e,width:t=24})=>s.createElement(Ge.a1,{className:e,width:t,viewBox:"0 0 24 24"},s.createElement("path",{d:"M12.5,11.273C12.5,10.997 12.276,10.773 12,10.773C11.724,10.773 11.5,10.997 11.5,11.273L11.5,15.636C11.5,15.913 11.724,16.136 12,16.136C12.276,16.136 12.5,15.913 12.5,15.636L12.5,11.273ZM12.5,8.349C12.5,8.073 12.276,7.849 12,7.849C11.724,7.849 11.5,8.073 11.5,8.349L11.5,8.364C11.5,8.64 11.724,8.864 12,8.864C12.276,8.864 12.5,8.64 12.5,8.364L12.5,8.349ZM20,12C20,7.582 16.418,4 12,4C7.582,4 4,7.582 4,12C4,16.418 7.582,20 12,20C16.418,20 20,16.418 20,12ZM19,12C19,15.866 15.866,19 12,19C8.134,19 5,15.866 5,12C5,8.134 8.134,5 12,5C15.866,5 19,8.134 19,12Z",fill:"inherit",stroke:"none",fillRule:"evenodd"})),e.Disable=({className:e,width:t=24})=>s.createElement(Ge.a1,{className:e,width:t,viewBox:"0 0 24 24"},s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4.30078C12.2761 4.30078 12.5 4.52464 12.5 4.80078V11.9085C12.5 12.1846 12.2761 12.4085 12 12.4085C11.7239 12.4085 11.5 12.1846 11.5 11.9085V4.80078C11.5 4.52464 11.7239 4.30078 12 4.30078ZM9.43113 6.37798C9.57099 6.61608 9.49134 6.92248 9.25323 7.06234C7.60863 8.02833 6.5 9.83543 6.5 11.9085C6.5 15.0042 8.9696 17.5008 12 17.5008C15.0304 17.5008 17.5 15.0042 17.5 11.9085C17.5 9.83543 16.3914 8.02833 14.7468 7.06234C14.5087 6.92248 14.429 6.61608 14.5689 6.37798C14.7087 6.13987 15.0151 6.06022 15.2532 6.20008C17.1954 7.34087 18.5 9.47149 18.5 11.9085C18.5 15.5421 15.597 18.5008 12 18.5008C8.40298 18.5008 5.5 15.5421 5.5 11.9085C5.5 9.47149 6.80456 7.34087 8.74677 6.20008C8.98487 6.06022 9.29127 6.13987 9.43113 6.37798Z",fill:"inherit",stroke:"none"})),e.InlineHighlightsDisabled=({className:e,width:t=24})=>s.createElement(Ge.a1,{className:e,width:t,viewBox:"0 0 24 24"},s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.9392 4.35352C15.525 3.76774 16.4747 3.76774 17.0605 4.35352L20.596 7.88906C21.1818 8.47484 21.1818 9.42459 20.596 10.0104L20.193 10.4134C19.8413 10.2753 19.4734 10.1693 19.0929 10.0993L19.8889 9.30327C20.0842 9.10801 20.0842 8.79143 19.8889 8.59617L16.3534 5.06063C16.1581 4.86537 15.8416 4.86537 15.6463 5.06063L8.92878 11.7781L12.0928 14.9422C12.0317 15.2856 11.9999 15.6391 11.9999 16C11.9999 16.0903 12.0019 16.1801 12.0058 16.2694L8.22168 12.4853L7.29669 13.4102L7.1417 16.355L8.59455 17.8079L11.5393 17.6529L12.0992 17.093C12.1692 17.4735 12.2751 17.8414 12.4133 18.1931L12.1108 18.4957C12.0234 18.583 11.9068 18.6349 11.7835 18.6414L8.61634 18.8081L7.69134 19.7331C7.59757 19.8269 7.47039 19.8796 7.33778 19.8796L3.80226 19.8795C3.60003 19.8795 3.41771 19.7577 3.34032 19.5709C3.26293 19.384 3.30571 19.169 3.44871 19.026L6.14146 16.3332L6.30816 13.1661C6.31465 13.0427 6.36657 12.9261 6.45391 12.8388L14.9392 4.35352Z",stroke:"none"}),s.createElement("path",{d:"M23 16C23 18.7614 20.7614 21 18 21C15.2386 21 13 18.7614 13 16C13 13.2386 15.2386 11 18 11C20.7614 11 23 13.2386 23 16Z",fill:"none"}),s.createElement("line",{x1:"15.9571",y1:"13.8",x2:"20.25",y2:"18.0929",fill:"none",strokeLinecap:"round"}),s.createElement("line",{x1:"0.5",y1:"-0.5",x2:"6.57107",y2:"-0.5",transform:"matrix(-0.707107 0.707107 0.707107 0.707107 20.75 13.8)",fill:"none",strokeLinecap:"round"})),e.WarningBadge=({className:e,width:t=14})=>s.createElement(Ge.a1,{className:e,width:t,viewBox:"0 0 14 14"},s.createElement("line",{x1:"7",y1:"2",x2:"7",y2:"12",stroke:He.Z.gold80,fill:"none",strokeWidth:"2"}),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 7C13 10.3137 10.3137 13 7 13C3.68629 13 1 10.3137 1 7C1 3.68629 3.68629 1 7 1C10.3137 1 13 3.68629 13 7ZM6.25 3.625C6.25 3.21079 6.58579 2.875 7 2.875C7.41421 2.875 7.75 3.21079 7.75 3.625V7.375C7.75 7.78921 7.41421 8.125 7 8.125C6.58579 8.125 6.25 7.78921 6.25 7.375V3.625ZM7 11.125C7.51777 11.125 7.9375 10.7053 7.9375 10.1875C7.9375 9.66973 7.51777 9.25 7 9.25C6.48223 9.25 6.0625 9.66973 6.0625 10.1875C6.0625 10.7053 6.48223 11.125 7 11.125Z",fill:He.Z.gold0,stroke:"none"}),s.createElement("rect",{x:"0.5",y:"0.5",width:"13",height:"13",rx:"6.5",stroke:He.Z.gold80,fill:"none"})),e.ChevronDown=({className:e,width:t=24})=>s.createElement(Ge.a1,{className:e,width:t,viewBox:"0 0 24 24"},s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.14645 9.14645C6.34171 8.95118 6.65829 8.95118 6.85355 9.14645L12 14.2929L17.1464 9.14645C17.3417 8.95118 17.6583 8.95118 17.8536 9.14645C18.0488 9.34171 18.0488 9.65829 17.8536 9.85355L12 15.7071L6.14645 9.85355C5.95118 9.65829 5.95118 9.34171 6.14645 9.14645Z",fill:"inherit",stroke:"none"})),e.Expand=({className:e,width:t=32})=>s.createElement(Ge.a1,{className:e,width:t,viewBox:"0 0 32 32"},s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 7.29297L20.8536 12.1465C21.0488 12.3418 21.0488 12.6584 20.8536 12.8536C20.6583 13.0489 20.3417 13.0489 20.1464 12.8536L16 8.70718L11.8536 12.8536C11.6583 13.0489 11.3417 13.0489 11.1464 12.8536C10.9512 12.6584 10.9512 12.3418 11.1464 12.1465L16 7.29297ZM11.1464 19.1465C11.3417 18.9513 11.6583 18.9513 11.8536 19.1465L16 23.293L20.1464 19.1465C20.3417 18.9513 20.6583 18.9513 20.8536 19.1465C21.0488 19.3418 21.0488 19.6584 20.8536 19.8536L16 24.7072L11.1464 19.8536C10.9512 19.6584 10.9512 19.3418 11.1464 19.1465Z",fill:"inherit",stroke:"none"})),e.Collapse=({className:e,width:t=32})=>s.createElement(Ge.a1,{className:e,width:t,viewBox:"0 0 32 32"},s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.1464 7.14645C11.3417 6.95118 11.6583 6.95118 11.8536 7.14645L16 11.2929L20.1464 7.14645C20.3417 6.95118 20.6583 6.95118 20.8536 7.14645C21.0488 7.34171 21.0488 7.65829 20.8536 7.85355L16 12.7071L11.1464 7.85355C10.9512 7.65829 10.9512 7.34171 11.1464 7.14645ZM16 19.2929L20.8536 24.1464C21.0488 24.3417 21.0488 24.6583 20.8536 24.8536C20.6583 25.0488 20.3417 25.0488 20.1464 24.8536L16 20.7071L11.8536 24.8536C11.6583 25.0488 11.3417 25.0488 11.1464 24.8536C10.9512 24.6583 10.9512 24.3417 11.1464 24.1464L16 19.2929Z",fill:"inherit",stroke:"none"})),e.NotificationInfo=({className:e,width:t=24})=>s.createElement(Ge.a1,{className:e,width:t,viewBox:"0 0 24 24"},s.createElement("g",{fillRule:"evenodd"},s.createElement("circle",{cx:"12",cy:"12",r:"11.5",fill:"inherit"}),s.createElement("path",{stroke:"inherit",strokeWidth:"2",d:"M7.54 12.81l3.343 3.5 6.657-7.78",strokeLinecap:"round"}))),e.OnboardingHeader=({className:e,width:t=75,height:n=60})=>s.createElement(Ge.a1,{className:e,width:t,height:n,viewBox:"0 0 75 60"},s.createElement("g",null,s.createElement("rect",{x:"9",y:"9",width:"44",height:"48",rx:"4",fill:"#F9FAFF",stroke:"#0E101A"}),s.createElement("path",{d:"M17 25H50",stroke:"#0E101A",strokeLinecap:"round"}),s.createElement("path",{d:"M17 43H50",stroke:"#0E101A",strokeLinecap:"round"}),s.createElement("path",{d:"M17 34H50",stroke:"#0E101A",strokeLinecap:"round"}),s.createElement("g",{style:{mixBlendMode:"multiply"}},s.createElement("path",{d:"M15 32C15 30.8954 15.8954 30 17 30H51C52.1046 30 53 30.8954 53 32V36C53 37.1046 52.1046 38 51 38H17C15.8954 38 15 37.1046 15 36V32Z",fill:"#E1B3FF",fillOpacity:"0.8"})),s.createElement("rect",{x:"1",y:"1",width:"23",height:"16.4773",rx:"3",fill:"#FCE4EE",stroke:"#0E101A",strokeMiterlimit:"10"}),s.createElement("path",{d:"M1.49109 16.6091L8.59259 8.97734M23.5589 16.6091L16.3304 8.84091",stroke:"#0E101A",strokeMiterlimit:"10"}),s.createElement("path",{d:"M1.58459 1.83272L11.234 11.5454C11.9427 12.1834 13.0331 12.1834 13.6872 11.5454L23.3367 1.83272",stroke:"#0E101A",strokeMiterlimit:"10"}),s.createElement("g",{opacity:"0.15"},s.createElement("rect",{width:"6",height:"18",rx:"3",transform:"matrix(0.707107 -0.707107 -0.707107 -0.707107 67.3938 58.2764)",fill:"#0E101A",stroke:"#0E101A",strokeLinejoin:"round"}),s.createElement("circle",{r:"17.1092",transform:"matrix(-1 0 0 1 46.473 34.5272)",fill:"#0E101A",stroke:"#0E101A",strokeLinejoin:"round"})),s.createElement("mask",{id:"mask0_2641_61692",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"37",y:"18",width:"27",height:"27"},s.createElement("circle",{r:"12.6387",transform:"matrix(-1 0 0 1 50.6014 31.6072)",fill:"#DBEBFF",stroke:"#0E101A",strokeLinejoin:"round"})),s.createElement("g",{mask:"url(#mask0_2641_61692)"},s.createElement("rect",{x:"-0.199951",y:"-4.56667",width:"65.3333",height:"83.3",rx:"6.53333",fill:"white",stroke:"#0E101A",strokeWidth:"1.63333"}),s.createElement("path",{d:"M12.8666 31.3666H66.7666",stroke:"#0E101A",strokeLinecap:"round"}),s.createElement("g",{style:{mixBlendMode:"multiply"}},s.createElement("path",{d:"M9.59998 28.1C9.59998 26.2959 11.0625 24.8333 12.8666 24.8333H84.7333C86.5374 24.8333 88 26.2959 88 28.1V34.6333C88 36.4375 86.5374 37.9 84.7333 37.9H12.8666C11.0625 37.9 9.59998 36.4375 9.59998 34.6333V28.1Z",fill:"#E1B3FF"}))),s.createElement("rect",{width:"6",height:"18",rx:"3",transform:"matrix(0.707107 -0.707107 -0.707107 -0.707107 71.3938 55.2764)",fill:"#15C39A",stroke:"#0E101A",strokeLinejoin:"round"}),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M50.4729 48.6363C41.0238 48.6363 33.3638 40.9763 33.3638 31.5271C33.3638 22.078 41.0238 14.418 50.4729 14.418C59.9221 14.418 67.5821 22.078 67.5821 31.5271C67.5821 40.9763 59.9221 48.6363 50.4729 48.6363ZM50.5984 44.2492C43.6182 44.2492 37.9597 38.5907 37.9597 31.6105C37.9597 24.6303 43.6182 18.9718 50.5984 18.9718C57.5786 18.9718 63.2371 24.6303 63.2371 31.6105C63.2371 38.5907 57.5786 44.2492 50.5984 44.2492Z",fill:"#15C39A"}),s.createElement("path",{d:"M32.8638 31.5271C32.8638 41.2524 40.7477 49.1363 50.4729 49.1363V48.1363C41.3 48.1363 33.8638 40.7001 33.8638 31.5271H32.8638ZM50.4729 13.918C40.7477 13.918 32.8638 21.8019 32.8638 31.5271H33.8638C33.8638 22.3542 41.3 14.918 50.4729 14.918V13.918ZM68.0821 31.5271C68.0821 21.8019 60.1982 13.918 50.4729 13.918V14.918C59.6459 14.918 67.0821 22.3542 67.0821 31.5271H68.0821ZM50.4729 49.1363C60.1982 49.1363 68.0821 41.2524 68.0821 31.5271H67.0821C67.0821 40.7001 59.6459 48.1363 50.4729 48.1363V49.1363ZM37.4597 31.6105C37.4597 38.8668 43.3421 44.7492 50.5984 44.7492V43.7492C43.8944 43.7492 38.4597 38.3146 38.4597 31.6105H37.4597ZM50.5984 18.4718C43.3421 18.4718 37.4597 24.3542 37.4597 31.6105H38.4597C38.4597 24.9065 43.8944 19.4718 50.5984 19.4718V18.4718ZM63.7371 31.6105C63.7371 24.3542 57.8547 18.4718 50.5984 18.4718V19.4718C57.3024 19.4718 62.7371 24.9065 62.7371 31.6105H63.7371ZM50.5984 44.7492C57.8547 44.7492 63.7371 38.8668 63.7371 31.6105H62.7371C62.7371 38.3146 57.3024 43.7492 50.5984 43.7492V44.7492Z",fill:"#0E101A"})))}(Te||(Te={}));var Ve,De=n(64757),Ze=n(80682);!function(e){e.Primary=({className:e,theme:t,compact:n,children:i,...o})=>s.createElement(De.zx.Primary,{...(0,Ne.Sh)(Ze.button,e,"dark"===t?Ze.dark:void 0,n?Ze.noPadding:void 0),...o},i),e.Secondary=({className:e,theme:t,compact:n,children:i,...o})=>s.createElement(De.zx.Ghost,{...(0,Ne.Sh)(Ze.button,Ze.secondary,e,"dark"===t?Ze.dark:void 0,n?Ze.noPadding:void 0),...o},i),e.Tertiary=({className:e,theme:t,compact:n,children:i,...o})=>s.createElement(De.zx.Tertiary,{...(0,Ne.Sh)(Ze.button,Ze.tertiary,e,"dark"===t?Ze.dark:void 0,n?Ze.noPadding:void 0),...o},i)}(Ve||(Ve={}));const Ye={panelScrollEventThrottleTime:200,enableInlineHighlights:"Show highlights",disableInlineHighlights:"Hide highlights",followUps:{doneNotification:"Done!"},recapBar:{optIn:{content:"Grammarly can now summarize emails, including this one!",tryItOutButton:"Try it out",learnMoreLabel:"Learn more",learnMoreLink:"https://www.grammarly.com/recap",dismissButton:"Dismiss"},logoTooltips:{hide:"Hide recap",show:"Show recap",loading:"",noSummary:"",noSummaryMessageTooShort:"",contentIsLowQuality:""},zeroStates:{contentIsLowQuality:"This recap may not be useful to you.",showAnyway:"Show anyway",noSummary:"We dont have a summary for this message.",noSummaryMessageTooShort:"We dont have a summary for this message."},followUps:{buttonTitle:{singular:"follow-up",plural:"follow-ups"}},keyPoints:{buttonTitle:{singular:"key point",plural:"key points"}},all:{buttonTitle:"All"},settingsMenu:{buttonTitle:"Actions",menuTitle:"Actions Menu",hide:"Hide email recap",show:"Show email recap",about:"About email recap",feedback:"Give feedback",disable:"Turn off email recap"},highlightsSwitch:{label:"Highlights"}},hintButton:{title:"Whats this?"},reply:"Reply",itemMenu:{buttonTitle:"Actions",actions:{reply:"Reply to this",copy:"Copy",remove:"Remove"}},itemFeedback:{button:{action:"Give Feedback",good:"This is helpful",bad:"This is not helpful"},popup:{good:"Helpful",bad:"Not helpful"}},highlightMenu:{actions:{reply:"Reply to this",copy:"Copy",remove:"Remove highlight"},logoTooltip:"Highlighted by Grammarly"},replyPanel:{show:"Show",hide:"Hide",expand:"Expand",collapse:"Collapse",compact:{followUps:{singular:"follow-up",plural:"follow-ups",suffix:"to consider."},keyPoints:{content:"Refresh your memory.",action:"Show key points"}},header:{followUps:{singular:"Consider responding to this",plural:"Consider responding to these"},keyPoints:{singular:"key point",plural:"key points"}},content:{followUps:{singular:"follow-up",plural:"follow-ups"},keyPoints:{singular:"key point",plural:"key points"}}},aboutRecapModal:{title:"Spend less time in your inbox with email summarization",closeButton:"Close",takeATourButton:"Take a tour",body:e=>s.createElement(s.Fragment,null,s.createElement("p",null,"Push back on information overload with email recap, a new feature from Grammarly that helps you read more effectively and write sharper replies."),s.createElement("p",null,"Grammarly analyzes emails in seconds, smartly picking out and highlighting the takeaways and action items so you can focus your time and energy where it matters most."," ",s.createElement("a",{href:"https://www.grammarly.com/recap",target:"_blank",rel:"noreferrer",onClick:e.onLearMoreLinkClick},"Learn more")))},turnOffRecapModal:{title:"Turn off email recap?",hideRecapButton:"Hide recap",turnOffRecapButton:"Turn off recap",body:()=>s.createElement(s.Fragment,null,s.createElement("p",null,"This will completely deactivate the feature."),s.createElement("p",null,s.createElement("b",null,"Hide recap")," instead if you would rather not see it for now, but still want the option to expand it later."))},optInDismissModal:{title:"Should we show this message again later?",yesButton:"Yes",noButton:"No"},optInTryItOutModal:{title:"Spend less time in your inbox with email summarization",notNowButton:"Not now",declineButton:"Decline",continueButton:"Continue",body:e=>s.createElement(s.Fragment,null,s.createElement("p",null,"Push back on information overload with Grammarlys email recap, a feature that helps you read more effectively and write sharper replies."),s.createElement("p",null,"Before we can deliver AI-powered summaries, Grammarly needs permission to collect and process the text, subject line, and metadata of your email threads. We handle that data securely and never sell or rent user data. You can opt out at any time by deactivating the feature within the Grammarly for Chrome extension settings."),s.createElement("p",null,"By continuing, you grant Grammarly permission to collect data according to our"," ",s.createElement("a",{href:"https://www.grammarly.com/recap#sectionGroup_3sdszga28v553MzgysHnCL",target:"_blank",rel:"noreferrer",onClick:e.onDataCollectionPolicyLinkClick},"data collection policy"),". We also provide additional information about Grammarlys general data policies in our"," ",s.createElement("a",{href:"https://www.grammarly.com/terms",target:"_blank",rel:"noreferrer",onClick:e.onTermsOfServiceLinkClick},"Terms of Service")," ","and"," ",s.createElement("a",{href:"https://www.grammarly.com/privacy-policy",target:"_blank",rel:"noreferrer",onClick:e.onPrivacyPolicyLinkClick},"Privacy Policy"),"."))},genericFeedbackModal:{title:"Is Grammarly Recap helpful?",textBoxPlaceholder:"How can we improve?",textBoxAriaLabel:"Feedback text",requiredLabel:"Required",cancel:"Cancel",sendFeedback:"Send feedback",ratings:["Its not helpful","It could be better","Its okay","Its pretty helpful","Its great"]},itemFeedbackModal:{title:"Thank you for rating!",description:"Wed love to hear what you liked or disliked so we can improve this feature.",textBoxHeader:"Feedback",textBoxPlaceholder:"Share your thoughts",textBoxAriaLabel:"Feedback text",requiredLabel:"Required",skip:"Skip",sendFeedback:"Send feedback"},toastNotifications:{textCopiedSuccess:"Copied",feedbackSubmittedSuccess:"Thank you for your feedback!",undoRemoveItem:{followUp:"Follow-up removed",keyPoint:"Key-point removed",highlight:"Highlight removed",undoDoneLabel:"Action undone",undoButton:"Undo"}},lastingNotifications:{optInDismissShowLaterYes:{title:"Well show the message about recap later.",body:"You can try email recaps at any time through the Grammarly for Chrome extension settings.",closeButton:"Close"},optInDismissShowLaterNo:{title:"Ok, well stop showing these messages for a while.",body:"You can try email recaps at any time through the Grammarly for Chrome extension settings.",closeButton:"Close"},turnOffRecap:{title:"Email recap is now off",body:"You can turn it back on at any time through the Grammarly for Chrome extension settings.",closeButton:"Close"}},onboarding:{buttons:{prev:"Back",next:"Next",close:"Close"},firstHighlight:{header:"Never miss the point",content:"The most important sentences have been highlighted for you."},highlightMenu:{header:"Put highlights to use",content:"Click to open actions like copying and replying."},recapBar:{header:"View the full recap",content:"Expand the panel to access email summaries, handy follow-up checklists, and more."},recapBarMenu:{header:"Hide email recaps",content:"You can collapse recap content when you dont need it or turn the feature off completely."},followUps:{header:"Tackle action items",content:"Review any questions and tasks raised by the email."},draftReply:{header:"Ready to write back?",content:"Open the reply field and start drafting away."},keyPoints:{header:"Short on time?",content:"Stay up to date with 15 of the emails top takeaways."},checkItem:{header:"Mark completed tasks",content:"While drafting a reply, use the checklist to keep track of whats left to address."},itemMenu:{header:"Quote the source",content:"Reference a specific detail or sentence by pasting it directly into your reply."}}};var qe,je=n(81792);!function(e){let t;!function(e){const t=Ee.UI.Node.make((({state:e,notify:t})=>{const{ref:n,onMount:i}=Oe.P.useElWatcher();return Oe.P.useSubscriptionTo(n.pipe(ze.oA,h.M(e),M.b((([e,{onboardingKind:n,stepName:i}])=>t({kind:"shown",onboardingKind:n,stepName:i})())))),s.createElement(xe.F.Fragment,null,e.pipe(u.U((({stepName:e,stepsCount:n,currentStep:o})=>s.createElement("div",{className:je.onboarding,key:e,ref:i},"firstHighlight"===e?s.createElement(Te.OnboardingHeader,{className:je.onboardingIcon}):null,s.createElement("h1",{className:je.onboardingHeader},Ye.onboarding[e].header),s.createElement("div",{className:je.onboardingContent},Ye.onboarding[e].content),s.createElement("div",{className:je.onboardingFooter},o>0?s.createElement(Ve.Tertiary,{name:"prev",theme:"dark","aria-title":Ye.onboarding.buttons.prev,onClick:t({kind:"prev",stepName:e}),className:je.onboardingFooterLeft},s.createElement(Ge.JO.Arrow,{direction:Ge.n4.left,width:12}),Ye.onboarding.buttons.prev):null,n>1?s.createElement("div",{className:je.onboardingFooterCenter},o+1," of ",n):null,s.createElement(Ve.Primary,{name:"next",theme:"dark","aria-title":Ye.onboarding.buttons.next,onClick:t({kind:o===n-1?"close":"next",stepName:e}),className:je.onboardingFooterRight},o===n-1?Ye.onboarding.buttons.close:Ye.onboarding.buttons.next)),s.createElement(Ve.Tertiary,{className:je.onboardingClose,name:"close",theme:"dark",compact:!0,onClick:t({kind:"close",stepName:e})},s.createElement(Ge.JO.Close,null)))))))}));e.UIPart=Ee.UI.Union.asOption(t),e.createFlow=function(e,t,n){return Ee.Z.composeUnion({None:()=>w.of(null),Some:Ee.Z.composeKnot({value:Ee.Z.fromSideEffect((t=>{switch(t.kind){case"shown":n.next({kind:re.Kind.onboardingShown,stepName:t.stepName,onboardingKind:t.onboardingKind,docId:e()});break;case"next":n.next({kind:re.Kind.onboardingNext,stepName:t.stepName,docId:e()});break;case"prev":n.next({kind:re.Kind.onboardingPrev,stepName:t.stepName,docId:e()});break;case"close":n.next({kind:re.Kind.onboardingDismiss,stepName:t.stepName,docId:e()});break;default:(0,ue.L0)(t)}}),t.pipe(u.U(me.map((({currentStep:e,steps:t,currentStepName:n})=>({currentStep:e,stepsCount:t.length,stepName:n,onboardingKind:t[e].kind})))),ze.oA))})},(()=>t))}}(t=e.Content||(e.Content={}));const n=Ee.UI.Grid.make((({slots:e,state:t})=>s.createElement(xe.F.Fragment,null,t.pipe(u.U(me.fold((()=>null),(({anchorNode:t,placement:n,distance:i,show:o})=>s.createElement(Ae.WithRef,{key:"onboarding",content:s.createElement(xe.F.Fragment,null,e.content),referenceElement:t,offsets:{away:i?i+8:6,along:0},theme:"dark",arrowSize:"small",useArrow:!0,placement:n||"top",style:{zIndex:1e4,width:240},animateBetweenStates:!1,show:o}))))))));e.UIPart=Ee.UI.Knot.make(n,{content:t.UIPart}),e.createFlow=function(e){const n=e.state.view((0,o.ls)(ae.H6("anchorNode","placement","distance","currentStepName","currentStep","steps"),Ie.Y(me.option))),i=n.pipe(ze.oA,c.w((e=>n.view(me.isSome).view((t=>me.some({...e,show:t}))))),k.O(me.none));return Ee.Z.composeKnot({root:()=>i,content:t.createFlow((()=>e.state.get().docId),i.pipe(u.U(me.map(ae.H6("currentStepName","currentStep","steps")))),e.actions)})}}(qe||(qe={}));var Qe,We=n(75420),Je=n(80900),Xe=n(71032),$e=n(32952);!function(e){e.empty=e=>({currentStep:me.none,currentStepName:me.none,steps:me.none,anchorNode:me.none,placement:me.none,distance:me.none,docId:e})}(Qe||(Qe={}));const et='[aria-controls="actions-menu"]',tt="li",nt='[data-name="menu"]';class it{constructor(e,t,n,i,o,a,s=(()=>{this._tryToOpenSettingsMenu()}),r=(()=>{this._tryToCloseSettingsMenu()}),l=(()=>this._tryToOpenHighlightPopup()),d=(()=>this._tryToCloseHighlightPopup()),c=(()=>this._tryToOpenFirstItemMenu()),u=(()=>this._tryToCloseFirstItemMenu()),m=at){this._docId=e,this.actions=t,this.fakeMouse=n,this._isAvailable=i,this._csState=o,this._csActions=a,this._openSettingsMenu=s,this._closeSettingsMenu=r,this._openHighlightPopup=l,this._closeHighlightPopup=d,this._showFirstItemMenu=c,this._hideFirstItemMenu=u,this._stepsSetup=m,this._subscriptions=new D.w,this._cancelableSubscription=Y.h.create(new D.w),this._state=Y.h.create(Qe.empty(this._docId)),this._anchors=new Map,this._unmountPostponed=new Map,this.state=this._state.view(),this._subscriptions.add(this._performSideEffectMaybe()),this._subscriptions.add(this._handleAnchorNode()),this._subscriptions.add(this._handleAnchorNodeUnmount()),this._subscriptions.add(this._handleSetKind()),this._subscriptions.add(this._handleNext()),this._subscriptions.add(this._handlePrev()),this._subscriptions.add(this._handleDismiss()),this._subscriptions.add(this._handleShown())}_setCancelable(e){this._cancelableSubscription.get().add(e.subscribe())}_clearCancelables(){this._cancelableSubscription.modify((e=>(e.unsubscribe(),new D.w)))}_tryToOpenSettingsMenu(){(0,o.zG)(me.fromNullable(this._anchors.get("recapBar")),me.filter((e=>"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE&&e instanceof HTMLElement)),me.chain((e=>me.fromNullable(e.getRootNode()))),me.filter((e=>"querySelector"in e)),me.chain((e=>me.fromNullable(e.querySelector(et)))),me.filter(We.Re),me.map((e=>e.click())))}_tryToCloseSettingsMenu(){(0,o.zG)(me.fromNullable(this._anchors.get("recapBarMenu")),me.filter((e=>"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE&&e instanceof HTMLElement)),me.chain((e=>me.fromNullable(e.getRootNode()))),me.filter((e=>"querySelector"in e)),me.chain((e=>me.fromNullable(e.querySelector(et)))),me.filter(We.Re),me.map((e=>e.click())))}_tryToOpenHighlightPopup(){(0,o.zG)(this._state.get(),(({currentStepName:e})=>Ie.Y(me.option)({anchorNode:me.fromNullable(this._anchors.get("firstHighlight")),currentStepName:e})),me.filter((({currentStepName:e})=>"highlightMenu"===e)),me.map((({anchorNode:e})=>e.getBoundingClientRect())),me.chain((({left:e,top:t})=>Ie.Y(me.option)({x:me.some(e),y:me.some(t),el:(0,o.zG)(me.fromNullable(document.elementFromPoint(e+4,t+4)),me.filter(We.Re))}))),me.map((({x:e,y:t,el:n})=>{this.fakeMouse.set({clientX:e,clientY:t+8}),this._clearCancelables(),this._setCancelable(Je.H(1e3/15).pipe(M.b((()=>n.dispatchEvent(new MouseEvent("click",{bubbles:!0,clientX:e,clientY:t+8})))))),this._setCancelable(Je.H(5e3).pipe(M.b((()=>{this.fakeMouse.set(null)}))))})))}_tryToCloseHighlightPopup(){(0,o.zG)(me.fromNullable(this._anchors.get("firstHighlight")),me.map((e=>e.getBoundingClientRect())),me.chain((({left:e,top:t})=>Ie.Y(me.option)({x:me.some(e),y:me.some(t),el:(0,o.zG)(me.fromNullable(document.elementFromPoint(e+4,t+4)),me.filter(We.Re))}))),me.map((({el:e})=>{this.fakeMouse.set({clientX:0,clientY:0}),this._clearCancelables(),this._setCancelable(Je.H(1e3/15).pipe(M.b((()=>{e.dispatchEvent(new MouseEvent("click",{bubbles:!0,clientX:0,clientY:0})),this.fakeMouse.set(null)}))))})))}_tryToOpenFirstItemMenu(){(0,o.zG)(me.fromNullable(this._anchors.get("checkItem")),me.filter((e=>"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE&&e instanceof HTMLElement)),me.chain((e=>me.fromNullable(e.closest(tt)))),me.filter(We.Re),me.chain((e=>me.fromNullable(e.querySelector(nt)))),me.filter(We.Re),ce.bw((e=>e.click())))}_tryToCloseFirstItemMenu(){(0,o.zG)(me.fromNullable(this._anchors.get("itemMenu")),me.filter((e=>"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE&&e instanceof HTMLElement)),me.chain((e=>me.fromNullable(e.closest(tt)))),me.filter(We.Re),me.chain((e=>me.fromNullable(e.querySelector(nt)))),me.filter(We.Re),ce.bw((e=>e.click())))}_performSideEffectMaybe(){return this._state.view("currentStepName").pipe(M.b(ce.bw((e=>{switch(e){case"highlightMenu":this._openHighlightPopup();break;case"recapBarMenu":this._openSettingsMenu();break;case"itemMenu":this._showFirstItemMenu()}})))).subscribe()}_cleanUpSideEffectMaybe(e){switch(e){case"highlightMenu":this._closeHighlightPopup();break;case"recapBarMenu":this._closeSettingsMenu();break;case"itemMenu":this._hideFirstItemMenu()}}_getAnchorNode(e){return(0,o.zG)(me.fromNullable(this._anchors.get(e)),me.filter((e=>!("nodeType"in e)||!!e.parentElement)),ce.ew((()=>this._anchors.delete(e))))}_handleAnchorNode(){return this.actions.pipe(le.ofKind(re.Kind.onboardingAnchorMounted),le.ofDocId(this._docId),M.b((({stepName:e,anchorNode:t})=>{this._anchors.set(e,t),(0,o.zG)(this._state.view("currentStepName").get(),me.filter((t=>t===e)),ce.bw((()=>{this._state.lens("anchorNode").set(me.some(t))})))})),h.M(this._csState),M.b((([e,t])=>{(0,o.zG)(this._state.get(),(({steps:e,currentStep:t,currentStepName:n})=>Ie.Y(me.option)({steps:e,currentStep:t,currentStepName:n})),ce.ew((()=>{(0,o.zG)(me.fromPredicate((()=>this._isAvailable.get()))(null),me.chain((()=>me.fromNullable(Object.keys(this._stepsSetup).find((e=>{var n;return!(null===(n=t.seenOnboardingKinds)||void 0===n?void 0:n[e])}))))),me.map((e=>this._stepsSetup[e])),me.map((e=>({steps:e,currentStep:0,stepName:e[0].name,placement:e[0].placement,distance:e[0].distance}))),ce.bw((({steps:e,currentStep:t,stepName:n,placement:i,distance:o})=>{this._state.modify((a=>({...a,steps:me.some(e),currentStep:me.some(t),currentStepName:me.some(n),placement:me.some(i),anchorNode:this._getAnchorNode(n),distance:me.some(o)})))})))})))}))).subscribe()}_handleAnchorNodeUnmount(){return this._subscriptions.add(this.actions.pipe(le.ofKind(re.Kind.onboardingAnchorUnmounted),le.ofDocId(this._docId),Xe.b((({stepNames:e})=>w.of(...e))),M.b((e=>{(0,o.zG)(me.fromNullable(this._unmountPostponed.get(e)),ce.bw((t=>{t.unsubscribe(),this._unmountPostponed.delete(e)})))}))).subscribe()),this.actions.pipe(le.ofKind(re.Kind.onboardingAnchorUnmounted),le.ofDocId(this._docId),Xe.b((({stepNames:e})=>w.of(...e))),M.b((e=>{this._anchors.delete(e),(0,o.zG)(me.fromNullable(this._unmountPostponed.get(e)),ce.bw((t=>{t.unsubscribe(),this._unmountPostponed.delete(e)}))),this._unmountPostponed.set(e,Je.H(150).pipe(M.b((()=>this._state.modify((t=>({...t,...(0,o.zG)(t.currentStepName,me.filter((t=>t===e)),me.fold((()=>null),(()=>({anchorNode:me.none,currentStep:me.none,currentStepName:me.none,steps:me.none,placement:me.none,distance:me.none}))))})))))).subscribe())}))).subscribe()}_handleSetKind(){return this.actions.pipe(le.ofKind(re.Kind.onboardingSetKind),M.b((({onboardingKind:e})=>{this._state.modify((t=>(0,o.zG)(e,me.filter((()=>this._isAvailable.get())),me.chain((e=>me.fromNullable(this._stepsSetup[e]))),me.map((e=>({steps:e,currentStep:0,stepName:e[0].name,placement:e[0].placement,distance:e[0].distance,docId:t.docId}))),me.fold((()=>Qe.empty(t.docId)),(({steps:e,currentStep:n,stepName:i,placement:o,distance:a})=>({steps:me.some(e),currentStep:me.some(n),currentStepName:me.some(i),placement:me.some(o),anchorNode:this._getAnchorNode(i),distance:me.some(a),docId:t.docId}))))))}))).subscribe()}_handleNext(){return this.actions.pipe(le.ofKind(re.Kind.onboardingNext),M.b((({stepName:e})=>this._cleanUpSideEffectMaybe(e))),M.b((()=>{this._state.modify((e=>({...e,...(0,o.zG)(Ie.Y(me.option)({currentStep:e.currentStep,steps:e.steps}),me.chain((({currentStep:t,steps:n})=>(0,o.zG)(me.fromNullable(n[t+1]),me.chain((n=>Ie.Y(me.option)({currentStep:me.some(t+1),steps:e.steps,stepName:me.some(n.name),placement:me.some(n.placement),distance:me.some(n.distance)})))))),ce.ew((()=>this._checkIfAllSeen())),me.fold((()=>Qe.empty(e.docId)),(({currentStep:e,steps:t,stepName:n,placement:i,distance:o})=>({currentStep:me.some(e),steps:me.some(t),currentStepName:me.some(n),placement:me.some(i),anchorNode:this._getAnchorNode(n),distance:me.some(o)}))))})))}))).subscribe()}_handlePrev(){return this.actions.pipe(le.ofKind(re.Kind.onboardingPrev),M.b((({stepName:e})=>this._cleanUpSideEffectMaybe(e))),M.b((()=>{this._state.modify((e=>({...e,...(0,o.zG)(Ie.Y(me.option)({currentStep:e.currentStep,steps:e.steps}),me.chain((({currentStep:t,steps:n})=>(0,o.zG)(me.fromNullable(n[t-1]),me.chain((n=>Ie.Y(me.option)({currentStep:me.some(t-1),steps:e.steps,stepName:me.some(n.name),placement:me.some(n.placement),distance:me.some(n.distance)})))))),me.fold((()=>Qe.empty(e.docId)),(({currentStep:e,steps:t,stepName:n,placement:i,distance:o})=>({currentStep:me.some(e),steps:me.some(t),currentStepName:me.some(n),placement:me.some(i),anchorNode:this._getAnchorNode(n),distance:me.some(o)}))))})))}))).subscribe()}_checkIfAllSeen(){this._csState.view("seenOnboardingKinds").view((e=>(0,o.zG)(me.fromNullable(e),me.map((e=>Object.values(e).every((e=>e)))),me.getOrElse(o.jv)))).view((e=>e&&this._csActions.readerUpdateSeenOnboarding())).get()}_handleDismiss(){return this.actions.pipe(le.ofKind(re.Kind.onboardingDismiss),M.b((({stepName:e})=>this._cleanUpSideEffectMaybe(e))),M.b((()=>{this._state.set(Qe.empty(this._docId)),this._checkIfAllSeen()}))).subscribe()}_handleShown(){return this.actions.pipe(le.ofKind(re.Kind.onboardingShown),M.b((({onboardingKind:e})=>{this._csActions.readerUpdateSeenOnboardingKind({onboardingKind:e})}))).subscribe()}dispose(){Array.from(this._unmountPostponed.values()).forEach((e=>e.unsubscribe())),this._cancelableSubscription.get().unsubscribe(),this._subscriptions.unsubscribe()}}var ot;!function(e){e.Mock=class{constructor(e=Qe.empty(P.eo.create("some-doc"))){this._state=Y.h.create(Qe.empty(P.eo.create("some-doc"))),this.state=this._state.view(),this.actions=new $e.xQ,this._state.modify((()=>e))}dispose(){}}}(ot||(ot={}));const at={general:[{kind:"general",name:"firstHighlight"},{kind:"general",name:"highlightMenu"},{kind:"general",name:"recapBar"},{kind:"general",name:"recapBarMenu",placement:"left"}],followUps:[{kind:"followUps",name:"followUps",placement:"right",distance:16},{kind:"followUps",name:"draftReply",placement:"right"}],keyPoints:[{kind:"keyPoints",name:"keyPoints",placement:"right",distance:16}],replyPanel:[{kind:"replyPanel",name:"checkItem",distance:42},{kind:"replyPanel",name:"itemMenu"}]};class st{constructor(e,t,n,i,a,s,r){this._threadContext=e,this._docsStateManager=t,this._itemsManager=n,this._readerCSState=i,this._csActions=a,this._actions=s,this._fakeMouse=r,this._viewModel=Y.h.create(null),this._activeStep=Y.h.create(me.none),this._viewModelSubscription=Y.h.create(new D.w),this.state=Y.h.combine(this._threadContext.view((e=>(0,o.zG)(me.fromNullable(e.messageIndexToIdMap.get(e.messageCount-1)),me.fold((()=>null),(e=>{var t;null===(t=this._viewModel.get())||void 0===t||t.dispose(),this._viewModelSubscription.get().unsubscribe();const n=new it(e,this._actions,this._fakeMouse,this.availableFor(Y.h.create(me.some(e))),this._readerCSState.view(ae.H6("seenOnboarding","seenOnboardingKinds")),this._csActions);return this._viewModel.set(n),this._viewModelSubscription.set(new D.w),this._viewModelSubscription.get().add(n.state.pipe(M.b((({currentStep:e,currentStepName:t,steps:n,anchorNode:i})=>this._activeStep.set((0,o.zG)(Ie.Y(me.option)({currentStep:e,currentStepName:t,steps:n,anchorNode:i}),me.chain((({steps:e,currentStep:t,currentStepName:n})=>Ie.Y(me.option)({step:me.fromNullable(e[t]),currentStepName:me.some(n)}))),me.fold((()=>me.none),(({step:e,currentStepName:t})=>me.some({stepName:t,onboardingKind:e.kind})))))))).subscribe()),Ee.UI.mount(qe.UIPart,qe.createFlow(n))}))))),this._activeStep,((e,t)=>({ui:e,activeStep:t})))}availableFor(e){return Y.h.combine(e,this._threadContext,this._docsStateManager.state,this._itemsManager.followUps,this._itemsManager.keyPoints,this._itemsManager.highlights,((e,t,{thread:n,docs:i},a,s,r)=>(0,o.zG)(Ie.Y(me.option)({docId:e,lastDocId:me.fromNullable(t.messageIndexToIdMap.get(t.messageCount-1))}),me.filter((({docId:e,lastDocId:t})=>t===e)),me.map(ae.ei("lastDocId")),me.chain((e=>Ie.Y(me.option)({docState:me.fromNullable(i.get(e)),followUps:me.fromNullable(a.get(e)),keyPoints:me.fromNullable(s.get(e)),highlights:me.fromNullable(r.get(e))}))),me.map((({docState:e})=>!(0,o.zG)(ve(n,e,!0),me.getOrElse(o.W8)))),me.getOrElse(o.jv))))}dispose(){var e;null===(e=this._viewModel.get())||void 0===e||e.dispose(),this._viewModelSubscription.get().unsubscribe()}}const rt=()=>s.createElement("svg",{width:"90",height:"90",viewBox:"0 0 90 90",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.createElement("rect",{y:"36",width:"64",height:"45",rx:"8",fill:"#E7E9F5"}),s.createElement("rect",{x:"9",y:"27",width:"64",height:"45",rx:"8",fill:"#F9FAFF",stroke:"#0E101A",strokeMiterlimit:"10"}),s.createElement("mask",{id:"mask0_2673_4830",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"8",y:"26",width:"66",height:"47"},s.createElement("rect",{x:"9",y:"27",width:"64",height:"45",rx:"8",fill:"#F9FAFF",stroke:"#0E101A",strokeMiterlimit:"10"})),s.createElement("g",{mask:"url(#mask0_2673_4830)"},s.createElement("path",{d:"M11 70.5L31.5 49",stroke:"#0E101A",strokeMiterlimit:"10"}),s.createElement("path",{d:"M71.5 70.5L51 49",stroke:"#0E101A",strokeMiterlimit:"10"}),s.createElement("path",{d:"M10.6267 28.4514L37.4772 55.4779C39.4493 57.2534 42.4833 57.2534 44.3037 55.4779L71.1542 28.4514",stroke:"#0E101A",strokeMiterlimit:"10"})),s.createElement("circle",{r:"17.5",transform:"matrix(-1 0 0 1 72 27)",fill:"url(#paint0_linear_2673_4830)",stroke:"#0E101A"}),s.createElement("rect",{x:"67",y:"15",width:"10",height:"16",rx:"5",stroke:"#0E101A"}),s.createElement("rect",{x:"63",y:"24",width:"18",height:"14",rx:"3",fill:"#D7F7F0",stroke:"#0E101A"}),s.createElement("circle",{cx:"72",cy:"30",r:"1.5",fill:"#0E101A",stroke:"#0E101A"}),s.createElement("path",{d:"M72 31L72 34",stroke:"#0E101A",strokeWidth:"2",strokeLinecap:"round"}),s.createElement("defs",null,s.createElement("linearGradient",{id:"paint0_linear_2673_4830",x1:"5.5",y1:"30",x2:"26.9487",y2:"-4.25821",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{stopColor:"#15C39A"}),s.createElement("stop",{offset:"1",stopColor:"#BBD86D"}))));var lt=n(14213),dt=n(89020);function ct(e){return Ee.UI.Grid.make((({slots:t,notify:n})=>s.createElement(lt.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:n("overlayClose")},s.createElement(lt.u_,{...(0,Ne.Sh)(dt.modal,e)},s.createElement(Ve.Tertiary,{onClick:n("close"),name:"close-button",className:dt.closeButton,compact:!0},s.createElement(Ge.JO.Close,{width:13})),t.header,t.content))))}const ut=({className:e,children:t})=>s.createElement("h1",{...(0,Ne.Sh)(dt.title,e)},t),mt=({children:e})=>s.createElement("footer",{className:dt.footer},e),ht=({className:e,children:t})=>s.createElement(lt.u_.Body,{name:"modal-body",className:dt.body},s.createElement("main",{className:e},t));var pt,gt=n(60026);!function(e){const t=Ee.UI.Node.make((()=>s.createElement("header",{className:gt.header},s.createElement(rt,null),s.createElement(ut,{className:gt.title},Ye.optInTryItOutModal.title)))),n=Ee.UI.Node.make((({notify:e})=>s.createElement(s.Fragment,null,s.createElement(ht,null,Ye.optInTryItOutModal.body({onDataCollectionPolicyLinkClick:e("dataCollectionPolicyLink"),onPrivacyPolicyLinkClick:e("privacyPolicyLink"),onTermsOfServiceLinkClick:e("termsOfServiceLink")})),s.createElement(mt,null,s.createElement(Ve.Tertiary,{onClick:e("notNow"),name:"not-now-button",className:dt.button},Ye.optInTryItOutModal.notNowButton),s.createElement(Ve.Primary,{onClick:e("decline"),name:"decline-button",className:dt.button},Ye.optInTryItOutModal.declineButton),s.createElement(Ve.Primary,{onClick:e("continue"),name:"continue-button",className:dt.button},Ye.optInTryItOutModal.continueButton)))));e.UIPart=Ee.UI.Knot.make(ct(),{header:t,content:n}),e.createFlow=function(e){return Ee.Z.composeKnot({root:Ee.Z.fromSideEffect((t=>{switch(t){case"overlayClose":case"close":e.actions.next({kind:re.Kind.optInTryItOutModalResult,result:"dismiss",docId:e.docId});break;default:(0,ue.L0)(t)}}),w.of(null)),header:()=>w.of(null),content:Ee.Z.fromSideEffect((t=>{switch(t){case"notNow":e.actions.next({kind:re.Kind.optInTryItOutModalResult,result:"notNow",docId:e.docId});break;case"decline":e.actions.next({kind:re.Kind.optInTryItOutModalResult,result:"decline",docId:e.docId});break;case"continue":e.actions.next({kind:re.Kind.optInTryItOutModalResult,result:"continue",docId:e.docId});break;case"dataCollectionPolicyLink":e.actions.next({kind:re.Kind.dataCollectionPolicyLinkVisited,docId:e.docId});break;case"privacyPolicyLink":e.actions.next({kind:re.Kind.privacyPolicyLinkVisited,docId:e.docId});break;case"termsOfServiceLink":e.actions.next({kind:re.Kind.termsOfServiceLinkVisited,docId:e.docId});break;default:(0,ue.L0)(t)}}),w.of(null))})}}(pt||(pt={}));var ft,bt=n(16626);!function(e){const t=Ee.UI.Node.make((()=>s.createElement("header",{className:bt.header},s.createElement(ut,null,Ye.optInDismissModal.title)))),n=Ee.UI.Node.make((({notify:e})=>s.createElement("main",{className:bt.main},s.createElement(Ve.Primary,{name:"yes-button",onClick:e("yes"),className:bt.button},Ye.optInDismissModal.yesButton),s.createElement(Ve.Secondary,{name:"no-button",onClick:e("no"),className:bt.button},Ye.optInDismissModal.noButton))));e.UIPart=Ee.UI.Knot.make(ct(bt.modal),{header:t,content:n}),e.createFlow=function(e){return Ee.Z.composeKnot({root:Ee.Z.fromSideEffect((t=>{switch(t){case"overlayClose":case"close":e.actions.next({kind:re.Kind.optInDismissModalResult,result:"dismiss",docId:e.docId});break;default:(0,ue.L0)(t)}}),w.of(null)),header:()=>w.of(null),content:Ee.Z.fromSideEffect((t=>{switch(t){case"no":e.actions.next({kind:re.Kind.optInDismissModalResult,result:"showLaterNo",docId:e.docId});break;case"yes":e.actions.next({kind:re.Kind.optInDismissModalResult,result:"showLaterYes",docId:e.docId});break;default:(0,ue.L0)(t)}}),w.of(null))})}}(ft||(ft={}));var kt=n(8125),wt=n(98918);const It=()=>s.createElement("svg",{width:"90",height:"90",viewBox:"0 0 90 90",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.createElement("rect",{y:"36",width:"64",height:"45",rx:"8",fill:"#E7E9F5"}),s.createElement("rect",{x:"9",y:"27",width:"64",height:"45",rx:"8",fill:"#F9FAFF",stroke:"#0E101A",strokeMiterlimit:"10"}),s.createElement("mask",{id:"mask0_2714_10208",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"9",y:"27",width:"64",height:"45"},s.createElement("rect",{x:"9",y:"27",width:"64",height:"45",rx:"8",fill:"#F9FAFF"})),s.createElement("g",{mask:"url(#mask0_2714_10208)"},s.createElement("path",{d:"M11 70.5L31.5 49",stroke:"#0E101A",strokeMiterlimit:"10"}),s.createElement("path",{d:"M71.5 70.5L51 49",stroke:"#0E101A",strokeMiterlimit:"10"}),s.createElement("path",{d:"M10.6267 28.4512L37.4772 55.4777C39.4493 57.2532 42.4833 57.2532 44.3037 55.4777L71.1542 28.4512",stroke:"#0E101A",strokeMiterlimit:"10"})),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M88.9332 26.9666C88.9332 36.8888 80.8896 44.9332 70.9666 44.9332C61.0443 44.9332 53 36.8888 53 26.9666C53 17.0436 61.0443 9 70.9666 9C80.8896 9 88.9332 17.0436 88.9332 26.9666Z",fill:"#15C39A",stroke:"#0E101A"}),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M73.3148 30.8458C73.4211 31.434 73.9741 31.837 74.5717 31.837H76.4543L77.5456 31.6839C75.7997 34.2453 72.768 35.4241 69.4536 34.9039C66.7555 34.4805 64.4378 32.6549 63.4598 30.1052C61.2397 24.3176 65.4666 18.7917 70.9745 18.7917C73.8453 18.7917 76.3637 20.5157 77.8073 22.5452C78.1908 23.0975 78.9493 23.256 79.5024 22.8725C80.0273 22.5085 80.1804 21.8172 79.8648 21.2735C77.8682 18.1567 74.2804 16.1624 70.2457 16.4326C64.9924 16.7849 60.7414 21.0837 60.439 26.3401C60.0883 32.4565 64.9401 37.4504 70.9745 37.4504C74.1444 37.4504 76.9824 36.0701 78.9157 33.8368L78.6869 35.1179V36.2756C78.6869 36.8724 79.0892 37.4262 79.6774 37.5325C80.4499 37.6715 81.1217 37.0817 81.1217 36.3349V29.4014H74.5116C73.7648 29.4014 73.175 30.074 73.3148 30.8458Z",fill:"white"}),s.createElement("path",{d:"M82.2162 52.7185C82.5227 52.0465 83.4773 52.0465 83.7838 52.7185L85.0592 55.5145C85.1453 55.7033 85.2967 55.8547 85.4855 55.9408L88.2815 57.2162C88.9535 57.5227 88.9535 58.4773 88.2815 58.7838L85.4855 60.0592C85.2967 60.1453 85.1453 60.2967 85.0592 60.4855L83.7838 63.2815C83.4773 63.9535 82.5227 63.9535 82.2162 63.2815L80.9408 60.4855C80.8547 60.2967 80.7033 60.1453 80.5145 60.0592L77.7185 58.7838C77.0465 58.4773 77.0465 57.5227 77.7185 57.2162L80.5145 55.9408C80.7033 55.8547 80.8547 55.7033 80.9408 55.5145L82.2162 52.7185Z",fill:"#F8E485",stroke:"#0E101A"}),s.createElement("path",{d:"M42.5482 4.08671C42.9204 3.27071 44.0796 3.27071 44.4518 4.08672L46.0005 7.48188C46.105 7.71115 46.2888 7.89497 46.5181 7.99955L49.9133 9.54819C50.7293 9.92039 50.7293 11.0796 49.9133 11.4518L46.5181 13.0005C46.2888 13.105 46.105 13.2888 46.0005 13.5181L44.4518 16.9133C44.0796 17.7293 42.9204 17.7293 42.5482 16.9133L40.9995 13.5181C40.895 13.2888 40.7112 13.105 40.4819 13.0005L37.0867 11.4518C36.2707 11.0796 36.2707 9.92039 37.0867 9.54819L40.4819 7.99955C40.7112 7.89497 40.895 7.71115 40.9995 7.48188L42.5482 4.08671Z",fill:"#F8E485",stroke:"#0E101A"}));var yt;!function(e){const t=Ee.UI.Node.make((()=>s.createElement("header",{className:wt.header},s.createElement(It,null),s.createElement(ut,{className:wt.title},Ye.aboutRecapModal.title)))),n=Ee.UI.Node.make((({notify:e,view:t})=>s.createElement(s.Fragment,null,s.createElement(ht,null,Ye.aboutRecapModal.body({onLearMoreLinkClick:e("learnMoreLink")})),s.createElement(mt,null,s.createElement(xe.F.Fragment,null,t("canShowTour").pipe(u.U((0,kt.RN)(s.createElement(s.Fragment,null,s.createElement(Ve.Tertiary,{onClick:e("close"),name:"close-button",className:dt.button},Ye.aboutRecapModal.closeButton),s.createElement(Ve.Primary,{onClick:e("takeATour"),name:"take-a-tour-button",className:dt.button},Ye.aboutRecapModal.takeATourButton)),s.createElement(Ve.Primary,{onClick:e("close"),name:"close-button",className:dt.button},Ye.aboutRecapModal.closeButton)))))))));e.UIPart=Ee.UI.Knot.make(ct(),{header:t,content:n}),e.createFlow=function(e){return Ee.Z.composeKnot({root:Ee.Z.fromSideEffect((t=>{switch(t){case"overlayClose":case"close":e.actions.next({kind:re.Kind.aboutRecapModalResult,result:"dismiss",docId:e.docId});break;default:(0,ue.L0)(t)}}),w.of(null)),header:()=>w.of(null),content:Ee.Z.fromSideEffect((t=>{switch(t){case"close":e.actions.next({kind:re.Kind.aboutRecapModalResult,result:"dismiss",docId:e.docId});break;case"takeATour":e.actions.next({kind:re.Kind.aboutRecapModalResult,result:"takeATour",docId:e.docId});break;case"learnMoreLink":e.actions.next({kind:re.Kind.learnMoreLinkVisited,source:"aboutRecapModal",docId:e.docId});break;default:(0,ue.L0)(t)}}),e.canShowTour.pipe(u.U((e=>({canShowTour:e})))))})}}(yt||(yt={}));const _t=()=>s.createElement("svg",{width:"171",height:"24",viewBox:"0 0 171 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.2797 17.687C30.9014 17.543 30.6539 17.2394 30.6539 16.8345C30.6539 16.3435 31.0611 15.9392 31.5561 15.9392C31.7017 15.9392 31.8178 15.9679 31.9197 16.0112C32.5602 16.3002 33.2438 16.4735 34.0735 16.4735C35.5868 16.4735 36.2998 15.7514 36.2998 14.3641V13.9884C35.6446 14.7689 34.9321 15.2453 33.7535 15.2453C31.9344 15.2453 30.2898 13.9305 30.2898 11.6333V11.6046C30.2898 9.29276 31.9633 7.99258 33.7535 7.99258C34.961 7.99258 35.674 8.49815 36.2704 9.14824V9.13363C36.2704 8.54145 36.7653 8.0505 37.3764 8.0505C37.9875 8.0505 38.4819 8.54145 38.4819 9.14824V14.1329C38.4819 15.5202 38.1478 16.5314 37.4925 17.1815C36.7653 17.9041 35.6446 18.2218 34.1318 18.2218C33.0983 18.2218 32.1961 18.0486 31.2797 17.687ZM36.2998 11.6333V11.6046C36.2998 10.5496 35.4701 9.81293 34.3935 9.81293C33.3169 9.81293 32.5019 10.5496 32.5019 11.6046V11.6333C32.5019 12.7023 33.3169 13.4249 34.3935 13.4249C35.4701 13.4249 36.2998 12.6882 36.2998 11.6333Z",fill:"#0E101A"}),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.2797 17.687C30.9014 17.543 30.6539 17.2394 30.6539 16.8345C30.6539 16.3435 31.0611 15.9392 31.5561 15.9392C31.7017 15.9392 31.8178 15.9679 31.9197 16.0112C32.5602 16.3002 33.2438 16.4735 34.0735 16.4735C35.5868 16.4735 36.2998 15.7514 36.2998 14.3641V13.9884C35.6446 14.7689 34.9321 15.2453 33.7535 15.2453C31.9344 15.2453 30.2898 13.9305 30.2898 11.6333V11.6046C30.2898 9.29276 31.9633 7.99258 33.7535 7.99258C34.961 7.99258 35.674 8.49815 36.2704 9.14824V9.13363C36.2704 8.54145 36.7653 8.0505 37.3764 8.0505C37.9875 8.0505 38.4819 8.54145 38.4819 9.14824V14.1329C38.4819 15.5202 38.1478 16.5314 37.4925 17.1815C36.7653 17.9041 35.6446 18.2218 34.1318 18.2218C33.0983 18.2218 32.1961 18.0486 31.2797 17.687ZM36.2998 11.6333V11.6046C36.2998 10.5496 35.4701 9.81293 34.3935 9.81293C33.3169 9.81293 32.5019 10.5496 32.5019 11.6046V11.6333C32.5019 12.7023 33.3169 13.4249 34.3935 13.4249C35.4701 13.4249 36.2998 12.6882 36.2998 11.6333Z",fill:"#0E101A"}),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M39.7341 9.14824C39.7341 8.54145 40.2285 8.0505 40.8401 8.0505C41.4512 8.0505 41.9456 8.54145 41.9456 9.14824V9.49467C42.2662 8.74389 42.7895 8.0505 43.4447 8.0505C44.1288 8.0505 44.5213 8.49815 44.5213 9.11902C44.5213 9.6971 44.143 10.0441 43.6922 10.1453C42.5714 10.4056 41.9456 11.2576 41.9456 12.8181V14.8696C41.9456 15.4764 41.4512 15.9679 40.8401 15.9679C40.2285 15.9679 39.7341 15.4764 39.7341 14.8696V9.14824Z",fill:"#0E101A"}),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M44.2597 13.6561V13.6274C44.2597 11.9369 45.5544 11.1564 47.4029 11.1564C48.1884 11.1564 48.7559 11.2863 49.3092 11.4741V11.3442C49.3092 10.4343 48.7412 9.92824 47.6356 9.92824C47.0245 9.92824 46.5296 10.0154 46.1077 10.1453C45.9768 10.1886 45.8896 10.2032 45.7877 10.2032C45.2785 10.2032 44.8708 9.81293 44.8708 9.30684C44.8708 8.91711 45.1177 8.58476 45.4677 8.45432C46.166 8.1945 46.9226 8.0505 47.9556 8.0505C49.1631 8.0505 50.0364 8.36824 50.5891 8.91711C51.1713 9.49467 51.4335 10.3477 51.4335 11.3881V14.9129C51.4335 15.5056 50.9533 15.9679 50.3564 15.9679C49.7164 15.9679 49.2945 15.5202 49.2945 15.0575V15.0428C48.7559 15.6355 48.014 16.0253 46.9368 16.0253C45.4677 16.0253 44.2597 15.1879 44.2597 13.6561ZM49.3381 13.1505V12.7602C48.9597 12.587 48.4653 12.4712 47.9262 12.4712C46.9804 12.4712 46.3987 12.8468 46.3987 13.5408V13.5695C46.3987 14.1621 46.8937 14.5086 47.6062 14.5086C48.6398 14.5086 49.3381 13.9451 49.3381 13.1505Z",fill:"#0E101A"}),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M52.6126 9.14824C52.6126 8.54145 53.107 8.0505 53.7187 8.0505C54.3297 8.0505 54.8247 8.54145 54.8247 9.14824V9.23537C55.3333 8.58476 56.0033 7.99258 57.1235 7.99258C58.1418 7.99258 58.9132 8.44024 59.3204 9.22076C60.0045 8.42615 60.8195 7.99258 61.8814 7.99258C63.526 7.99258 64.5154 8.97502 64.5154 10.8392V14.8696C64.5154 15.4764 64.0204 15.9679 63.4094 15.9679C62.7983 15.9679 62.3033 15.4764 62.3033 14.8696V11.5613C62.3033 10.5209 61.8378 9.98615 61.0086 9.98615C60.1789 9.98615 59.6698 10.5209 59.6698 11.5613V14.8696C59.6698 15.4764 59.1754 15.9679 58.5637 15.9679C57.9527 15.9679 57.4577 15.4764 57.4577 14.8696V11.5613C57.4577 10.5209 56.9927 9.98615 56.163 9.98615C55.3333 9.98615 54.8247 10.5209 54.8247 11.5613V14.8696C54.8247 15.4764 54.3297 15.9679 53.7187 15.9679C53.107 15.9679 52.6126 15.4764 52.6126 14.8696V9.14824Z",fill:"#0E101A"}),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M65.7092 9.14824C65.7092 8.54145 66.2036 8.0505 66.8153 8.0505C67.4263 8.0505 67.9213 8.54145 67.9213 9.14824V9.23537C68.4299 8.58476 69.0999 7.99258 70.2201 7.99258C71.2384 7.99258 72.0098 8.44024 72.417 9.22076C73.1011 8.42615 73.9161 7.99258 74.978 7.99258C76.6226 7.99258 77.612 8.97502 77.612 10.8392V14.8696C77.612 15.4764 77.1176 15.9679 76.506 15.9679C75.8949 15.9679 75.3999 15.4764 75.3999 14.8696V11.5613C75.3999 10.5209 74.9344 9.98615 74.1052 9.98615C73.2756 9.98615 72.7664 10.5209 72.7664 11.5613V14.8696C72.7664 15.4764 72.272 15.9679 71.6603 15.9679C71.0493 15.9679 70.5548 15.4764 70.5548 14.8696V11.5613C70.5548 10.5209 70.0893 9.98615 69.2596 9.98615C68.4299 9.98615 67.9213 10.5209 67.9213 11.5613V14.8696C67.9213 15.4764 67.4263 15.9679 66.8153 15.9679C66.2036 15.9679 65.7092 15.4764 65.7092 14.8696V9.14824Z",fill:"#0E101A"}),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M78.3403 13.6561V13.6274C78.3403 11.9369 79.6355 11.1564 81.4829 11.1564C82.269 11.1564 82.8365 11.2863 83.3892 11.4741V11.3442C83.3892 10.4343 82.8223 9.92824 81.7157 9.92824C81.1046 9.92824 80.6102 10.0154 80.1882 10.1453C80.0574 10.1886 79.9702 10.2032 79.8682 10.2032C79.3586 10.2032 78.9514 9.81293 78.9514 9.30684C78.9514 8.91711 79.1988 8.58476 79.5477 8.45432C80.2466 8.1945 81.0032 8.0505 82.0362 8.0505C83.2442 8.0505 84.117 8.36824 84.6697 8.91711C85.2519 9.49467 85.5136 10.3477 85.5136 11.3881V14.9129C85.5136 15.5056 85.0339 15.9679 84.4375 15.9679C83.797 15.9679 83.375 15.5202 83.375 15.0575V15.0428C82.8365 15.6355 82.094 16.0253 81.0179 16.0253C79.5477 16.0253 78.3403 15.1879 78.3403 13.6561ZM83.4187 13.1505V12.7602C83.0403 12.587 82.5454 12.4712 82.0073 12.4712C81.061 12.4712 80.4793 12.8468 80.4793 13.5408V13.5695C80.4793 14.1621 80.9738 14.5086 81.6868 14.5086C82.7198 14.5086 83.4187 13.9451 83.4187 13.1505Z",fill:"#0E101A"}),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M86.6927 9.14824C86.6927 8.54145 87.1876 8.0505 87.7987 8.0505C88.4103 8.0505 88.9048 8.54145 88.9048 9.14824V9.49467C89.2248 8.74389 89.7486 8.0505 90.4039 8.0505C91.0875 8.0505 91.48 8.49815 91.48 9.11902C91.48 9.6971 91.1016 10.0441 90.6508 10.1453C89.5306 10.4056 88.9048 11.2576 88.9048 12.8181V14.8696C88.9048 15.4764 88.4103 15.9679 87.7987 15.9679C87.1876 15.9679 86.6927 15.4764 86.6927 14.8696V9.14824Z",fill:"#0E101A"}),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M92.1499 6.34493C92.1499 5.73815 92.6443 5.24719 93.2554 5.24719C93.867 5.24719 94.362 5.73815 94.362 6.34493V14.8696C94.362 15.4764 93.867 15.9679 93.2554 15.9679C92.6443 15.9679 92.1499 15.4764 92.1499 14.8696V6.34493Z",fill:"#0E101A"}),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M96.1227 18.034C95.8022 17.9187 95.4239 17.6583 95.4239 17.1241C95.4239 16.5893 95.8458 16.2277 96.2972 16.2277C96.4716 16.2277 96.5736 16.2569 96.6608 16.2856C96.85 16.3435 96.9666 16.3728 97.1269 16.3728C97.5194 16.3728 97.7085 16.3002 97.9124 15.91L97.9849 15.7368L95.3225 9.6105C95.2642 9.46597 95.2058 9.24945 95.2058 9.10493C95.2058 8.48354 95.6861 8.0505 96.2972 8.0505C96.85 8.0505 97.1699 8.35363 97.3591 8.87328L99.0473 13.3816L100.677 8.88789C100.852 8.42615 101.171 8.0505 101.739 8.0505C102.307 8.0505 102.786 8.48354 102.786 9.06163C102.786 9.23537 102.729 9.48058 102.685 9.5818L99.9637 16.0691C99.309 17.6437 98.6543 18.2364 97.3302 18.2364C96.8352 18.2364 96.4863 18.1644 96.1227 18.034Z",fill:"#0E101A"}),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.1008 11.9995C24.1008 18.6268 18.7061 24 12.0509 24C5.39464 24 0 18.6268 0 11.9995C0 5.37208 5.39464 0 12.0509 0C18.7061 0 24.1008 5.37208 24.1008 11.9995Z",fill:"white"}),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.1008 11.9995C24.1008 18.6268 18.7061 24 12.0509 24C5.39464 24 0 18.6268 0 11.9995C0 5.37208 5.39464 0 12.0509 0C18.7061 0 24.1008 5.37208 24.1008 11.9995ZM14.4285 13.6262C13.9271 13.6262 13.5312 14.0746 13.6247 14.5913C13.6965 14.9833 14.0674 15.253 14.4676 15.253H15.7304L16.4624 15.1501C15.2921 16.8614 13.2582 17.6488 11.0351 17.3011C9.22527 17.0185 7.67105 15.7989 7.01521 14.0963C5.52624 10.2308 8.36169 6.53964 12.0553 6.53964C13.9804 6.53964 15.6695 7.66172 16.6375 9.01665L16.6385 9.04698C16.8952 9.41523 17.4042 9.52137 17.7751 9.26576C18.1275 9.02207 18.2243 8.56067 18.0122 8.19784H18.0177C16.6788 6.11616 14.273 4.78289 11.5669 4.96376C8.04302 5.19987 5.19234 8.07112 4.98895 11.5814C4.75403 15.6668 8.00821 19.0016 12.0553 19.0016C14.1816 19.0016 16.0849 18.0799 17.3814 16.5885L17.228 17.4441V18.2174C17.228 18.616 17.4978 18.9853 17.8926 19.0568C18.4103 19.15 18.8617 18.7557 18.8617 18.2564V13.6262H14.4285Z",fill:"#15C39A"}));var Ct,vt=n(6237);!function(e){const t=Ee.UI.Node.make((()=>s.createElement("header",{className:vt.header},s.createElement(_t,null),s.createElement(ut,{className:vt.title},Ye.turnOffRecapModal.title)))),n=Ee.UI.Node.make((({view:e,notify:t})=>s.createElement(s.Fragment,null,s.createElement(ht,{className:vt.main},Ye.turnOffRecapModal.body()),s.createElement(mt,null,s.createElement(xe.F.Fragment,null,e("canHideRecap").pipe(u.U((0,kt.RN)(s.createElement(Ve.Secondary,{onClick:t("hideRecap"),name:"hide-recap-button",className:dt.button},Ye.turnOffRecapModal.hideRecapButton),null)))),s.createElement(Ve.Primary,{onClick:t("turnOffRecap"),name:"turn-off-recap-button",className:dt.button},Ye.turnOffRecapModal.turnOffRecapButton)))));e.UIPart=Ee.UI.Knot.make(ct(vt.modal),{header:t,content:n}),e.createFlow=function(e){return Ee.Z.composeKnot({root:Ee.Z.fromSideEffect((t=>{switch(t){case"overlayClose":case"close":e.actions.next({kind:re.Kind.turnOffRecapModalResult,result:"dismiss",docId:e.docId});break;default:(0,ue.L0)(t)}}),w.of(null)),header:()=>w.of(null),content:Ee.Z.fromSideEffect((t=>{switch(t){case"hideRecap":e.actions.next({kind:re.Kind.turnOffRecapModalResult,result:"hideRecap",docId:e.docId});break;case"turnOffRecap":e.actions.next({kind:re.Kind.turnOffRecapModalResult,result:"turnOffRecap",docId:e.docId});break;default:(0,ue.L0)(t)}}),e.state)})}}(Ct||(Ct={}));var Et,Mt=n(57053),Ut=n(82144);!function(e){e.UIPart=Ee.UI.Node.make((({view:e,notify:t})=>s.createElement("section",null,s.createElement(Mt.i,{maxRating:Ye.genericFeedbackModal.ratings.length,ratingLabels:Ye.genericFeedbackModal.ratings,className:Ut.ratingContainer,ratingStarsClassName:Ut.ratingStars,ratingLegendClassName:Ut.ratingLegend,ratingLabelsClassName:Ut.ratingLabels,onChange:e=>t({kind:"rating",score:e,label:Ye.genericFeedbackModal.ratings[e-1]||""})(),ariaLabel:Ye.genericFeedbackModal.title}),s.createElement(xe.F.Fragment,null,e("showRequiredError").pipe(u.U((0,kt.RN)(s.createElement("span",{className:Ut.requiredLabel},Ye.genericFeedbackModal.requiredLabel),null))))))),e.createFlow=function(e){return Ee.Z.fromSideEffect((t=>{if("rating"===t.kind)e.set({rating:me.some({score:t.score,label:t.label}),showRequiredError:!1});else(0,ue.L0)(t.kind)}),e.pipe(u.U(ae.H6("showRequiredError"))))}}(Et||(Et={}));var St,Nt=n(13853),xt=n(97002);!function(e){let t;!function(e){e.eq=S.yv}(t||(t={})),e.getUIPart=e=>Ee.UI.Node.make((({state:n,notify:i})=>s.createElement("section",null,e.textBoxHeader?s.createElement("label",{htmlFor:"feedback-textbox",className:xt.textBoxHeader},e.textBoxHeader):null,s.createElement(xe.F.div,{name:"feedback-textbox",role:"textbox",...(0,Ne.Sh)(xt.textbox,n.pipe(u.U((0,o.ls)(Nt.t9(t.eq)("required"),(0,kt.RN)(xt.required,void 0))))),contentEditable:!0,"aria-placeholder":e.textBoxPlaceholder,"data-placeholder":e.textBoxPlaceholder,"aria-label":e.textBoxAriaLabel,onInput:e=>i({kind:"textChange",text:e.target instanceof HTMLElement?e.target.innerText:""})()}),s.createElement(xe.F.Fragment,null,n.pipe(u.U((0,o.ls)(Nt.t9(t.eq)("required"),(0,kt.RN)(s.createElement("span",{className:xt.requiredLabel},e.requiredLabel),null)))))))),e.createFlow=function(e){return Ee.Z.fromSideEffect((n=>{if("textChange"===n.kind)e.modify((e=>({text:n.text,errors:(0,o.zG)(e.errors,Nt.Od(t.eq)("required"))})));else(0,ue.L0)(n.kind)}),e.pipe(u.U(ae.ei("errors"))))}}(St||(St={}));var Pt,Ft=n(47922);!function(e){const t=Ee.UI.Node.make((()=>s.createElement("header",{className:Ft.header},s.createElement(_t,null),s.createElement(ut,{className:Ft.title},Ye.genericFeedbackModal.title)))),n=Ee.UI.Grid.make((({slots:e,notify:t})=>s.createElement(s.Fragment,null,s.createElement(ht,{className:Ft.body},e.rating,e.textBox),s.createElement(mt,null,s.createElement(Ve.Tertiary,{name:"cancel-button",className:dt.button,onClick:t("cancel")},Ye.genericFeedbackModal.cancel),s.createElement(Ve.Primary,{name:"submit-button",className:dt.button,onClick:t("submit")},Ye.genericFeedbackModal.sendFeedback))))),i=Ee.UI.Knot.make(n,{rating:Et.UIPart,textBox:St.getUIPart(Ye.genericFeedbackModal)});e.UIPart=Ee.UI.Knot.make(ct(Ft.modal),{header:t,content:i}),e.createFlow=function(e){const t=Y.h.create({text:"",errors:new Set}),n=Y.h.create({rating:me.none,showRequiredError:!1});return Ee.Z.composeKnot({root:Ee.Z.fromSideEffect((t=>{switch(t){case"overlayClose":case"close":e.actions.next({kind:re.Kind.genericFeedbackModalResult,result:{kind:"dismiss"},docId:e.docId});break;default:(0,ue.L0)(t)}}),w.of(null)),header:()=>w.of(null),content:Ee.Z.composeKnot({root:Ee.Z.fromSideEffect((i=>{switch(i){case"cancel":e.actions.next({kind:re.Kind.genericFeedbackModalResult,result:{kind:"dismiss"},docId:e.docId});break;case"submit":""===t.get().text.trim()&&t.lens("errors").set(new Set(["required"])),me.isNone(n.get().rating)&&n.lens("showRequiredError").set(!0),(0,o.zG)(n.get().rating,me.filter((()=>0===t.get().errors.size)),ce.bw((n=>{e.actions.next({kind:re.Kind.genericFeedbackModalResult,result:{kind:"submit",feedbackText:t.get().text,rating:n},docId:e.docId})})));break;default:(0,ue.L0)(i)}}),w.of(null)),rating:Et.createFlow(n),textBox:St.createFlow(t)})})}}(Pt||(Pt={}));var Kt,Rt,Lt,Bt,At,Tt,Ot,Gt,zt,Ht,Vt=n(82695);!function(e){const t=Ee.UI.Node.make((()=>s.createElement("header",{className:Vt.header},s.createElement(_t,null),s.createElement(ut,{className:Vt.title},Ye.itemFeedbackModal.title)))),n=Ee.UI.Grid.make((({slots:e,notify:t})=>s.createElement(s.Fragment,null,s.createElement(ht,{className:Vt.body},s.createElement("p",{className:Vt.description},Ye.itemFeedbackModal.description),e.textBox),s.createElement(mt,null,s.createElement(Ve.Tertiary,{name:"skip-button",className:dt.button,onClick:t("skip")},Ye.itemFeedbackModal.skip),s.createElement(Ve.Primary,{name:"submit-button",className:dt.button,onClick:t("submit")},Ye.itemFeedbackModal.sendFeedback))))),i=Ee.UI.Knot.make(n,{textBox:St.getUIPart(Ye.itemFeedbackModal)});e.UIPart=Ee.UI.Knot.make(ct(Vt.modal),{header:t,content:i}),e.createFlow=function(e,t){const n=Y.h.create({text:"",errors:new Set});return Ee.Z.composeKnot({root:Ee.Z.fromSideEffect((n=>{switch(n){case"overlayClose":case"close":e.actions.next({kind:re.Kind.itemFeedbackModalResult,result:{kind:"dismiss"},itemFeedback:t,docId:e.docId});break;default:(0,ue.L0)(n)}}),w.of(null)),header:()=>w.of(null),content:Ee.Z.composeKnot({root:Ee.Z.fromSideEffect((i=>{switch(i){case"skip":e.actions.next({kind:re.Kind.itemFeedbackModalResult,result:{kind:"dismiss"},itemFeedback:t,docId:e.docId});break;case"submit":""===n.get().text.trim()&&n.lens("errors").set(new Set(["required"])),0===n.get().errors.size&&e.actions.next({kind:re.Kind.itemFeedbackModalResult,result:{kind:"submit",feedbackText:n.get().text},itemFeedback:t,docId:e.docId});break;default:(0,ue.L0)(i)}}),w.of(null)),textBox:St.createFlow(n)})})}}(Kt||(Kt={})),function(e){e.Impl=class{constructor(e,t,n,i){this.docId=e,this.actions=t,this._subscriptions=new D.w,this._subscriptions.add(this.actions.pipe(E.h(i)).subscribe((()=>n.onClose())))}dispose(){this._subscriptions.unsubscribe()}};e.Mock=class{constructor(){this.actions=new $e.xQ,this.docId=P.eo.create("doc-id"),this.dispose=o.Q1}}}(Rt||(Rt={})),function(e){class t extends Rt.Impl{constructor(e,t,n,i){super(e,t,n,re.is(re.Kind.aboutRecapModalResult)),this.canShowTour=i}}e.Impl=t;class n extends Rt.Mock{constructor(){super(...arguments),this.canShowTour=Y.h.create(!0)}}e.Mock=n}(Lt||(Lt={})),function(e){class t extends Rt.Impl{constructor(e,t,n){super(e,t,n,re.is(re.Kind.genericFeedbackModalResult))}}e.Impl=t;class n extends Rt.Mock{}e.Mock=n}(Bt||(Bt={})),function(e){class t extends Rt.Impl{constructor(e,t,n){super(e,t,n,re.is(re.Kind.itemFeedbackModalResult))}}e.Impl=t;class n extends Rt.Mock{}e.Mock=n}(At||(At={})),function(e){class t extends Rt.Impl{constructor(e,t,n){super(e,t,n,re.is(re.Kind.optInDismissModalResult))}}e.Impl=t;class n extends Rt.Mock{}e.Mock=n}(Tt||(Tt={})),function(e){class t extends Rt.Impl{constructor(e,t,n){super(e,t,n,re.is(re.Kind.optInTryItOutModalResult))}}e.Impl=t;class n extends Rt.Mock{}e.Mock=n}(Ot||(Ot={})),function(e){class t extends Rt.Impl{constructor(e,t,n,i,a){super(e,t,n,re.is(re.Kind.turnOffRecapModalResult)),this._docsStateManager=i,this._itemsManager=a,this.state=Y.h.combine(this._docsStateManager.state,this._itemsManager.followUps,this._itemsManager.keyPoints,(({thread:e,docs:t},n,i)=>({canHideRecap:Array.from(t.entries()).some((([t,a])=>(0,o.zG)(ve(e,a,!!n.get(t)||!!i.get(t)),ce.FX(!1))))})))}}e.Impl=t;class n extends Rt.Mock{constructor(){super(...arguments),this.state=Y.h.create({canHideRecap:!0})}}e.Mock=n}(Gt||(Gt={})),function(e){e.optInTryItOut="optInTryItOut",e.optInDismiss="optInDismiss",e.aboutRecap="aboutRecap",e.turnOffRecap="turnOffRecap",e.genericFeedback="genericFeedback",e.itemFeedback="itemFeedback"}(zt||(zt={})),function(e){e.Impl=class{constructor(e,t,n,i){this._actions=e,this._docsStateManager=t,this._itemsManager=n,this._onboardingManager=i,this._subscriptions=new D.w,this._state=Y.h.create(me.none),this.state=this._state.view(),this._modalOperations={onClose:()=>this._hide()},this._subscriptions.add(this._handleOptInTryItOut()),this._subscriptions.add(this._handleOptInDismiss()),this._subscriptions.add(this._handleRequestAboutRecap()),this._subscriptions.add(this._handleTurnOffRecap()),this._subscriptions.add(this._handleGenericFeedback()),this._subscriptions.add(this._handleItemFeedback())}dispose(){this._hide(),this._subscriptions.unsubscribe()}_show(e){this._state.modify((0,o.ls)(ce.bw((e=>e.instance.dispose())),(()=>me.some(this._load(e)))))}_hide(){this._state.modify((0,o.ls)(ce.bw((e=>e.instance.dispose())),(()=>me.none)))}_load(e){switch(e.kind){case zt.optInTryItOut:return this._loadOptInTryItOut(e);case zt.optInDismiss:return this._loadOptInDismiss(e);case zt.aboutRecap:return this._loadAboutRecap(e);case zt.turnOffRecap:return this._loadTurnOffRecap(e);case zt.genericFeedback:return this._loadGenericFeedback(e);case zt.itemFeedback:return this._loadItemFeedback(e);default:(0,ue.L0)(e)}}_loadOptInTryItOut(e){const t=new Ot.Impl(e.docId,this._actions,this._modalOperations);return{instance:{kind:zt.optInTryItOut,dispose:()=>t.dispose()},component:Ee.UI.mount(pt.UIPart,pt.createFlow(t))}}_loadOptInDismiss(e){const t=new Tt.Impl(e.docId,this._actions,this._modalOperations);return{instance:{kind:zt.optInDismiss,dispose:()=>t.dispose()},component:Ee.UI.mount(ft.UIPart,ft.createFlow(t))}}_loadAboutRecap(e){const t=new Lt.Impl(e.docId,this._actions,this._modalOperations,this._onboardingManager.availableFor(Y.h.create(me.some(e.docId))));return{instance:{kind:zt.aboutRecap,dispose:()=>t.dispose()},component:Ee.UI.mount(yt.UIPart,yt.createFlow(t))}}_loadTurnOffRecap(e){const t=new Gt.Impl(e.docId,this._actions,this._modalOperations,this._docsStateManager,this._itemsManager);return{instance:{kind:zt.turnOffRecap,dispose:()=>t.dispose()},component:Ee.UI.mount(Ct.UIPart,Ct.createFlow(t))}}_loadGenericFeedback(e){const t=new Bt.Impl(e.docId,this._actions,this._modalOperations);return{instance:{kind:zt.genericFeedback,dispose:()=>t.dispose()},component:Ee.UI.mount(Pt.UIPart,Pt.createFlow(t))}}_loadItemFeedback(e){const t=new At.Impl(e.docId,this._actions,this._modalOperations);return{instance:{kind:zt.itemFeedback,dispose:()=>t.dispose()},component:Ee.UI.mount(Kt.UIPart,Kt.createFlow(t,e.feedbackData))}}_handleOptInTryItOut(){return this._actions.pipe(le.ofKind(re.Kind.optInTryItOutModal)).subscribe((({docId:e})=>this._show({kind:zt.optInTryItOut,docId:e})))}_handleOptInDismiss(){return this._actions.pipe(le.ofKind(re.Kind.optInDismissModal)).subscribe((({docId:e})=>this._show({kind:zt.optInDismiss,docId:e})))}_handleRequestAboutRecap(){return this._actions.pipe(le.ofKind(re.Kind.aboutRecapModal)).subscribe((({docId:e})=>this._show({kind:zt.aboutRecap,docId:e})))}_handleTurnOffRecap(){return this._actions.pipe(le.ofKind(re.Kind.turnOffRecapModal)).subscribe((({docId:e})=>this._show({kind:zt.turnOffRecap,docId:e})))}_handleGenericFeedback(){return this._actions.pipe(le.ofKind(re.Kind.genericFeedbackModal)).subscribe((({docId:e})=>this._show({kind:zt.genericFeedback,docId:e})))}_handleItemFeedback(){return this._actions.pipe(le.ofKind(re.Kind.itemFeedback)).subscribe((e=>this._show({kind:zt.itemFeedback,docId:e.docId,feedbackData:ae.CE(e,"kind")})))}}}(Ht||(Ht={}));var Dt,Zt,Yt,qt,jt=n(77843);!function(e){let t,n,i,o;!function(e){let t;!function(e){e.textCopiedSuccess="textCopiedSuccess",e.feedbackSubmittedSuccess="feedbackSubmittedSuccess",e.undoRemoveItem="undoRemoveItem"}(t=e.Kind||(e.Kind={}))}(t=e.Toast||(e.Toast={})),function(e){let t;!function(e){e.optInDismissShowLaterYes="optInDismissShowLaterYes",e.optInDismissShowLaterNo="optInDismissShowLaterNo",e.turnOffRecap="turnOffRecap"}(t=e.Kind||(e.Kind={}))}(n=e.Lasting||(e.Lasting={})),function(e){e.isToast=function(e){return e.kind in t.Kind},e.isLasting=function(e){return e.kind in n.Kind}}(i=e.Request||(e.Request={})),(0,ue.L0)(void 0),function(e){e.is=function(e){return t=>t.kind===e}}(o=e.Model||(e.Model={})),e.create=function(e,i){const o={id:H.iy.create(),dismissTimestamp:Date.now()+i};switch(e.kind){case t.Kind.undoRemoveItem:return{...e,...o,undoRemoveDone:!1};case t.Kind.feedbackSubmittedSuccess:case t.Kind.textCopiedSuccess:case n.Kind.optInDismissShowLaterNo:case n.Kind.optInDismissShowLaterYes:case n.Kind.turnOffRecap:return{...e,...o};default:(0,ue.L0)(e)}}}(Dt||(Dt={})),function(e){e.Impl=class{constructor(e,t,n,i){this.actions=e,this._notificationRequestRefinement=t,this._notificationDurationMs=n,this._maxNotificationsCountAtOnce=i,this._subscriptions=new D.w,this._state=Y.h.create([]),this.state=this._state.view(),this._subscriptions.add(this._autoDismissNotifications()),this._subscriptions.add(this._handleShowNotifications()),this._subscriptions.add(this._handleDismissNotifications())}_autoDismissNotifications(){return jt.F(1e3).pipe(h.M(this._state),M.b((()=>this._state.modify(ne.hX((e=>Date.now()<e.dismissTimestamp)))))).subscribe()}_handleShowNotifications(){return this.actions.pipe(le.ofKind(re.Kind.showNotification),u.U(ae.ei("notification")),E.h(this._notificationRequestRefinement),M.b((e=>this._state.modify((0,o.ls)(ne.QI(Dt.create(e,this._notificationDurationMs)),ne.ke(this._maxNotificationsCountAtOnce)))))).subscribe()}_handleDismissNotifications(){return this.actions.pipe(le.ofKind(re.Kind.dismissNotification),M.b((({notificationId:e})=>this._state.modify(ne.hX((t=>t.id!==e)))))).subscribe()}dispose(){this._subscriptions.unsubscribe()}}}(Zt||(Zt={})),function(e){class t extends Zt.Impl{constructor(e){super(e,Dt.Request.isLasting,8e3,1)}}e.Impl=t}(Yt||(Yt={})),function(e){class t extends Zt.Impl{constructor(e){super(e,Dt.Request.isToast,6e3,3),this._subscriptions.add(this._handleItemRemovalUndone())}_handleItemRemovalUndone(){return this.actions.pipe(le.ofKind(re.Kind.undoRemoveItem),M.b((({notificationId:e})=>this._state.modify(ne.UI((t=>t.id===e&&t.kind===Dt.Toast.Kind.undoRemoveItem?{...t,undoRemoveDone:!0}:t)))))).subscribe()}}e.Impl=t}(qt||(qt={}));var Qt,Wt,Jt=n(16118);!function(e){let t,n,i,s;!function(e){e.fold=function(e){return t=>{switch(t){case"followUps":return e.followUps();case"keyPoints":return e.keyPoints();case"all":return e.all();default:(0,ue.L0)(t)}}}}(t=e.MoreDataPopupKind||(e.MoreDataPopupKind={})),function(e){e.eq=S.yv,e.isMoreDataPopupKind=function(e){return"followUps"===e||"keyPoints"===e||"all"===e},e.isFollowUpsOrKeyPoints=function(e){return"followUps"===e||"keyPoints"===e}}(n=e.PopupKind||(e.PopupKind={})),function(e){e.none="none",e.optInIndeterminate="optInIndeterminate",e.optIn="optIn",e.indeterminate="indeterminate",e.compact="compact",e.expanded="expanded"}(i=e.Kind||(e.Kind={})),function(e){e.is=function(e){return t=>t===e}}(i=e.Kind||(e.Kind={})),function(e){e.empty=function(e,t){return{docId:e,browser:t,popupKind:me.none,itemMenuVisibleFor:me.none}}}(s=e.InternalState||(e.InternalState={}));e.ViewModelImpl=class{constructor(e,t,n,r,l,d,c,u){this.actions=e,this._docId=t,this._browser=n,this._itemsManager=r,this._docsStateManager=l,this._optInStatus=d,this._isLastMessage=c,this._onboardingAvailable=u,this._subscriptions=new D.w,this._state=Y.h.create(s.empty(this._docId,this._browser)),this._disposed=Y.h.create(!1),this.disposed=this._disposed.view(),this.state=Y.h.combine(this._state,this._optInStatus,Y.h.combine(this._isLastMessage,this._onboardingAvailable,((e,t)=>({isLastMessage:e,onboardingAvailable:t}))),this._docsStateManager.state.view((({thread:e,docs:t})=>({threadState:e,docState:me.fromNullable(t.get(this._docId))}))),this._itemsManager.followUps.view(a.P5(P.eo.eq)(this._docId)),this._itemsManager.keyPoints.view(a.P5(P.eo.eq)(this._docId)),this._itemsManager.highlights.view(a.fP(P.eo.eq)(this._docId)),((e,t,{isLastMessage:n,onboardingAvailable:a},{threadState:s,docState:r},l,d,c)=>({...e,isLastMessage:n,onboardingAvailable:a,followUps:l,keyPoints:d,highlightsSwitchState:(0,o.zG)(r,me.chain((e=>Ce(s,e,me.isSome(l),me.isSome(d),c)))),kind:(0,o.zG)(t,be.t.fold({indeterminate:()=>n?i.optInIndeterminate:i.none,notOptedInYet:()=>n?i.optIn:i.none,optedIn:()=>(0,o.zG)(r,me.chain((e=>ve(s,e,me.isSome(l)||me.isSome(d)))),me.map((e=>e?i.compact:i.expanded)),me.getOrElse((()=>i.indeterminate))),optedOut:()=>i.none})),showLowQualityContent:(0,o.zG)(r,me.fold(o.jv,ae.ei("showLowQualityContentRequested"))),lowQualityInfo:(0,o.zG)(r,me.chain(ae.ei("lowQualityInfo"))),goodForAnnotations:(0,o.zG)(r,me.chain(ae.ei("goodForAnnotations"))),checkingState:(0,o.zG)(r,me.fold((()=>"initial"),ae.ei("checkingState")))}))),this._subscriptions.add(this._handleSetRecapBarPopup()),this._subscriptions.add(this._handleItemMenuVisibleFor()),this._subscriptions.add(this._handleToggleItemFeedbackMenu()),this._subscriptions.add(this._handleItemMenuActionClick()),this._subscriptions.add(this._handleReply()),this._subscriptions.add(this._handleReplyToItem()),this._subscriptions.add(this._resetPopupKindOnLastItemRemoved()),this._subscriptions.add(this._dispatchOnboardingAnchorUnmountedOnBarCollapse()),this._subscriptions.add(this._dispatchOnboardingAnchorUnmountedOnPopupClosed())}dispose(){this._disposed.set(!0),this._subscriptions.unsubscribe()}_handleSetRecapBarPopup(){return this.actions.pipe(le.ofKind(re.Kind.setRecapBarPopup),u.U((e=>(0,o.zG)(e.docId===this._docId?me.some(e):me.none,me.chain((e=>e.popupKind))))),M.b((e=>this._state.modify((t=>({...t,popupKind:e,itemMenuVisibleFor:me.none})))))).subscribe()}_handleItemMenuVisibleFor(){return this.actions.pipe(le.ofKind(re.Kind.setItemMenuVisibleFor),u.U((({item:e,docId:t,uiMode:n})=>(0,o.zG)(e,me.filter((()=>t===this._docId&&"recapBar"===n))))),M.b((e=>this._state.lens("itemMenuVisibleFor").set((0,o.zG)(e,me.map((e=>({id:e.id,kind:e.kind,feedbackMenuActive:!1})))))))).subscribe()}_handleToggleItemFeedbackMenu(){return this.actions.pipe(le.ofKind(re.Kind.toggleItemFeedbackMenu),le.ofDocId(this._docId),le.ofUIMode("recapBar"),M.b((({menuOpen:e})=>this._state.lens("itemMenuVisibleFor").modify(me.map((t=>({...t,feedbackMenuActive:e}))))))).subscribe()}_handleItemMenuActionClick(){return this.actions.pipe(E.h((0,kt.Kg)(re.is(re.Kind.copyItem),re.is(re.Kind.replyToItem),re.is(re.Kind.removeItem),re.is(re.Kind.itemFeedback),re.is(re.Kind.setItemChecked))),le.ofDocId(this._docId),le.ofUIMode("recapBar"),M.b((()=>this._state.lens("itemMenuVisibleFor").set(me.none)))).subscribe()}_handleReply(){return this.actions.pipe(le.ofKind(re.Kind.reply),le.ofDocId(this._docId),M.b((()=>this._state.lens("popupKind").set(me.none)))).subscribe()}_handleReplyToItem(){return this.actions.pipe(le.ofKind(re.Kind.replyToItem),le.ofDocId(this._docId),le.ofUIMode("recapBar"),M.b((()=>this._state.lens("popupKind").set(me.none)))).subscribe()}_resetPopupKindOnLastItemRemoved(){this.state.pipe(E.h((e=>(0,o.zG)(e.popupKind,ce.FX("followUps"))&&me.isNone(e.followUps)||(0,o.zG)(e.popupKind,ce.FX("keyPoints"))&&me.isNone(e.keyPoints)||(0,o.zG)(e.popupKind,ce.FX("all"))&&me.isNone(e.keyPoints)&&me.isNone(e.followUps))),M.b((()=>this._state.lens("popupKind").set(me.none)))).subscribe()}_dispatchOnboardingAnchorUnmountedOnBarCollapse(){return this.state.view("kind").pipe(E.h((e=>e!==i.expanded)),M.b((()=>{this.actions.next({kind:re.Kind.onboardingAnchorUnmounted,stepNames:["recapBar","recapBarMenu","followUps","draftReply","keyPoints"],docId:this._docId})}))).subscribe()}_dispatchOnboardingAnchorUnmountedOnPopupClosed(){return this.state.view("popupKind").pipe(k.O(me.none),Jt.G(),M.b((([e,t])=>{if(me.isNone(t)&&me.isSome(e))switch(e.value){case"settingsMenu":this.actions.next({kind:re.Kind.onboardingAnchorUnmounted,stepNames:["recapBarMenu"],docId:this._docId});break;case"followUps":this.actions.next({kind:re.Kind.onboardingAnchorUnmounted,stepNames:["followUps","draftReply"],docId:this._docId});break;case"keyPoints":this.actions.next({kind:re.Kind.onboardingAnchorUnmounted,stepNames:["keyPoints"],docId:this._docId})}}))).subscribe()}}}(Qt||(Qt={})),function(e){let t,n;!function(e){e.hidden="hidden",e.compact="compact",e.full="full"}(t=e.Mode||(e.Mode={})),function(e){e.empty=function(e){return{docId:e,kind:t.hidden,expanded:!1,itemMenuVisibleFor:me.none,hasOverflow:!1}}}(n=e.InternalState||(e.InternalState={}));e.ViewModelImpl=class{constructor(e,i,o,a){this.actions=e,this._docId=i,this._itemsManager=o,this._onboardingAvailable=a,this._subscriptions=new D.w,this._state=Y.h.create(n.empty(this._docId)),this._disposed=Y.h.create(!1),this.disposed=this._disposed.view(),this.state=Y.h.combine(this._state,this._onboardingAvailable,this._itemsManager.followUps.view((e=>me.fromNullable(e.get(this._docId)))),this._itemsManager.keyPoints.view((e=>me.fromNullable(e.get(this._docId)))),((e,n,i,o)=>({...e,onboardingAvailable:n,followUps:i,keyPoints:o,kind:me.isSome(i)||me.isSome(o)?e.kind===t.hidden?t.compact:e.kind:t.hidden}))),this._subscriptions.add(this._handleToggleReplyPanelMode()),this._subscriptions.add(this._handleToggleReplyPanelExpanded()),this._subscriptions.add(this._handleItemMenuVisibleFor()),this._subscriptions.add(this._handleToggleItemFeedbackMenu()),this._subscriptions.add(this._handleItemMenuActionClick()),this._subscriptions.add(this._handlePanelOverflow()),this._subscriptions.add(this._collapseOnLastItemRemoved()),this._subscriptions.add(this._dispatchOnboardingAnchorUnmountedOnCollapse())}dispose(){this._disposed.set(!0),this._subscriptions.unsubscribe()}_handlePanelOverflow(){return this.actions.pipe(le.ofKind(re.Kind.panelOverflow),le.ofDocId(this._docId),E.h((({source:e})=>"replyPanel"===e)),M.b((({hasOverflow:e})=>this._state.lens("hasOverflow").set(e)))).subscribe()}_handleToggleReplyPanelMode(){return this.actions.pipe(le.ofKind(re.Kind.toggleReplyPanelMode),le.ofDocId(this._docId),M.b((({mode:e})=>this._state.lens("kind").set(e)))).subscribe()}_handleToggleReplyPanelExpanded(){return this.actions.pipe(le.ofKind(re.Kind.toggleReplyPanelExpanded),le.ofDocId(this._docId),M.b((({expanded:e})=>this._state.lens("expanded").set(e)))).subscribe()}_handleItemMenuVisibleFor(){return this.actions.pipe(le.ofKind(re.Kind.setItemMenuVisibleFor),u.U((({item:e,docId:t,uiMode:n})=>(0,o.zG)(e,me.filter((()=>t===this._docId&&"replyPanel"===n))))),M.b((e=>this._state.lens("itemMenuVisibleFor").set((0,o.zG)(e,me.map((e=>({id:e.id,kind:e.kind,feedbackMenuActive:!1})))))))).subscribe()}_handleToggleItemFeedbackMenu(){return this.actions.pipe(le.ofKind(re.Kind.toggleItemFeedbackMenu),le.ofDocId(this._docId),le.ofUIMode("replyPanel"),M.b((({menuOpen:e})=>this._state.lens("itemMenuVisibleFor").modify(me.map((t=>({...t,feedbackMenuActive:e}))))))).subscribe()}_handleItemMenuActionClick(){return this.actions.pipe(E.h((0,kt.Kg)(re.is(re.Kind.copyItem),re.is(re.Kind.replyToItem),re.is(re.Kind.removeItem),re.is(re.Kind.itemFeedback),re.is(re.Kind.setItemChecked))),le.ofDocId(this._docId),le.ofUIMode("replyPanel"),M.b((()=>this._state.lens("itemMenuVisibleFor").set(me.none)))).subscribe()}_collapseOnLastItemRemoved(){Y.h.combine(this._state.view("kind"),this.state.view((e=>me.isNone(e.followUps)&&me.isNone(e.keyPoints))),((e,t)=>({kind:e,isEmpty:t}))).pipe(E.h((e=>e.kind===t.full&&e.isEmpty)),M.b((()=>this._state.modify((e=>({...e,kind:t.compact,expanded:!1})))))).subscribe()}_dispatchOnboardingAnchorUnmountedOnCollapse(){return this.state.view("kind").pipe(E.h((e=>e!==t.full)),M.b((()=>{this.actions.next({kind:re.Kind.onboardingAnchorUnmounted,stepNames:["checkItem","itemMenu"],docId:this._docId})}))).subscribe()}}}(Wt||(Wt={}));var Xt=n(22667),$t=n(86705),en=n(65223),tn=n(98499);const nn=({onChange:e,labelId:t,className:n,switchClassName:i,labelClassName:a,checked:r,children:l,disabled:d,dataGrammarlyPart:c="ui-kit-switch",tabIndex:u=0,labelPlacement:m="before"})=>{const[h,p]=s.useState(null!=r&&r);s.useEffect((()=>{p(Boolean(r))}),[r]);const g=t=>{t.preventDefault(),t.stopPropagation(),p(!h),null==e||e(!h)};return s.createElement("div",{"data-grammarly-part":c,...(0,Ne.Sh)(tn.switchContainer,n,"after"===m?tn.switchContainerCompact:null)},s.createElement("div",{...(0,Ne.Sh)(tn.switch,i,h?tn.switchChecked:null,d?tn.switchDisabled:null,"before"===m?tn.switchAfter:null),role:"checkbox","aria-checked":h,tabIndex:u,"aria-labelledby":t,onKeyDown:e=>{d||" "!==e.key||g(e)},onClick:d?o.Q1:g},h?"ON":"OFF"),s.createElement("label",{id:t,onClick:d?o.Q1:g,className:a},l))};var on,an=n(11474);!function(e){e.UIPart=Ee.UI.Node.make((({state:e,notify:t})=>s.createElement(xe.F.Fragment,null,e.pipe(u.U((({checked:e})=>s.createElement(nn,{key:"inline-highlights-switch",labelId:"inline-highlights-switch-label",labelPlacement:"before",labelClassName:an.label,className:an.switch,checked:e,onChange:e=>{t({kind:"toggleInlineHighlights",enabled:e})()}},Ye.recapBar.highlightsSwitch.label))))))),e.createFlow=function(e){return Ee.Z.fromSideEffect((t=>{e.actions.next({kind:re.Kind.toggleInlineHighlights,enabled:t.enabled,docId:e.state.get().docId})}),e.state.view(ae.ei("highlightsSwitchState")).pipe(ze.oA,u.U((e=>({checked:e})))))}}(on||(on={}));var sn=n(42050);const rn=({className:e,size:t=22})=>s.createElement("svg",{width:t,height:t,...(0,Ne.Sh)(e,sn.logoIconSpinning),viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.createElement("circle",{cx:"12",cy:"12",r:"12",fill:He.Z.green50,stroke:"none"}),s.createElement("path",{d:"M19.9476 11.0858C19.7424 9.30177 18.9429 7.63865 17.6778 6.36412C16.4126 5.08959 14.7555 4.2778 12.973 4.05939C11.1905 3.84098 9.38634 4.22866 7.85092 5.16003C6.31551 6.09141 5.13811 7.5123 4.50823 9.19403C3.87836 10.8758 3.83264 12.7205 4.37843 14.4314C4.92422 16.1423 6.02978 17.6197 7.51718 18.626C9.00457 19.6323 10.7873 20.1089 12.5784 19.9791C14.3695 19.8492 16.0649 19.1205 17.3916 17.9102L16.4176 16.8425C15.3305 17.8342 13.9415 18.4312 12.4739 18.5376C11.0064 18.644 9.54571 18.2535 8.32701 17.429C7.10832 16.6045 6.20248 15.3939 5.75529 13.9922C5.3081 12.5904 5.34556 11.0789 5.86165 9.70094C6.37773 8.32302 7.34243 7.15881 8.60047 6.39569C9.85851 5.63257 11.3367 5.31493 12.7972 5.49388C14.2577 5.67284 15.6155 6.33798 16.652 7.38226C17.6886 8.42654 18.3437 9.78922 18.5118 11.251L19.9476 11.0858Z",fill:"white",stroke:"none"}));var ln=n(86133),dn=n(18208),cn=n(55721),un=n(61930);Ee.UI.Grid.make((({slots:e,state:t})=>s.createElement(xe.F.Fragment,null,t.pipe(u.U((({width:t="auto",height:n="320px"})=>s.createElement("div",{key:"contentUIGrid",className:un.container,style:{width:t,height:n}},s.createElement("nav",{className:un.menu},s.createElement("section",{className:un.menuContent},e.sidebarContent),s.createElement("footer",{className:un.menuFooter},e.sidebarFooter)),s.createElement("section",{className:un.main},s.createElement("header",{className:un.mainHeader},e.mainHeader),s.createElement("section",{className:un.mainContent},e.mainContent),s.createElement("footer",{className:un.mainFooter},e.mainFooter)))))))));const mn=Ee.UI.Grid.make((({slots:e,state:t})=>s.createElement(xe.F.Fragment,null,t.pipe(u.U((({width:t="auto",height:n="320px"})=>s.createElement("div",{key:"contentUIGrid",className:un.container,style:{width:t,height:n}},s.createElement("section",{...(0,Ne.Sh)(un.main,un.mainNoSidebar)},s.createElement("header",{className:un.mainHeader},e.mainHeader),s.createElement("section",{className:un.mainContent},e.mainContent),s.createElement("footer",{className:un.mainFooter},e.mainFooter))))))))),hn=Ee.UI.Grid.make((({slots:e,state:t})=>s.createElement(xe.F.Fragment,null,t.pipe(u.U((({width:t="auto",height:n="320px"})=>s.createElement("div",{key:"contentUIGrid",className:un.container,style:{width:t,height:n}},s.createElement("nav",{className:un.menu},s.createElement("section",{className:un.menuContent},e.sidebarContent),s.createElement("footer",{className:un.menuFooter},e.sidebarFooter)),s.createElement("section",{className:un.main},s.createElement("header",{className:un.mainHeader},e.mainHeader),s.createElement("section",{...(0,Ne.Sh)(un.mainContent,un.mainContentNoFooter)},e.mainContent)))))))));var pn=n(19429);const gn={URI:"Observable",map:(e,t)=>e.pipe(u.U(t)),ap:(e,t)=>Z.aj([e,t]).pipe(u.U((([e,t])=>e(t)))),of:e=>w.of(e)};function fn(e,t,n){return pn.VF((i=>(0,o.zG)(t(i),F.x(),c.w((t=>n.traverseWithIndex(gn)(t,((t,n)=>e(n,t)(i.pipe(E.h((e=>e.key===t)),u.U((e=>e.action)))))))),F.x())))}var bn=n(31944),kn=n(55073),wn=n(45435),In=n(27241);const yn=Ee.UI.Grid.make((({slots:e})=>s.createElement("li",{className:In.item},s.createElement("div",{className:In.itemWrapper},s.createElement("article",{className:In.itemContent},e.item),s.createElement("aside",{className:In.itemMenu},e.menu)))));var _n=n(72746);const Cn=({children:e,className:t})=>s.createElement("div",{...(0,Ne.Sh)(_n.container,t)},e);var vn=n(44586);var En=n(2771);const Mn=({feedback:e,className:t,placement:n,disablePositionUpdates:i,onFeedback:a,onOpen:r,onClose:l})=>(0,o.zG)(e,he.g_((d=>(0,o.zG)(n,me.fold((()=>s.createElement(Ve.Tertiary,{name:"feedback-button",onClick:()=>d?l():r(),active:d,title:Ye.itemFeedback.button.action,ariaLabel:Ye.itemFeedback.button.action,compact:!0},s.createElement(Ge.JO.AssistantFeedback,null))),(n=>s.createElement(ln.J2,{mainContent:s.createElement("div",{...(0,Ne.Sh)(En.feedbackPopup,t)},s.createElement(Ve.Tertiary,{name:"feedback-good-button",ariaLabel:Ye.itemFeedback.popup.good,onClick:()=>a(be.h2.good)},s.createElement(Te.ThumbsUp,null)," ",s.createElement("span",{className:En.buttonText},Ye.itemFeedback.popup.good)),s.createElement(Ve.Tertiary,{name:"feedback-bad-button",ariaLabel:Ye.itemFeedback.popup.bad,onClick:()=>a(be.h2.bad)},s.createElement(Te.ThumbsDown,null)," ",s.createElement("span",{className:En.buttonText},Ye.itemFeedback.popup.bad))),isOutsideReferenceElement:!1,placement:n,show:he.nM(e)&&!0===e.left,includeMainContentPadding:!1,style:{zIndex:1e3,width:"auto",background:"none",borderRadius:"0",boxShadow:"none"},showArrow:!1,distanceFromReferenceElement:8,disablePositionUpdates:i},s.createElement(Ve.Tertiary,{name:"feedback-button",onClick:()=>d?l():r(),active:d,title:Ye.itemFeedback.button.action,ariaLabel:Ye.itemFeedback.button.action,compact:!0},s.createElement(Ge.JO.AssistantFeedback,null))))))),(e=>e===be.h2.good?s.createElement(en.u,{title:Ye.itemFeedback.button.good},s.createElement(Te.ThumbsUpFilled,{className:En.inactiveThumbsUp})):e===be.h2.bad?s.createElement(en.u,{title:Ye.itemFeedback.button.bad},s.createElement(Te.ThumbsDownFilled,{className:En.inactiveThumbsDown})):(0,ue.vE)(e))));var Un=n(21462);const Sn=()=>s.createElement("div",{className:Un.separator});var Nn;!function(e){e.getUIPart=function(e,t=Ge.JO.Ignore,n){return Ee.UI.Node.make((({state:i,notify:o})=>s.createElement(xe.F.Fragment,null,i.pipe(u.U((({uiMode:i,feedback:a,item:r,docId:l,feedbackMenuPlacement:d,disablePositionUpdates:c})=>s.createElement(s.Fragment,null,s.createElement("span",{ref:e=>"replyPanel"===i&&o(e?{kind:"replyButtonMounted",el:e,docId:l}:{kind:"replyButtonUnmounted",docId:l})()},s.createElement(Ve.Tertiary,{name:"reply-button",compact:!0,title:e.reply,ariaLabel:e.reply,onClick:o({kind:"reply",item:r,docId:l})},s.createElement(Te.Reply,null))),s.createElement(Sn,null),function(e=self){var t,n;return!!(null===(n=null===(t=e.navigator)||void 0===t?void 0:t.clipboard)||void 0===n?void 0:n.writeText)}()&&s.createElement(Ve.Tertiary,{name:"copy-button",compact:!0,title:e.copy,ariaLabel:e.copy,onClick:o({kind:"copy",item:r,docId:l})},s.createElement(Ge.JO.Copy,null)),s.createElement(Ve.Tertiary,{name:"remove-button",compact:!0,title:e.remove,ariaLabel:e.remove,onClick:o({kind:"remove",item:r,docId:l})},s.createElement(t,null)),s.createElement(Mn,{className:n,onOpen:o({kind:"openFeedback",item:r,docId:l}),onClose:o({kind:"closeFeedback",item:r,docId:l}),onFeedback:e=>o({kind:"feedback",feedback:e,item:r,docId:l})(),feedback:a,placement:d,disablePositionUpdates:c}))))))))},e.toReaderAction=function(e){return t=>{switch(t.kind){case"reply":return{kind:re.Kind.replyToItem,item:t.item,docId:t.docId,uiMode:e};case"copy":return{kind:re.Kind.copyItem,item:t.item,docId:t.docId,uiMode:e};case"remove":return{kind:re.Kind.removeItem,item:t.item,docId:t.docId,uiMode:e};case"feedback":return{kind:re.Kind.itemFeedback,item:t.item,feedback:t.feedback,docId:t.docId,uiMode:e};case"openFeedback":case"closeFeedback":return{kind:re.Kind.toggleItemFeedbackMenu,item:t.item,menuOpen:"openFeedback"===t.kind,docId:t.docId,uiMode:e};case"replyButtonMounted":return{kind:re.Kind.onboardingAnchorMounted,anchorNode:t.el,stepName:"itemMenu",docId:t.docId};case"replyButtonUnmounted":return{kind:re.Kind.onboardingAnchorUnmounted,stepNames:["itemMenu"],docId:t.docId};default:(0,ue.L0)(t)}}}}(Nn||(Nn={}));var xn,Pn,Fn=n(55189);!function(e){let t,n;!function(e){const t=Ee.UI.Grid.make((({slots:e})=>s.createElement(Cn,{className:Fn.popup},s.createElement(xe.F.Fragment,null,e.menu))));e.UIPart=Ee.UI.Knot.make(t,{menu:Nn.getUIPart(Ye.itemMenu.actions,Ge.JO.Ignore,Fn.feedbackPopup)}),e.createFlow=function(e,t,n,i,a){return Ee.Z.composeKnot({menu:Ee.Z.fromSideEffect((0,o.ls)(Nn.toReaderAction(a),(e=>t.next(e))),Z.aj([i,n]).pipe(u.U((([t,n])=>({item:t,docId:e,feedback:he.Yo((()=>(0,o.zG)(n,me.exists((e=>e.feedbackMenuActive)))))(t.feedback),feedbackMenuPlacement:me.some("top-end"),disablePositionUpdates:!1,uiMode:a})))))})}}(t=e.Popup||(e.Popup={})),function(t){const n=Ee.UI.Grid.make((({slots:e,state:t,notify:n})=>s.createElement(xe.F.Fragment,null,t.pipe(u.U((({show:t,item:i})=>s.createElement(ln.J2,{key:i.id,mainContent:e.popup,isOutsideReferenceElement:!1,placement:"top-end",show:t,includeMainContentPadding:!1,style:{zIndex:1e3,width:"auto",background:"none",borderRadius:"0",boxShadow:"none"},showArrow:!1,distanceFromReferenceElement:1,clickAwayOptions:{onClickAway:n({kind:"clickAway"})}},s.createElement(Ve.Tertiary,{compact:!0,name:"menu",title:Ye.itemMenu.buttonTitle,ariaLabel:Ye.itemMenu.buttonTitle,onClick:n(t?{kind:"hide"}:{kind:"show",item:i}),active:t},s.createElement(Ge.JO.Ellipsis,{className:Fn.ellipsis,width:15})))))))));t.UIPart=Ee.UI.Knot.make(n,{popup:e.Popup.UIPart}),t.createFlow=function(t,n,i,a,s,r,l){const d=s.pipe(u.U(ne.Ew((e=>e.id==a))),ze.oA);return Ee.Z.composeKnot({root:Ee.Z.fromSideEffect((e=>{switch(e.kind){case"show":n.next({kind:re.Kind.setItemMenuVisibleFor,item:me.some(e.item),docId:t,uiMode:l,source:"user"});break;case"hide":case"clickAway":n.next({kind:re.Kind.setItemMenuVisibleFor,item:me.none,docId:t,uiMode:l,source:"hide"===e.kind?"user":"clickAway"});break;default:(0,H.vE)(e)}}),i.pipe(h.M(d),u.U((([e,t])=>({item:t,show:(0,o.zG)(e,me.fold((()=>!1),(e=>e.kind===r&&e.id===a)))}))))),popup:e.Popup.createFlow(t,n,i,d,l)})}}(n=e.Button||(e.Button={}))}(xn||(xn={})),function(e){const t=Ee.UI.Node.make((({state:e,notify:t})=>{const{ref:n,onMount:i}=Oe.P.useElWatcher(),a=s.useRef(Y.h.create(me.none)),r=s.useRef(Y.h.create(!1));return s.createElement(xe.F.Fragment,null,e.pipe(u.U((e=>s.createElement(bn.J,{labelId:e.id,...(0,Ne.Sh)(wn.checkboxWrapper,e.checked&&wn.textChecked),labelClassName:wn.label,checkboxClassName:wn.checkbox,checked:e.checked,onChange:n=>{r.current.set(n),t({kind:"check",checked:n,item:e})()},useDS:!0,onMount:e=>{a.current.set(me.some(e)),t({kind:"mount",el:e})()}},(0,kn.l)(e.delta,""))))),Z.aj([a.current,n,r.current]).pipe(u.U((([e,t,n])=>(0,o.zG)(e,me.filter((()=>n)),me.fold(o.gn,(e=>{const n=e.getBoundingClientRect(),a=(0,o.zG)(t,me.chain((e=>me.fromNullable(e.offsetParent))),me.fold((()=>({top:0,left:0})),(e=>e.getBoundingClientRect())));return s.createElement("div",{ref:i,className:wn.checkboxDoneNotification,style:{top:n.top-a.top-6,left:n.left-a.left+.5*n.width},onAnimationEnd:()=>r.current.set(!1),role:"presentation"},Ye.followUps.doneNotification,s.createElement("div",{className:wn.arrow}))})))))))})),n=Ee.UI.Knot.make(yn,{item:t,menu:xn.Button.UIPart}),i=Ee.UI.List.make(ne.Bk,n);e.UIPart=Ee.UI.Composite.make(Ee.UI.Grid.make((({slots:e})=>s.createElement(xe.F.ul,{className:wn.followUps},e.list))),i),e.createFlow=function(e,t,n,i,o){return fn(((a,s)=>function(e,t,n,i,o,a,s){return Ee.Z.composeKnot({item:Ee.Z.fromSideEffect((t=>{switch(t.kind){case"check":i.next({kind:re.Kind.setItemChecked,checked:t.checked,item:t.item,docId:n,uiMode:s});break;case"mount":"replyPanel"==s&&0===e&&i.next({kind:re.Kind.onboardingAnchorMounted,anchorNode:t.el,stepName:"checkItem",docId:n});break;default:(0,ue.L0)(t)}}),o.pipe(u.U(me.chain(ne.Ew((e=>e.id==t)))),ze.oA)),menu:xn.Button.createFlow(n,i,a,t,o.pipe(ze.oA,k.O([])),be.YB.followUp,s)})}(s,a,e,t,n,i,o)),(()=>n.pipe(ze.oA,k.O([]),u.U(ne.UI(ae.ei("id"))))),ne.Bk)}}(Pn||(Pn={}));var Kn,Rn,Ln,Bn=n(23374);!function(e){const t=Ee.UI.Knot.make(yn,{item:Ee.UI.Node.make((({state:e})=>s.createElement(xe.F.Fragment,null,e.pipe(u.U((({delta:e})=>s.createElement(s.Fragment,null,(0,kn.l)(e,"")))))))),menu:xn.Button.UIPart}),n=Ee.UI.List.make(ne.Bk,t);e.UIPart=Ee.UI.Composite.make(Ee.UI.Grid.make((({slots:e})=>s.createElement(xe.F.ul,{className:Bn.keyPoints},e.list))),n),e.createFlow=function(e,t,n,i,o){return fn(((a,s)=>function(e,t,n,i,o,a){return Ee.Z.composeKnot({item:()=>i.pipe(u.U(me.chain(ne.Ew((t=>t.id==e)))),ze.oA),menu:xn.Button.createFlow(t,n,o,e,i.pipe(ze.oA,k.O([])),be.YB.keyPoint,a)})}(a,e,t,n,i,o)),(()=>n.pipe(ze.oA,k.O([]),u.U(ne.UI(ae.ei("id"))))),ne.Bk)}}(Kn||(Kn={})),function(e){e.UIPart=Ee.UI.Node.make((({notify:e})=>s.createElement(Ve.Tertiary,{name:"hint",title:Ye.hintButton.title,ariaLabel:Ye.hintButton.title,compact:!0,onClick:e("showOnboarding")},s.createElement(Ge.JO.QuestionMark,{width:12})))),e.createFlow=function(e,t,n){const i="moreDataFollowUps"===(o=t)?"followUps":"moreDataKeyPoints"===o?"keyPoints":"replyPanel";var o;return Ee.Z.fromSideEffect((t=>{e.next({kind:re.Kind.onboardingSetKind,onboardingKind:me.some(i),docId:n})}),w.of(null))}}(Rn||(Rn={})),function(e){e.UIPart=Ee.UI.Node.make((({state:e})=>s.createElement(xe.F.Fragment,null,e.pipe(u.U((({count:e,singular:t,plural:n})=>s.createElement(s.Fragment,null,e," ",dn._6(e,t,n))))))))}(Ln||(Ln={}));var An,Tn=n(39320);!function(e){let t,n,i;!function(e){const t=Ee.UI.Grid.make((({state:e,slots:t,notify:n})=>{const{ref:i,onMount:o}=Oe.P.useElWatcher();return s.useEffect((()=>{const t=i.pipe(ze.oA,h.M(e),M.b((([e,{popupKind:t}])=>n({kind:"mount",el:e,popupKind:t})()))).subscribe();return()=>t.unsubscribe()}),[]),s.createElement(xe.F.Fragment,null,e.pipe(u.U((({popupKind:e})=>s.createElement("div",{className:Tn.footer,key:`footer-${e}`},t.hintButton,s.createElement("div",{ref:o,className:Tn.replyButton},s.createElement(Ve.Primary,{name:"replyButton",onClick:n({kind:"reply",popupKind:e})},s.createElement(Te.Reply,null),Ye.reply)))))))})),n=Ee.UI.Union.make("popupKind",{none:Ee.UI.Node.empty,followUps:Rn.UIPart,keyPoints:Rn.UIPart});e.UIPart=Ee.UI.Knot.make(t,{hintButton:n}),e.createFlow=function(e){return Ee.Z.composeKnot({root:Ee.Z.fromSideEffect((t=>{switch(t.kind){case"reply":e.actions.next({kind:re.Kind.reply,docId:e.state.get().docId,popupKind:t.popupKind});break;case"mount":"followUps"===t.popupKind&&e.actions.next({kind:re.Kind.onboardingAnchorMounted,anchorNode:t.el,stepName:"draftReply",docId:e.state.get().docId});break;default:(0,ue.L0)(t)}}),e.state.view((({popupKind:e})=>(0,o.zG)(e,me.filter(Qt.PopupKind.isMoreDataPopupKind),me.fold((()=>({popupKind:"all"})),(e=>({popupKind:e}))))))),hintButton:Ee.Z.composeUnion({none:()=>w.of(null),followUps:Rn.createFlow(e.actions,"moreDataFollowUps",e.state.get().docId),keyPoints:Rn.createFlow(e.actions,"moreDataKeyPoints",e.state.get().docId)},(()=>e.state.view((({popupKind:e,onboardingAvailable:t})=>(0,o.zG)(e,me.filter(Qt.PopupKind.isFollowUpsOrKeyPoints),me.filter((()=>t)),me.getOrElse((()=>"none")),(e=>({popupKind:e})))))))})}}(t=e.Footer||(e.Footer={})),function(e){const t=Ee.UI.Union.make("popupKind",{followUps:Ln.UIPart,keyPoints:Ln.UIPart,all:()=>s.createElement(s.Fragment,null,"All")}),n=Ee.UI.Grid.make((({state:e,slots:t,notify:n})=>{const{ref:i,onMount:o}=Oe.P.useElWatcher();return s.useEffect((()=>{const t=i.pipe(ze.oA,h.M(e),M.b((([e,{popupKind:t}])=>n({kind:"mount",el:e,popupKind:t})()))).subscribe();return()=>t.unsubscribe()}),[]),s.createElement(xe.F.Fragment,null,e.pipe(u.U((({popupKind:e})=>s.createElement("div",{className:Tn.header,key:`header-${e}`},s.createElement("div",{className:Tn.headerCounts,ref:o},t.counts),s.createElement(Ve.Tertiary,{name:"close",compact:!0,onClick:n({kind:"close"})},s.createElement(Ge.JO.Close,null)))))))}));e.UIPart=Ee.UI.Knot.make(n,{counts:t}),e.createFlow=function(e){return Ee.Z.composeKnot({root:Ee.Z.fromSideEffect((t=>{switch(t.kind){case"close":e.actions.next({kind:re.Kind.setRecapBarPopup,popupKind:me.none,docId:e.state.get().docId,source:"user"});break;case"mount":"all"!==t.popupKind&&e.actions.next({kind:re.Kind.onboardingAnchorMounted,anchorNode:t.el,stepName:t.popupKind,docId:e.state.get().docId});break;default:(0,ue.L0)(t)}}),e.state.view((({popupKind:e})=>(0,o.zG)(e,me.filter(Qt.PopupKind.isMoreDataPopupKind),me.fold((()=>({popupKind:"all"})),(e=>({popupKind:e}))))))),counts:()=>e.state.view((({popupKind:e,followUps:t,keyPoints:n})=>(0,o.zG)(Ie.Y(me.option)({popupKind:e,followUpsCount:me.some((0,de.Hg)(t)),keyPointsCount:me.some((0,de.Hg)(n))}),me.map((({popupKind:e,followUpsCount:t,keyPointsCount:n})=>"followUps"===e?{popupKind:"followUps",count:t,plural:Ye.recapBar.followUps.buttonTitle.plural,singular:Ye.recapBar.followUps.buttonTitle.singular}:"keyPoints"===e?{popupKind:"keyPoints",count:n,plural:Ye.recapBar.keyPoints.buttonTitle.plural,singular:Ye.recapBar.keyPoints.buttonTitle.singular}:{popupKind:"all"})),me.getOrElse((()=>({popupKind:"all"}))))))})}}(n=e.Header||(e.Header={})),function(e){const t=Ee.UI.Union.make("dataKind",{followUps:Ln.UIPart,keyPoints:Ln.UIPart});function n(e,t){return Ee.Z.composeUnion({followUps:()=>e.state.view((0,o.ls)((({followUps:e})=>(0,de.Hg)(e)),(e=>({count:e,plural:Ye.recapBar.followUps.buttonTitle.plural,singular:Ye.recapBar.followUps.buttonTitle.singular})))),keyPoints:()=>e.state.view((0,o.ls)((({keyPoints:e})=>(0,de.Hg)(e)),(e=>({count:e,plural:Ye.recapBar.keyPoints.buttonTitle.plural,singular:Ye.recapBar.keyPoints.buttonTitle.singular}))))},(()=>w.of({dataKind:t})))}const i=({children:e,onScroll:t})=>{const[n,i]=s.useState(0),[o,a]=s.useState(0),[r,l]=s.useState(0),d=s.useRef(null),c=s.useRef(new $e.xQ);return s.useEffect((()=>{var e,t;a((null===(e=null==d?void 0:d.current)||void 0===e?void 0:e.scrollHeight)||0),l((null===(t=null==d?void 0:d.current)||void 0===t?void 0:t.clientHeight)||0)})),s.useEffect((()=>{const e=c.current.pipe(cn.p(Ye.panelScrollEventThrottleTime),M.b(t)).subscribe();return()=>e.unsubscribe()}),[]),s.createElement("div",{...(0,Ne.Sh)(Tn.content,n>0?Tn.contentOverflowTop:void 0,o-r-n>0?Tn.contentOverflowBottom:void 0)},s.createElement("div",{className:Tn.contentContent,ref:d,onScroll:e=>{i(e.currentTarget.scrollTop),c.current.next()}},e))},a=Ee.UI.Knot.make(Ee.UI.Grid.make((({slots:e,notify:t})=>s.createElement(i,{onScroll:t("scroll")},e.content))),{content:Pn.UIPart}),r=Ee.UI.Knot.make(Ee.UI.Grid.make((({slots:e,notify:t})=>s.createElement(i,{onScroll:t("scroll")},e.content))),{content:Kn.UIPart}),l=Ee.UI.Grid.make((({slots:e})=>s.createElement(s.Fragment,null,s.createElement("h2",{className:Tn.contentCounts},e.counts),e.content))),d=Ee.UI.Knot.make(l,{content:Pn.UIPart,counts:t}),c=Ee.UI.Knot.make(l,{content:Kn.UIPart,counts:t}),u=Ee.UI.Knot.make(Ee.UI.Grid.make((({slots:e,notify:t})=>s.createElement(i,{onScroll:t("scroll")},e.followUps,e.keyPoints))),{followUps:d,keyPoints:c});e.UIPart=Ee.UI.Union.make("popupKind",{followUps:a,keyPoints:r,all:u}),e.createFlow=function(e){return Ee.Z.composeUnion({followUps:Ee.Z.composeKnot({root:Ee.Z.fromSideEffect((t=>e.actions.next({kind:re.Kind.panelScroll,source:"recapBar",docId:e.state.get().docId})),w.of(null)),content:Pn.createFlow(e.state.view("docId").get(),e.actions,e.state.view("followUps"),e.state.view("itemMenuVisibleFor"),"recapBar")}),keyPoints:Ee.Z.composeKnot({root:Ee.Z.fromSideEffect((t=>e.actions.next({kind:re.Kind.panelScroll,source:"recapBar",docId:e.state.get().docId})),w.of(null)),content:Kn.createFlow(e.state.view("docId").get(),e.actions,e.state.view("keyPoints"),e.state.view("itemMenuVisibleFor"),"recapBar")}),all:Ee.Z.composeKnot({root:Ee.Z.fromSideEffect((t=>e.actions.next({kind:re.Kind.panelScroll,source:"recapBar",docId:e.state.get().docId})),w.of(null)),followUps:Ee.Z.composeKnot({content:Pn.createFlow(e.state.view("docId").get(),e.actions,e.state.view("followUps"),e.state.view("itemMenuVisibleFor"),"recapBar"),counts:n(e,"followUps")}),keyPoints:Ee.Z.composeKnot({content:Kn.createFlow(e.state.view("docId").get(),e.actions,e.state.view("keyPoints"),e.state.view("itemMenuVisibleFor"),"recapBar"),counts:n(e,"keyPoints")})})},(()=>e.state.view((({popupKind:e})=>(0,o.zG)(e,me.filter(Qt.PopupKind.isMoreDataPopupKind),me.fold((()=>({popupKind:"all"})),(e=>({popupKind:e}))))))))}}(i=e.Content||(e.Content={})),e.UIPart=Ee.UI.Knot.make(mn,{mainHeader:n.UIPart,mainContent:i.UIPart,mainFooter:t.UIPart}),e.createFlow=function(e){return Ee.Z.composeKnot({root:()=>w.of({width:"432px",height:"auto"}),mainHeader:n.createFlow(e),mainContent:i.createFlow(e),mainFooter:t.createFlow(e)})}}(An||(An={}));var On,Gn=n(79011);!function(e){const t=Ee.UI.Grid.make((({state:e,slots:t,notify:n})=>{const{ref:i,onMount:o}=Oe.P.useElWatcher();return s.useEffect((()=>{const e=i.pipe(ze.oA,M.b((e=>{n({kind:"mount",el:e})()}))).subscribe();return()=>e.unsubscribe()}),[]),s.createElement(xe.F.Fragment,null,e.pipe(u.U((({followUpsCount:e,keyPointsCount:i,popupState:{showFollowups:a,showKeyPoints:r,showAll:l},onboardingActive:d})=>s.createElement("div",{key:"moreDataEntryPoint",...(0,Ne.Sh)(Gn.moreDataEntryPoint,d?Gn.moreDataEntryPointWithOnboarding:void 0),ref:o},e?s.createElement(ln.J2,{mainContent:t.popup,isOutsideReferenceElement:!1,theme:"lightDS",placement:"bottom",show:a,style:{zIndex:1e3,width:"auto"},includeMainContentPadding:!1,boundaryAreaPadding:8,clickAwayOptions:{onClickAway:n({kind:"clickAway"})}},s.createElement(Ve.Tertiary,{name:"follow-ups",active:a,onClick:n({kind:"buttonClicked",popupKind:a?me.none:me.some("followUps")})},e," ",dn._6(e,Ye.recapBar.followUps.buttonTitle.singular,Ye.recapBar.followUps.buttonTitle.plural))):null,i?s.createElement(ln.J2,{mainContent:t.popup,isOutsideReferenceElement:!1,theme:"lightDS",placement:"bottom",show:r,style:{zIndex:1e3,width:"auto"},includeMainContentPadding:!1,boundaryAreaPadding:8,clickAwayOptions:{onClickAway:n({kind:"clickAway"})}},s.createElement(Ve.Tertiary,{name:"key-points",active:r,onClick:n({kind:"buttonClicked",popupKind:r?me.none:me.some("keyPoints")})},i," ",dn._6(i,Ye.recapBar.keyPoints.buttonTitle.singular,Ye.recapBar.keyPoints.buttonTitle.plural))):null,e&&i?s.createElement(ln.J2,{mainContent:t.popup,isOutsideReferenceElement:!1,theme:"lightDS",placement:"bottom",show:l,style:{zIndex:1e3,width:"auto"},includeMainContentPadding:!1,boundaryAreaPadding:8,clickAwayOptions:{onClickAway:n({kind:"clickAway"})}},s.createElement(Ve.Tertiary,{name:"all",active:l,onClick:n({kind:"buttonClicked",popupKind:l?me.none:me.some("all")})},Ye.recapBar.all.buttonTitle)):null)))))}));e.UIPart=Ee.UI.Knot.make(t,{popup:An.UIPart}),e.createFlow=function(e,t){return Ee.Z.composeKnot({root:Ee.Z.fromSideEffect((t=>{switch(t.kind){case"buttonClicked":e.actions.next({kind:re.Kind.setRecapBarPopup,popupKind:t.popupKind,docId:e.state.get().docId,source:"user"});break;case"clickAway":e.actions.next({kind:re.Kind.setRecapBarPopup,popupKind:me.none,docId:e.state.get().docId,source:"clickAway"});break;case"mount":e.actions.next({kind:re.Kind.onboardingAnchorMounted,anchorNode:t.el,docId:e.state.get().docId,stepName:"recapBar"});break;default:(0,ue.vE)(t)}}),Y.h.combine(e.state.view((({followUps:e,keyPoints:t,popupKind:n,isLastMessage:i})=>({followUpsCount:(0,de.Hg)(e),keyPointsCount:(0,de.Hg)(t),popupState:(0,o.zG)(n,me.fold((()=>({showFollowups:!1,showKeyPoints:!1,showAll:!1})),(e=>({showFollowups:"followUps"===e,showKeyPoints:"keyPoints"===e,showAll:"all"===e})))),isLastMessage:i}))),t.view((e=>(0,o.zG)(e,me.fold(o.jv,(({stepName:e,onboardingKind:t})=>"general"===t&&"recapBar"===e))))),((e,t)=>({...e,onboardingActive:!!e.isLastMessage&&t})))),popup:An.createFlow(e)})}}(On||(On={}));var zn,Hn=n(68715),Vn=n(64229);!function(e){e.UIPart=Ee.UI.Node.make((({state:e,notify:t})=>{const n=s.useRef(Y.h.create(me.none));return s.useEffect((()=>{const e=n.current.pipe(ze.oA,u.U((e=>{t({kind:"itemMount",el:e})()}))).subscribe();return()=>e.unsubscribe()}),[]),s.createElement(xe.F.Fragment,null,e.pipe(u.U((({show:e,kind:i})=>s.createElement(Vn.m,{ariaMenuId:"actions-menu",ariaMenuLabel:Ye.recapBar.settingsMenu.menuTitle,sections:[{items:[{icon:s.createElement(Xt.K,{size:22}),label:Ye.recapBar.settingsMenu.about,onClick:t({kind:"aboutRecap"})},{icon:s.createElement(Te.Feedback,null),label:Ye.recapBar.settingsMenu.feedback,onClick:t({kind:"feedback"})}]},{items:[{id:"recap-bar-highlights-switch",icon:i===Qt.Kind.compact?s.createElement(Te.Show,null):s.createElement(Te.Hide,null),label:i===Qt.Kind.compact?Ye.recapBar.settingsMenu.show:Ye.recapBar.settingsMenu.hide,onClick:i===Qt.Kind.compact?t({kind:"toggleRecapBar",isCompact:!1}):t({kind:"toggleRecapBar",isCompact:!0}),disabled:(0,kt.ff)((0,kt.Kg)(Qt.Kind.is(Qt.Kind.compact),Qt.Kind.is(Qt.Kind.expanded)))(i)}]},{items:[{icon:s.createElement(Te.Disable,null),label:Ye.recapBar.settingsMenu.disable,onClick:t({kind:"turnOffRecap"})}]}],trigger:{action:"click"},placement:"bottom-end",size:"medium",theme:"lightDS",distanceFromReferenceElement:0,style:{zIndex:1e3,width:240},onToggle:n=>{n!==e&&t({kind:"toggleMenu",show:n})()},onItemMount:(e,t)=>{"recap-bar-highlights-switch"===e&&n.current.set(me.some(t))}},s.createElement(Ve.Tertiary,{title:Ye.recapBar.settingsMenu.buttonTitle,ariaLabel:Ye.recapBar.settingsMenu.buttonTitle,name:"menu-button",active:e,compact:!0},s.createElement(Ge.JO.Gear,{width:15})))))))})),e.createFlow=function(e){return Ee.Z.fromSideEffect((t=>{switch(t.kind){case"aboutRecap":e.actions.next({kind:re.Kind.recapMenuItemClick,item:"about",docId:e.state.get().docId});break;case"feedback":e.actions.next({kind:re.Kind.recapMenuItemClick,item:"feedback",docId:e.state.get().docId});break;case"turnOffRecap":e.actions.next({kind:re.Kind.recapMenuItemClick,item:"turnOff",docId:e.state.get().docId});break;case"toggleMenu":e.actions.next({kind:re.Kind.setRecapBarPopup,popupKind:t.show?me.some("settingsMenu"):me.none,docId:e.state.get().docId,source:"user"});break;case"toggleRecapBar":e.actions.next({kind:re.Kind.recapMenuItemClick,item:t.isCompact?"hide":"show",docId:e.state.get().docId}),e.actions.next({kind:re.Kind.toggleRecapBar,isCompact:t.isCompact,docId:e.state.get().docId,source:"settingsMenu"});break;case"itemMount":e.actions.next({kind:re.Kind.onboardingAnchorMounted,anchorNode:t.el,stepName:"recapBarMenu",docId:e.state.get().docId});break;default:(0,ue.L0)(t)}}),e.state.view((({popupKind:e,kind:t})=>({show:(0,o.zG)(e,me.fold((()=>!1),(e=>"settingsMenu"===e))),kind:t}))))}}(zn||(zn={}));const Dn=({title:e,children:t})=>e?s.createElement(en.u,{title:e,align:"right"},t):s.createElement(s.Fragment,null,t),Zn=({title:e,warning:t,loading:n})=>s.createElement(Dn,{title:e},s.createElement("div",{className:Hn.logoContainer},n?s.createElement(rn,{size:22}):s.createElement(Xt.K,{size:22}),t?s.createElement(Te.WarningBadge,{className:Hn.warningBadge}):null)),Yn=({browser:e})=>s.createElement($t.v,{browser:e,className:Hn.betaBadge}),qn=Ee.UI.Grid.make((({slots:e,view:t})=>s.createElement(xe.F.div,{key:"compact-panel",...(0,Ne.Sh)(Hn.recapPanel,t("hasBackground").pipe(u.U((0,kt.RN)(Hn.panelBackground,null))))},s.createElement(xe.F.Fragment,null,e.logo),s.createElement(xe.F.main,{className:Hn.mainPart},e.content),s.createElement(xe.F.aside,{className:Hn.asidePart},e.aside))));var jn,Qn,Wn;!function(e){const t=Ee.UI.Node.make((({state:e})=>s.createElement(xe.F.Fragment,null,e.pipe(u.U((({loading:e,browser:t})=>s.createElement("div",{className:Hn.logoAndBadge},s.createElement(Zn,{loading:e}),s.createElement(Yn,{browser:t})))))))),n=Ee.UI.Node.make((({notify:e})=>s.createElement(s.Fragment,null,s.createElement("span",{className:Hn.optInContent},Ye.recapBar.optIn.content),s.createElement(Ve.Primary,{name:"try-it-out",onClick:e("tryItOut"),className:Hn.tryItOutButton},Ye.recapBar.optIn.tryItOutButton),s.createElement("a",{href:Ye.recapBar.optIn.learnMoreLink,target:"_blank",rel:"noreferrer",className:Hn.learnMoreLink,onClick:e("learnMore")},Ye.recapBar.optIn.learnMoreLabel)))),i=Ee.UI.Node.make((({notify:e})=>s.createElement(Ve.Tertiary,{name:"dismiss",onClick:e("dismiss"),className:Hn.ghostButton},Ye.recapBar.optIn.dismissButton))),a=Ee.UI.Union.asOption(n),r=Ee.UI.Union.asOption(i);e.UIPart=Ee.UI.Knot.make(qn,{logo:t,content:a,aside:r}),e.createFlow=function(e){return Ee.Z.composeKnot({root:()=>e.state.view((0,o.ls)(ae.ei("kind"),(e=>({hasBackground:e===Qt.Kind.optIn})))),logo:()=>e.state.view((e=>({browser:e.browser,loading:e.kind===Qt.Kind.optInIndeterminate}))),content:Ee.Z.composeUnion({Some:Ee.Z.composeKnot({value:Ee.Z.fromSideEffect((t=>{switch(t){case"tryItOut":e.actions.next({kind:re.Kind.optInTryItOutModal,docId:e.state.view("docId").get()});break;case"learnMore":e.actions.next({kind:re.Kind.learnMoreLinkVisited,source:"optInRecapBar",docId:e.state.view("docId").get()});break;default:(0,ue.L0)(t)}}),w.of(null))}),None:()=>w.of(null)},(()=>e.state.view((0,o.ls)(ae.ei("kind"),me.some,me.filter(Qt.Kind.is(Qt.Kind.optIn)))))),aside:Ee.Z.composeUnion({Some:Ee.Z.composeKnot({value:Ee.Z.fromSideEffect((t=>{if("dismiss"===t)e.actions.next({kind:re.Kind.optInDismissModal,docId:e.state.view("docId").get()});else(0,ue.L0)(t)}),w.of(null))}),None:()=>w.of(null)},(()=>e.state.view((0,o.ls)(ae.ei("kind"),me.some,me.filter(Qt.Kind.is(Qt.Kind.optIn))))))})}}(jn||(jn={})),function(e){const t=Ee.UI.Node.make((({state:e,notify:t})=>s.createElement(xe.F.Fragment,null,e.pipe(u.U((({kind:e,checkingState:n,logoTooltip:i,logoWarning:o,browser:a})=>s.createElement("div",{onClick:e===Qt.Kind.compact?t({kind:"toggleRecapBar",isCompact:!1}):e===Qt.Kind.expanded?t({kind:"toggleRecapBar",isCompact:!0}):void 0,className:Hn.logoAndBadge,...e===Qt.Kind.compact||e===Qt.Kind.expanded?{role:"button"}:{}},s.createElement(Zn,{loading:"idle"!==n,warning:o,title:i}),s.createElement(Yn,{browser:a}))))))));function n(e){return Ee.Z.fromSideEffect((t=>e.actions.next({kind:re.Kind.toggleRecapBar,isCompact:t.isCompact,docId:e.state.get().docId,source:"logoButton"})),e.state.view((e=>{const t=me.isNone(e.followUps)&&me.isNone(e.keyPoints),n=me.isSome(e.lowQualityInfo)&&!t,i=e.kind===Qt.Kind.compact,a=i?t&&"idle"===e.checkingState?(0,o.zG)(e.goodForAnnotations,ce.FX(!0))?Ye.recapBar.logoTooltips.noSummary:Ye.recapBar.logoTooltips.noSummaryMessageTooShort:n?Ye.recapBar.logoTooltips.contentIsLowQuality:"":"",s=e.kind===Qt.Kind.indeterminate?Ye.recapBar.logoTooltips.loading:`${i?Ye.recapBar.logoTooltips.show:Ye.recapBar.logoTooltips.hide}${a?" | ":""}${a}`;return{kind:e.kind,checkingState:e.checkingState,logoTooltip:s,logoWarning:n&&e.kind===Qt.Kind.expanded,browser:e.browser}})))}let i;!function(e){const t=Ee.UI.Node.make((()=>s.createElement("span",{className:Hn.contentLabel},Ye.recapBar.zeroStates.noSummary))),n=Ee.UI.Node.make((()=>s.createElement("span",{className:Hn.contentLabel},Ye.recapBar.zeroStates.noSummaryMessageTooShort))),i=Ee.UI.Node.make((({notify:e})=>s.createElement("span",{className:Hn.contentLabel},Ye.recapBar.zeroStates.contentIsLowQuality,s.createElement(Ve.Tertiary,{name:"show-anyway",onClick:e("showAnyway"),className:Hn.ghostButton},Ye.recapBar.zeroStates.showAnyway))));function a(e){const t=me.isSome(e.followUps)&&me.isSome(e.keyPoints),n=me.isSome(e.followUps)||me.isSome(e.keyPoints),i="idle"===e.checkingState&&n||t,a=i&&(me.isNone(e.lowQualityInfo)||e.showLowQualityContent),s=me.isSome(e.lowQualityInfo)&&!e.showLowQualityContent&&i;return e.kind!==Qt.Kind.expanded?"none":a?"moreDataEntryPoint":s?"lowQualityEntryPoint":(0,o.zG)(e.goodForAnnotations,ce.FX(!0))?"noSummary":"noSummaryMessageTooShort"}e.UIPart=Ee.UI.Union.make("kind",{none:Ee.UI.Node.empty,moreDataEntryPoint:On.UIPart,lowQualityEntryPoint:i,noSummary:t,noSummaryMessageTooShort:n}),e.createFlow=function(e,t){return Ee.Z.composeUnion({none:()=>w.of(null),moreDataEntryPoint:On.createFlow(e,t),lowQualityEntryPoint:Ee.Z.fromSideEffect((t=>e.actions.next({kind:re.Kind.showAnyway,docId:e.state.get().docId})),w.of(null)),noSummary:()=>w.of(null),noSummaryMessageTooShort:()=>w.of(null)},(()=>e.state.view((0,o.ls)(a,(e=>({kind:e}))))))}}(i||(i={}));const a=Ee.UI.Union.asOption(on.UIPart),r=Ee.UI.Knot.make(Ee.UI.Grid.make((({slots:e})=>s.createElement(xe.F.Fragment,null,e.highlightsSwitch,e.settingsMenu))),{highlightsSwitch:a,settingsMenu:zn.UIPart});e.UIPart=Ee.UI.Knot.make(qn,{logo:t,content:i.UIPart,aside:r}),e.createFlow=function(e,t){return Ee.Z.composeKnot({root:()=>w.of({hasBackground:!1}),logo:n(e),content:i.createFlow(e,t),aside:Ee.Z.composeKnot({highlightsSwitch:Ee.Z.composeUnion({Some:Ee.Z.composeKnot({value:on.createFlow(e)}),None:()=>w.of(null)},(()=>e.state.view((e=>(0,o.zG)(e.kind===Qt.Kind.compact?me.none:e.highlightsSwitchState))))),settingsMenu:zn.createFlow(e)})})}}(Qn||(Qn={})),function(e){e.UIPart=Ee.UI.Union.make("kind",{none:Ee.UI.Node.empty,optedIn:Qn.UIPart,notOptedIn:jn.UIPart}),e.createFlow=function(e,t){return Ee.Z.composeUnion({none:()=>w.of(null),optedIn:Qn.createFlow(e,t),notOptedIn:jn.createFlow(e)},(()=>e.state.view((0,o.ls)(ae.ei("kind"),(e=>{switch(e){case Qt.Kind.none:return{kind:"none"};case Qt.Kind.optInIndeterminate:case Qt.Kind.optIn:return{kind:"notOptedIn"};default:return{kind:"optedIn"}}})))))}}(Wn||(Wn={}));var Jn,Xn=n(21042);!function(e){let t;!function(e){let t,n;!function(e){const t=Ee.UI.Grid.make((({notify:e,slots:t})=>s.createElement(s.Fragment,null,s.createElement("strong",null,t.count)," ",Ye.replyPanel.compact.followUps.suffix," ",s.createElement("a",{onClick:e("show"),role:"button",tabIndex:0},Ye.replyPanel.show))));e.UIPart=Ee.UI.Knot.make(t,{count:Ln.UIPart}),e.createFlow=e=>Ee.Z.composeKnot({root:Ee.Z.fromSideEffect((t=>{e.actions.next({kind:re.Kind.toggleReplyPanelMode,docId:e.state.get().docId,trigger:"followUps",mode:Wt.Mode.full})}),w.of(null)),count:()=>e.state.view((({followUps:e})=>({count:(0,o.zG)(e,me.fold((()=>0),(e=>e.length))),plural:Ye.replyPanel.compact.followUps.plural,singular:Ye.replyPanel.compact.followUps.singular})))})}(t||(t={})),function(e){e.UIPart=Ee.UI.Node.make((({notify:e})=>s.createElement(s.Fragment,null,Ye.replyPanel.compact.keyPoints.content," ",s.createElement("a",{onClick:e("show"),role:"button",tabIndex:0},Ye.replyPanel.compact.keyPoints.action)))),e.createFlow=e=>Ee.Z.fromSideEffect((t=>{e.actions.next({kind:re.Kind.toggleReplyPanelMode,docId:e.state.get().docId,trigger:"keyPoints",mode:Wt.Mode.full})}),w.of(null))}(n||(n={})),e.UIPart=Ee.UI.Union.make("kind",{none:Ee.UI.Node.empty,followUps:t.UIPart,keyPoints:n.UIPart}),e.createFlow=e=>Ee.Z.composeUnion({none:()=>w.of(null),followUps:t.createFlow(e),keyPoints:n.createFlow(e)},(()=>e.state.view((({followUps:e,keyPoints:t})=>({kind:me.isSome(e)?"followUps":me.isSome(t)?"keyPoints":"none"})))))}(t||(t={}));const n=Ee.UI.Grid.make((({state:e,notify:t,slots:n})=>s.createElement(xe.F.Fragment,null,e.pipe(u.U((({messageId:e})=>s.createElement("div",{key:e,className:Xn.compactReplyPanel},s.createElement(Xt.K,{className:Xn.compactReplyPanelLogo,size:22}),s.createElement("div",{className:Xn.compactReplyPanelContent},n.content),s.createElement(Ve.Tertiary,{name:"show",title:Ye.replyPanel.show,onClick:t("show"),compact:!0},s.createElement(Te.ChevronDown,null)))))))));e.UIPart=Ee.UI.Knot.make(n,{content:t.UIPart}),e.createFlow=e=>Ee.Z.composeKnot({root:Ee.Z.fromSideEffect((t=>{e.actions.next({kind:re.Kind.toggleReplyPanelMode,docId:e.state.get().docId,trigger:"arrowButton",mode:Wt.Mode.full})}),e.state.view((({docId:e})=>({messageId:e})))),content:t.createFlow(e)})}(Jn||(Jn={}));var $n,ei=n(55722);!function(e){const t=Ee.UI.Union.make("dataKind",{followUps:Ln.UIPart,keyPoints:Ln.UIPart});function n(e,t){return Ee.Z.composeUnion({followUps:()=>e.state.view((0,o.ls)((({followUps:e})=>(0,de.Hg)(e)),(e=>({count:e,plural:Ye.replyPanel.content.followUps.plural,singular:Ye.replyPanel.content.followUps.singular})))),keyPoints:()=>e.state.view((0,o.ls)((({keyPoints:e})=>(0,de.Hg)(e)),(e=>({count:e,plural:Ye.replyPanel.content.keyPoints.plural,singular:Ye.replyPanel.content.keyPoints.singular}))))},(()=>w.of({dataKind:t})))}const i=({children:e,expanded:t,onScroll:n,onOverflow:i})=>{const[a,r]=s.useState(0),l=s.useRef(new $e.xQ),{ref:d,onMount:c}=Oe.P.useElWatcher();return s.useEffect((()=>{const e=l.current.pipe(cn.p(Ye.panelScrollEventThrottleTime),M.b(n)).subscribe(),t=d.pipe(u.U(me.fold(o.jv,(e=>e.clientHeight<e.scrollHeight))),F.x(),M.b(i)).subscribe();return()=>{e.unsubscribe(),t.unsubscribe()}}),[]),s.createElement("div",{...(0,Ne.Sh)(a>0?ei.contentOverflowTop:void 0)},s.createElement("div",{...(0,Ne.Sh)(ei.content,t?ei.contentExpanded:void 0),ref:c,onScroll:e=>{r(e.currentTarget.scrollTop),l.current.next()}},e))},a=Ee.UI.Grid.make((({slots:e})=>s.createElement(s.Fragment,null,s.createElement("h2",{className:ei.contentCounts},e.counts),e.content))),r=Ee.UI.Knot.make(a,{content:Pn.UIPart,counts:t}),l=Ee.UI.Knot.make(a,{content:Kn.UIPart,counts:t}),d=Ee.UI.Knot.make(Ee.UI.Grid.make((({slots:e,state:t,notify:n})=>s.createElement(xe.F.Fragment,null,t.pipe(u.U((({expanded:t})=>s.createElement(i,{key:"followUpsContent",expanded:t,onScroll:n({kind:"scroll"}),onOverflow:e=>n({kind:"overflow",hasOverflow:e})()},e.content))))))),{content:r}),c=Ee.UI.Knot.make(Ee.UI.Grid.make((({slots:e,state:t,notify:n})=>s.createElement(xe.F.Fragment,null,t.pipe(u.U((({expanded:t})=>s.createElement(i,{key:"keyPointsContent",expanded:t,onScroll:n({kind:"scroll"}),onOverflow:e=>n({kind:"overflow",hasOverflow:e})()},e.content))))))),{content:Kn.UIPart});function m(e){return Ee.Z.fromSideEffect((t=>{switch(t.kind){case"scroll":e.actions.next({kind:re.Kind.panelScroll,source:"replyPanel",docId:e.state.get().docId});break;case"overflow":e.actions.next({kind:re.Kind.panelOverflow,source:"replyPanel",docId:e.state.get().docId,hasOverflow:t.hasOverflow});break;default:(0,ue.L0)(t)}}),e.state.view((e=>({expanded:e.expanded}))))}e.AllContent=Ee.UI.Knot.make(Ee.UI.Grid.make((({slots:e,state:t,notify:n})=>s.createElement(xe.F.Fragment,null,t.pipe(u.U((({expanded:t})=>s.createElement(i,{key:"allContent",expanded:t,onScroll:n({kind:"scroll"}),onOverflow:e=>n({kind:"overflow",hasOverflow:e})()},e.followUps,e.keyPoints))))))),{followUps:r,keyPoints:l}),e.UIPart=Ee.UI.Union.make("kind",{none:Ee.UI.Node.empty,followUps:d,keyPoints:c,all:e.AllContent}),e.createFlow=function(e){return Ee.Z.composeUnion({none:()=>w.of(null),followUps:Ee.Z.composeKnot({root:m(e),content:Ee.Z.composeKnot({content:Pn.createFlow(e.state.view("docId").get(),e.actions,e.state.view("followUps"),e.state.view("itemMenuVisibleFor"),"replyPanel"),counts:n(e,"followUps")})}),keyPoints:Ee.Z.composeKnot({root:m(e),content:Kn.createFlow(e.state.view("docId").get(),e.actions,e.state.view("keyPoints"),e.state.view("itemMenuVisibleFor"),"replyPanel")}),all:Ee.Z.composeKnot({root:m(e),followUps:Ee.Z.composeKnot({content:Pn.createFlow(e.state.view("docId").get(),e.actions,e.state.view("followUps"),e.state.view("itemMenuVisibleFor"),"replyPanel"),counts:n(e,"followUps")}),keyPoints:Ee.Z.composeKnot({content:Kn.createFlow(e.state.view("docId").get(),e.actions,e.state.view("keyPoints"),e.state.view("itemMenuVisibleFor"),"replyPanel"),counts:n(e,"keyPoints")})})},(()=>e.state.view((({followUps:e,keyPoints:t})=>({kind:me.isSome(e)&&me.isSome(t)?"all":me.isSome(e)?"followUps":me.isSome(t)?"keyPoints":"none"})))))}}($n||($n={}));var ti,ni=n(60268),ii=n(22157);!function(e){let t,n;!function(e){e.UIPart=Ee.UI.Node.make((({notify:e})=>s.createElement(Ve.Tertiary,{className:ii.headerButton,name:"hide",title:Ye.replyPanel.hide,onClick:e("hide"),compact:!0},s.createElement(Te.ChevronDown,null)))),e.createFlow=e=>Ee.Z.fromSideEffect((t=>{e.actions.next({kind:re.Kind.toggleReplyPanelMode,docId:e.state.get().docId,trigger:"arrowButton",mode:Wt.Mode.compact})}),w.of(null))}(t||(t={})),function(e){let t,n;!function(e){e.UIPart=Ee.UI.Node.make((({state:e})=>s.createElement(xe.F.Fragment,null,e.pipe(u.U((({count:e})=>s.createElement(s.Fragment,null,dn._6(e,Ye.replyPanel.header.followUps.singular,Ye.replyPanel.header.followUps.plural)))))))),e.createFlow=e=>()=>e.state.view((({followUps:e})=>(0,o.zG)(e,de.Hg,(e=>({count:e})))))}(t||(t={})),function(e){const t=Ee.UI.Grid.make((({slots:e})=>s.createElement(s.Fragment,null,e.count)));e.UIPart=Ee.UI.Knot.make(t,{count:Ln.UIPart}),e.createFlow=e=>Ee.Z.composeKnot({count:()=>e.state.view((({keyPoints:e})=>({count:(0,de.Hg)(e),plural:Ye.replyPanel.header.keyPoints.plural,singular:Ye.replyPanel.header.keyPoints.singular})))})}(n||(n={})),e.UIPart=Ee.UI.Union.make("kind",{none:Ee.UI.Node.empty,followUps:t.UIPart,keyPoints:n.UIPart}),e.createFlow=e=>Ee.Z.composeUnion({none:()=>w.of(null),followUps:t.createFlow(e),keyPoints:n.createFlow(e)},(()=>e.state.view((({followUps:e,keyPoints:t})=>({kind:me.isSome(e)?"followUps":me.isSome(t)?"keyPoints":"none"})))))}(n||(n={}));const i=Ee.UI.Grid.make((({slots:e})=>s.createElement("div",{className:ii.header},s.createElement("div",{className:ii.headerContent},e.content),e.button)));e.UIPart=Ee.UI.Knot.make(i,{content:n.UIPart,button:t.UIPart}),e.createFlow=e=>Ee.Z.composeKnot({content:n.createFlow(e),button:t.createFlow(e)})}(ti||(ti={}));var oi,ai,si,ri=n(36755);!function(e){let t,n;!function(e){e.UIPart=Ee.UI.Node.make((()=>s.createElement("div",{className:ri.sidebarLogo},s.createElement(Xt.K,{size:22}))))}(t=e.Header||(e.Header={})),function(e){const t=Ee.UI.Grid.make((({state:e,notify:t,slots:n})=>s.createElement(xe.F.Fragment,null,e.pipe(u.U((({expanded:e,canShowToggleExpandButton:i,onboardingAvailable:o})=>s.createElement("div",{className:ri.sidebarFooter,key:"footer"},o?n.hint:null,i?s.createElement(Ve.Tertiary,{name:"expand",title:e?Ye.replyPanel.collapse:Ye.replyPanel.expand,onClick:t({kind:"toggleExpanded",expanded:!e}),compact:!0},e?s.createElement(Te.Collapse,null):s.createElement(Te.Expand,null)):null)))))));e.UIPart=Ee.UI.Knot.make(t,{hint:Rn.UIPart}),e.createFlow=e=>Ee.Z.composeKnot({root:Ee.Z.fromSideEffect((t=>{e.actions.next({kind:re.Kind.toggleReplyPanelExpanded,expanded:t.expanded,docId:e.state.get().docId})}),e.state.view((e=>({expanded:e.expanded,canShowToggleExpandButton:e.hasOverflow,onboardingAvailable:e.onboardingAvailable})))),hint:Rn.createFlow(e.actions,"replyPanelFooter",e.state.get().docId)})}(n=e.Footer||(e.Footer={}))}(oi||(oi={})),function(e){const t=Ee.UI.Knot.make(hn,{sidebarContent:oi.Header.UIPart,sidebarFooter:oi.Footer.UIPart,mainHeader:ti.UIPart,mainContent:$n.UIPart});e.UIPart=Ee.UI.Composite.make(Ee.UI.Grid.make((({slots:e})=>s.createElement("div",{className:ni.fullReplyPanel},e.content))),t),e.createFlow=e=>Ee.Z.composeKnot({root:()=>w.of({width:"auto",height:"auto"}),sidebarContent:()=>w.of(null),sidebarFooter:oi.Footer.createFlow(e),mainHeader:ti.createFlow(e),mainContent:$n.createFlow(e)})}(ai||(ai={})),function(e){e.UIPart=Ee.UI.Union.make("kind",{hidden:Ee.UI.Node.empty,compact:Jn.UIPart,full:ai.UIPart}),e.createFlow=e=>Ee.Z.composeUnion({hidden:()=>w.of(null),compact:Jn.createFlow(e),full:ai.createFlow(e)},(()=>e.state.view((e=>({kind:e.kind})))))}(si||(si={}));var li,di=n(9305);!function(e){const t=Ee.UI.Grid.make((({notify:e,slots:t,state:n})=>s.createElement("div",{className:di.notification},t.content,s.createElement(xe.F.Fragment,null,n.pipe(u.U((({id:t})=>s.createElement(Ve.Tertiary,{name:"close-notification",onClick:e({kind:"dismiss",id:t}),className:di.closeButton,theme:"dark",compact:!0},s.createElement(Ge.JO.Close,null))))))))),n=e=>Ee.UI.Node.make((()=>s.createElement("div",{className:di.iconAndText},s.createElement(Te.NotificationInfo,{width:24,className:di.icon}),s.createElement("span",null,e)))),i=Ee.UI.Node.make((({state:e,notify:t})=>s.createElement(xe.F.Fragment,null,e.pipe(u.U((({item:e,id:n,docId:i,undoRemoveDone:o})=>s.createElement(s.Fragment,null,s.createElement("div",{className:di.iconAndText},s.createElement(Te.NotificationInfo,{width:24,className:di.icon}),s.createElement("span",null,o?Ye.toastNotifications.undoRemoveItem.undoDoneLabel:Ye.toastNotifications.undoRemoveItem[e.kind])),o?null:s.createElement(Ve.Primary,{name:"undo-button",onClick:t({kind:"undo",item:e,notificationId:n,docId:i}),className:di.undoButton,theme:"dark"},s.createElement(Ge.JO.Undo,{color:"black",className:di.undoIcon}),Ye.toastNotifications.undoRemoveItem.undoButton)))))))),o=Ee.UI.Union.make("kind",{textCopiedSuccess:n(Ye.toastNotifications.textCopiedSuccess),feedbackSubmittedSuccess:n(Ye.toastNotifications.feedbackSubmittedSuccess),undoRemoveItem:i});e.UIPart=Ee.UI.Knot.make(t,{content:o}),e.createFlow=function(e,t){return Ee.Z.composeKnot({root:Ee.Z.fromSideEffect((e=>t.next({kind:re.Kind.dismissNotification,notificationId:e.id})),e),content:Ee.Z.composeUnion({textCopiedSuccess:()=>w.of(null),feedbackSubmittedSuccess:()=>w.of(null),undoRemoveItem:Ee.Z.fromSideEffect((e=>{t.next({kind:re.Kind.undoRemoveItem,item:e.item,docId:e.docId,notificationId:e.notificationId})}),e.pipe(E.h(Dt.Model.is(Dt.Toast.Kind.undoRemoveItem))))},(()=>e))})}}(li||(li={}));var ci,ui=n(36890);!function(e){const t=Ee.UI.Grid.make((({slots:e})=>s.createElement(xe.F.div,{className:ui.notificationsContainer},e.notification))),n=Ee.UI.List.make(ne.Bk,li.UIPart);e.UIPart=Ee.UI.Composite.make(t,n),e.createFlow=function(e){return fn((t=>li.createFlow(e.state.view(ne.Ew((e=>e.id===t))).pipe(ze.oA),e.actions)),(()=>e.state.view(ne.UI((e=>e.id)))),ne.Bk)}}(ci||(ci={}));var mi,hi=n(34561);!function(e){e.UIPart=Ee.UI.Node.make((({notify:e,state:t,view:n})=>s.createElement("div",{className:hi.notification},s.createElement(xe.F.div,{className:hi.content},t.pipe(u.U((({kind:t,id:n})=>s.createElement(s.Fragment,null,s.createElement("h1",{className:hi.header},Ye.lastingNotifications[t].title),s.createElement("p",{className:hi.body},Ye.lastingNotifications[t].body),s.createElement(Ve.Primary,{name:"close-button",onClick:e({kind:"dismiss",id:n}),className:hi.closeButton},Ye.lastingNotifications[t].closeButton)))))),s.createElement(Xt.K,{size:56,className:hi.logo}),s.createElement(xe.F.Fragment,null,n("id").pipe(u.U((t=>s.createElement(Ve.Tertiary,{name:"close-notification",onClick:e({kind:"dismiss",id:t}),className:hi.iconCloseButton,compact:!0},s.createElement(Ge.JO.Close,{width:13})))))))))}(mi||(mi={}));var pi,gi=n(90787);!function(e){const t=Ee.UI.Grid.make((({slots:e})=>s.createElement(xe.F.div,{className:gi.notificationsContainer},e.notification)));e.UIPart=Ee.UI.Composite.make(t,Ee.UI.List.make(ne.Bk,mi.UIPart)),e.createFlow=function(e){return Ee.Z.fromSideEffect((t=>{if("dismiss"===t.action.kind)e.actions.next({kind:re.Kind.dismissNotification,notificationId:t.action.id});else(0,ue.L0)(t.action.kind)}),e.state)}}(pi||(pi={}));var fi=n(34311);class bi{constructor(e){this._annotationsStateService=e}getHoveredStateBehavior(e){return Z.aj([this._annotationsStateService.hoveredAnnotation,this._annotationsStateService.activeAnnotation]).pipe(u.U((([t,n])=>t&&t.highlightIds.includes(e)||n&&n.highlightIds.includes(e)?fi.pc.hovered:fi.pc.none)))}}class ki extends N{constructor(e,t=l.Y.create(ki.name)){super(e,t),this.hoveredAnnotation=this._rawHoveredAnnotation.pipe(c.w((e=>e?p.T(this._offByUpdatedGeometry(e),this._options.offByTextPositionChange||g.E).pipe(M.b((()=>this._log.trace("Active state was overriden by text or geometry change"))),b.q(1),k.O(e)):w.of(null))),d.skipBy(i.getEqById()),d.shareReplay({bufferSize:1,refCount:!0})),this.activeAnnotation=this.hoveredAnnotation}}var wi=n(93356),Ii=n(76331),yi=n(40327),_i=n(10166),Ci=n(4432);class vi{constructor(e=!0){this._collateLines=e}create(e,t){return{getRects:()=>{var n;const i=[];let a,s=e.start,r=!1;do{const o=t.getFragmentAtOrBeforeOffset(s);if(o&&a!==s){a=s;if(null===(n=o.node.textContent)||void 0===n?void 0:n.replace(/\s/g,"")){const n=Ci.M.createRange(t,s,Math.min(o.endOffset,e.end));n&&i.push(...Array.from(n.getClientRects()))}s=o.endOffset===s?o.endOffset+1:o.endOffset}else r=!0}while(s<e.end&&!r);return(0,yi.pipe)(i,_i.e,this._collateLines?_i.y:o.yR,_e.UI(y.Pf.create))}}}getClientRects(e){return e.getRects()}getIsInvalid(e){return!1}getIsConsistent(e,t,n){return!0}dispose(e){}}class Ei{constructor(e,t,n,i,o,a=(e=>new ki(e)),s=!0){var r,d,c,u;this._textNode=e,this._textMap=t,this._createLayout=n,this._createCardController=i,this._createAnnotationsStateService=a,this._collateLines=s,this._subscriptions=new D.w,this._geometryProvider=new vi(this._collateLines),this._layout=this._createLayout(this._textNode),this.highlightsCollection=new Ii.C(this._geometryProvider,this._layout.createGeometryLayout(),(()=>this._textMap),(0,wi.u)(),(0,fi.WF)(this._layout.textNode)),this._activeAnnotationState=Y.h.create(null),this._controller=this._createCardController(this._activeAnnotationState,this._layout),this._annotationsStateService=this._controller?this._createAnnotationsStateService({textNode:this._textNode,textNodeLayout:this._layout.textNode,mouseData:this._layout.mouse,highlightGeometry:this.highlightsCollection,cardHovered:this._controller.cardHovered,cardDismissed:this._controller.cardDismissed,getCurrentCardAnnotationState:()=>this._activeAnnotationState.get(),offByTextPositionChange:(c=this._layout.textNode,u=l.Y.create(ki.name),p.T(c.rect.changes.pipe(M.b((()=>u.trace("Text field position, size has been changed")))),c.scroll.changes.pipe(M.b((()=>u.trace("Text field scroll has been changed")))),m.R(self,"scroll").pipe(M.b((()=>u.trace("Window scroll detected"))))).pipe(b.q(1),f.h(null),U.B()))}):null,this.hoveredAnnotation=(null===(r=this._annotationsStateService)||void 0===r?void 0:r.hoveredAnnotation)||g.E,this.activeAnnotation=this._activeAnnotationState,this._annotationsStateService&&this._subscriptions.add(this._annotationsStateService.activeAnnotation.subscribe(V.wW(this._activeAnnotationState)));const h=this._annotationsStateService?new bi(this._annotationsStateService):null,k=o(this._layout,this.highlightsCollection,(null===(d=this._controller)||void 0===d?void 0:d.view)||w.of(null),(e=>(null==h?void 0:h.getHoveredStateBehavior(e))||w.of(fi.pc.none))),I=this._layout.render(k,{});this._subscriptions.add((()=>I.dispose()))}dispose(){var e;null===(e=this._controller)||void 0===e||e.dispose(),this._layout.dispose(),this.highlightsCollection.dispose(),this._subscriptions.unsubscribe()}}var Mi,Ui=n(19723),Si=n(48424),Ni=n(95300),xi=n(85321),Pi=n(43675),Fi=n(92843);!function(e){e.eq=S.Uz((e=>({annotations:e.annotations,docId:e.docId,textNode:e.textNode})))(S.MW({docId:S.yv,annotations:_e.Eh(Ui.q.eq),textNode:S.w4}))}(Mi||(Mi={}));class Ki{constructor(e,t,n,i,a=l.Y.create("gmail.annotationsManager")){this._messagesRoot=t,this._logger=a,this._subscriptions=new D.w,this._currentAnnotations=new Map,this._state=new Map,this._textNodeToDocId=new WeakMap,this._annotationIdsForDocId=new Map,this._annotationToHighlightId=new Map,this._hiddenDocs=new WeakMap,this._hideActionSubject=new $e.xQ,this._intersectionObserver=this._initIntersectionObserver(),this._hoveredAnnotation=new $e.xQ,this._activeAnnotation=new Ni.X(null),this.hoveredAnnotation=this._hoveredAnnotation.asObservable(),this.activeAnnotation=this._activeAnnotation.asObservable();const s=p.T(e.pipe(k.O(new Map),Jt.G(),u.U((([e,t])=>(0,o.zG)(Pi.yi(Mi.eq)(e,t),Fi.v.reduce([],((e,{docId:t})=>e.concat({kind:"remove",docId:t})),((e,t,n)=>Si.EN.eq.equals(t.textNode,n.textNode)?e.concat({kind:"update",prevAnnotations:t.annotations,...n}):e.concat({kind:"remove",docId:t.docId},{kind:"add",...n})),((e,t)=>e.concat({kind:"add",...t})))))),xi.zg(o.yR)),this._hideActionSubject);this._subscriptions.add(s.subscribe((e=>{const t=this._state.get(e.docId);if(t&&"remove"===e.kind)(0,o.zG)(me.fromNullable(this._annotationIdsForDocId.get(e.docId)),ce.bw((e=>{for(const t of e.values())this._currentAnnotations.delete(t),this._annotationToHighlightId.delete(t)}))),this._annotationIdsForDocId.delete(e.docId),this._textNodeToDocId.delete(t.message.textNode.node),this._state.delete(e.docId),t.disposables.forEach((e=>e.dispose())),this._logger.trace(`Annotations for ${e.docId} cleared`);else if("add"===e.kind||"update"===e.kind&&!t){const t=new $e.xQ,a=n(e.textNode.node,e.textMap,e.docId,(e=>me.fromNullable(this._currentAnnotations.get(e))),t),s=a.hoveredAnnotation.pipe(M.b((e=>this._hoveredAnnotation.next(e)))).subscribe(),r=a.activeAnnotation.pipe(M.b((e=>this._activeAnnotation.next(e)))).subscribe();this._intersectionObserver.observe(e.textNode.node),this._state.set(e.docId,{message:e,wiring:a,disposables:[{dispose:()=>s.unsubscribe()},{dispose:()=>r.unsubscribe()},{dispose:()=>this._intersectionObserver.unobserve(e.textNode.node)},{dispose:()=>t.next()},a]}),this._textNodeToDocId.set(e.textNode.node,e.docId);const l=(0,o.zG)(me.fromNullable(this._annotationIdsForDocId.get(e.docId)),me.getOrElse((()=>{const t=new Set;return this._annotationIdsForDocId.set(e.docId,t),t})));e.annotations.forEach((e=>{const t=fi.y$.Id.create(e.id);this._annotationToHighlightId.set(e.id,t),this._logger.trace("Adding annotation highlight",t),this._currentAnnotations.set(e.id,e),l.add(e.id),a.highlightsCollection.addHighlight(t,{start:e.span.s,end:e.span.e},i(t,e))}))}else if(t&&"update"===e.kind){const{left:n,right:a}=(0,o.zG)(Pi.yi(Ui.q.eq)(new Map(e.prevAnnotations.map((e=>[e.id,e]))),new Map(e.annotations.map((e=>[e.id,e])))),Fi.v.reduce({left:[],right:[]},((e,t)=>({...e,left:e.left.concat(t)})),((e,t,n)=>({left:e.left.concat(t),right:e.right.concat(n)})),((e,t)=>({...e,right:e.right.concat(t)})))),s=(0,o.zG)(me.fromNullable(this._annotationIdsForDocId.get(e.docId)),me.getOrElse((()=>{const t=new Set;return this._annotationIdsForDocId.set(e.docId,t),t})));n.forEach((e=>{s.delete(e.id),this._currentAnnotations.delete(e.id)}));const r=(0,o.zG)(n,_e.DZ((e=>me.fromNullable(this._annotationToHighlightId.get(e.id)))));t.wiring.highlightsCollection.removeHighlights(r),a.forEach((e=>{const n=fi.y$.Id.create(e.id);this._annotationToHighlightId.set(e.id,n),this._logger.trace("Adding annotation highlight",n),this._currentAnnotations.set(e.id,e),s.add(e.id),t.wiring.highlightsCollection.addHighlight(n,{start:e.span.s,end:e.span.e},i(n,e))}))}})))}_initIntersectionObserver(){return new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?(0,o.zG)(me.fromNullable(this._hiddenDocs.get(e.target)),ce.bw((t=>{this._hiddenDocs.delete(e.target),this._hideActionSubject.next({kind:"add",...t})}))):(0,o.zG)(me.fromNullable(this._textNodeToDocId.get(e.target)),me.chain((e=>me.fromNullable(this._state.get(e)))),ce.bw((({message:t})=>{const{docId:n,textNode:i}=t;this._logger.debug(`Message ${n} hidden, clearing annotations`),this._hideActionSubject.next({kind:"remove",docId:n}),this._hiddenDocs.set(e.target,t),this._intersectionObserver.observe(i.node)})))}))}),{root:this._messagesRoot})}dispose(){this._subscriptions.unsubscribe();for(const{disposables:e}of this._state.values())e.forEach((e=>e.dispose()));this._currentAnnotations.clear(),this._state.clear(),this._annotationIdsForDocId.clear(),this._intersectionObserver.disconnect()}}var Ri=n(59468),Li=n(89068),Bi=n(91224),Ai=n(52965);class Ti{constructor(e,t,n=2e3){this._openReplyFieldTimeout=n,this._subscriptions=new D.w,this._expandedMessageNodes=Y.h.create(new Map),this._replyFields=Y.h.create(new Map),this._subscriptions.add(e.pipe(u.U((0,o.ls)(ae.ei("messages"),a.UI(ae.ei("messageNode"))))).subscribe(V.wW(this._expandedMessageNodes))),this._subscriptions.add(t.subscribe(V.wW(this._replyFields)))}replyToMessage(e,t){return new vn.y((t=>t.next(me.fromNullable(this._replyFields.get().get(e))))).pipe(c.w(me.fold((()=>(0,o.zG)(this._openReplyField(e),he.g_((e=>w.of(he.t$(e))),(()=>this._replyFields.pipe(u.U(a.P5(P.eo.eq)(e)),ze.oA,b.q(1),u.U(he.F2),Li.V(this._openReplyFieldTimeout),Bi.K((()=>w.of(he.t$(new Error("Timed out opening reply field")))))))))),(e=>w.of(he.F2(e))))),u.U(he.UI((e=>(e.focus(),t?this._insertQuote(e,t):void 0)))))}_openReplyField(e){return(0,o.zG)(he.ij(new Error(`Message ${e} not expanded`))(this._expandedMessageNodes.get().get(e)),he.tS((e=>he.ij(new Error("No reply button found"))(e.querySelector(Ai.gj)))),he.Y$((e=>e instanceof HTMLElement),(()=>new Error("Button is not an HTMLElement"))),he.UI((e=>{e.click()})))}_insertQuote(e,t){const n=self.getSelection();if(n){const i=n.getRangeAt(0);i.collapse(!1);const o="<br>"===e.innerHTML?null:document.createElement("br"),a=document.createElement("blockquote");a.className="gmail_quote",a.style.margin="0px 0px 0px 0.8ex",a.style.borderLeft="1px solid rgb(204, 204, 204)",a.style.paddingLeft="1ex",a.innerHTML=Ri.V.renderToHtml(t),i.insertNode(o||a),o&&o.insertAdjacentElement("afterend",a);const s=document.createElement("br"),r=document.createElement("br");a.insertAdjacentElement("afterend",r),a.insertAdjacentElement("afterend",s),i.setStartAfter(s),i.collapse(!0),n.removeAllRanges(),n.addRange(i)}}dispose(){this._subscriptions.unsubscribe()}}var Oi=n(84017),Gi=n(52513),zi=n(41263),Hi=n(41703),Vi=n(3225);const Di=({heightOffset:e=0,hoverState:t,annotation:n,rects:i,id:o})=>s.createElement(s.Fragment,null,i.map(((a,r)=>{const l=i.length>1?`${o}-${r}`:o;return s.createElement(xe.F.div,{key:l,"data-key":l,"data-grammarly-part":"highlight",style:t.pipe(u.U((t=>function(e,t){return t?Yi(e,Zi(e)):e}({...a,height:Math.max(0,a.height+e)},t===fi.pc.hovered)))),className:Vi.highlight},s.createElement(xe.F.div,{className:t.pipe(u.U((e=>function(e,t){switch(e.apiKind){case oe.j.Kind.readerDebugAnnotation:return(0,Ne.Sh)(Vi.background,Vi.debug).className;case oe.j.Kind.readerMainPoint:case oe.j.Kind.readerActionItem:return(0,Ne.Sh)(Vi.background,t&&Vi.hovered).className;default:(0,ue.vE)(e.apiKind)}}(n,e===fi.pc.hovered))))}))})));function Zi(e){return.1*e.height}function Yi(e,t){return{top:e.top-t,left:e.left-t,width:e.width+2*t,height:e.height+2*t}}const qi=({highlights:e,getHoverState:t})=>s.createElement(Hi.Y,{key:"reader-highlights",highlightHeightOffset:0,highlights:e.geometry.view((e=>Array.from(e.values()))),getHoverState:t,highlightRenderer:(e,t,n)=>s.createElement(Di,{key:e.meta.highlightId,id:e.meta.highlightId,rects:e.rects,heightOffset:n,hoverState:t.pipe(k.O(fi.pc.none),F.x()),annotation:e.meta.annotation})});var ji=n(86620),Qi=n(92132),Wi=n(87965),Ji=n(48189),Xi=n(50663),$i=n(49468),eo=n(33678),to=n(15073),no=n(42103),io=n(64078);const oo=({env:e,children:t,className:n})=>s.createElement($i.o,{className:n},s.createElement(Wi.p,null,s.createElement(eo.a.Context.Provider,{value:new ji.C(e)},s.createElement(Qi.Q,{remSize:w.of(16),setter:e=>to.u.setRootCssVar(document.documentElement,e)},s.createElement(no.G.DefaultProvider,null,t,s.createElement(Ji.p,{regular:!0,bold:!0}),s.createElement(Xi.G,null),s.createElement(io.X,null)))))),ao=({env:e,children:t,className:n})=>s.createElement(zi.L,{chunkName:"readerGmailThreadIntegration"},s.createElement(oo,{env:e,className:n},t));class so{constructor(e,t,n,i,o){this._layout=e,this._highlights=t,this._annotationCards=n,this._getHoveredStateBehavior=i,this._getEnv=o,this.highlights=()=>s.createElement(zi.L,{chunkName:"readerGmailThreadIntegration"},s.createElement(xe.F.div,{style:this._layout.textNode.scrollSize.behavior.pipe(u.U((e=>({height:e.height,width:e.width}))))},s.createElement(qi,{highlights:this._highlights,getHoverState:e=>this._getHoveredStateBehavior(e)}))),this.innerElements=()=>s.createElement(ao,{env:this._getEnv()},s.createElement(Gi.L,null),s.createElement(xe.F.Fragment,null,this._annotationCards))}}var ro,lo=n(13116),co=n(598),uo=n(93497),mo=n(2768);class ho{constructor(e){this._actions=e,this._subscription=new D.w}addEffects(...e){for(const t of e)this._subscription.add(t(this._actions).subscribe((e=>this._actions.next(e))))}dispose(){this._subscription.unsubscribe()}}function po(e,t,n){return Y.h.combine(e.highlights,e.followUps,e.keyPoints,t.state.view("thread"),t.state.view("docs"),n,((e,t,n,i,s,r)=>(0,o.zG)(e,a.Su(((e,a)=>(0,o.zG)(me.fromNullable(r.expandedMessages.get(e)),me.chain(de.zk),me.map((e=>({docId:e.id,textMap:e.textMap,textNode:e.bodyNode,annotations:a}))),me.filter((()=>(0,o.zG)(me.fromNullable(s.get(e)),me.fold(o.jv,(a=>function(e,t,n,i){return!(0,o.zG)(t.highlightsToggledByUser,ce.FX(!1))&&(0,o.zG)(Ce(e,t,n,i,!0),ce.FX(!0))}(i,a,t.has(e),n.has(e)))))))))),a.DZ(o.yR))))}!function(e){e.tracking=function(e,t){return(0,o.ls)(le.ofKind(e),M.b(t),co.c(g.E))},e.logAction=function(e){return(0,o.ls)(M.b((t=>e.trace(`[${t.kind}]`,ae.CE(t,"kind")))),co.c(g.E))},e.replyToItem=function(e){return(0,o.ls)(le.ofKind(re.Kind.replyToItem),c.w((({docId:t,item:n})=>e.replyToMessage(t,n.delta))),u.U(he.g_((e=>({kind:re.Kind.replyToItemResult,result:he.t$(e)})),(()=>({kind:re.Kind.replyToItemResult,result:he.F2(void 0)})))))},e.reply=function(e){return(0,o.ls)(le.ofKind(re.Kind.reply),c.w((({docId:t})=>e.replyToMessage(t))),u.U(he.g_((e=>({kind:re.Kind.replyResult,result:he.t$(e)})),(()=>({kind:re.Kind.replyResult,result:he.F2(void 0)})))))},e.copyItem=function(){return(0,o.ls)(le.ofKind(re.Kind.copyItem),c.w((({item:e})=>function(e,t=self){return new vn.y((n=>{var i,o;(null===(o=null===(i=t.navigator)||void 0===i?void 0:i.clipboard)||void 0===o?void 0:o.writeText)?t.navigator.clipboard.writeText(e).then((()=>n.next(he.F2(void 0)))).catch((e=>n.next(he.t$(new Error(String(e)))))):n.next(he.t$(new Error("The Clipboard API is not available.")))}))}((0,kn.l)(e.delta,"")))),u.U(he.g_((e=>({kind:re.Kind.copyItemResult,result:he.t$(e)})),(()=>({kind:re.Kind.copyItemResult,result:he.F2(void 0)})))))},e.closeRecapBarPopupOnHighlightMenuShow=function(){return(0,o.ls)(E.h(re.is(re.Kind.setHighlightMenuVisibleFor)),u.U(ae.ei("item")),ze.oA,u.U((e=>({kind:re.Kind.setRecapBarPopup,popupKind:me.none,docId:e.docId,source:"api"}))))},e.closeRecapBarPopupOnItemMenuShow=function(){return(0,o.ls)(le.ofKind(re.Kind.setItemMenuVisibleFor),E.h((({item:e,uiMode:t})=>me.isSome(e)&&"replyPanel"===t)),u.U((({docId:e})=>({kind:re.Kind.setRecapBarPopup,popupKind:me.none,docId:e,source:"api"}))))},e.closeHighlightMenuOnExternalPopupShow=function(){return(0,o.ls)(E.h((0,kt.Kg)((0,kt.W9)(re.is(re.Kind.setRecapBarPopup),(({popupKind:e})=>me.isSome(e))),(0,kt.W9)(re.is(re.Kind.setItemMenuVisibleFor),(({item:e})=>me.isSome(e))))),u.U((({docId:e})=>({kind:re.Kind.setHighlightMenuVisibleFor,item:me.none,docId:e,source:"api"}))))},e.closeReplyPanelItemMenuOnExternalPopupShow=function(){return(0,o.ls)(le.ofKind(re.Kind.setRecapBarPopup),E.h((({popupKind:e})=>me.isSome(e))),u.U((({docId:e})=>({kind:re.Kind.setItemMenuVisibleFor,item:me.none,docId:e,uiMode:"replyPanel",source:"api"}))))},e.toggleActiveHighlightMenu=function(e){return()=>(e||g.E).pipe(uo.n((e=>null===e)),d.skipBy(i.getEqById()),u.U((e=>({kind:re.Kind.setHighlightMenuVisibleFor,item:me.fromNullable(null==e?void 0:e.annotation),source:"user"}))))},e.openModalsOnMenuItemClick=function(){return(0,o.ls)(le.ofKind(re.Kind.recapMenuItemClick),u.U((({item:e,docId:t})=>{switch(e){case"about":return me.some({kind:re.Kind.aboutRecapModal,docId:t,source:"settingsMenu"});case"feedback":return me.some({kind:re.Kind.genericFeedbackModal,docId:t});case"turnOff":return me.some({kind:re.Kind.turnOffRecapModal,docId:t});case"hide":case"show":return me.none;default:(0,ue.L0)(e)}})),ze.oA)},e.showCopyNotification=function(){return(0,o.ls)(le.ofKind(re.Kind.copyItemResult),E.h((({result:e})=>he.tO(e))),u.U((()=>({kind:re.Kind.showNotification,notification:{kind:Dt.Toast.Kind.textCopiedSuccess}}))))},e.showUndoItemRemovedNotification=function(){return(0,o.ls)(le.ofKind(re.Kind.removeItem),u.U((({item:e,docId:t})=>({kind:re.Kind.showNotification,notification:{kind:Dt.Toast.Kind.undoRemoveItem,item:e,docId:t}}))))},e.showItemFeedbackNotification=function(){return(0,o.ls)(le.ofKind(re.Kind.itemFeedbackModalResult),E.h((({result:e})=>"submit"===e.kind)),u.U((()=>({kind:re.Kind.showNotification,notification:{kind:Dt.Toast.Kind.feedbackSubmittedSuccess}}))))},e.showGenericFeedbackNotification=function(){return(0,o.ls)(le.ofKind(re.Kind.genericFeedbackModalResult),E.h((({result:e})=>"submit"===e.kind)),u.U((()=>({kind:re.Kind.showNotification,notification:{kind:Dt.Toast.Kind.feedbackSubmittedSuccess}}))))},e.showTurnoffNotification=function(){return(0,o.ls)(le.ofKind(re.Kind.turnOffRecapModalResult),E.h((({result:e})=>"turnOffRecap"===e)),u.U((()=>({kind:re.Kind.showNotification,notification:{kind:Dt.Lasting.Kind.turnOffRecap}}))))},e.showOptInDismissNotification=function(){return(0,o.ls)(le.ofKind(re.Kind.optInDismissModalResult),u.U(ae.ei("result")),E.h((e=>"showLaterYes"===e||"showLaterNo"===e)),u.U((e=>({kind:re.Kind.showNotification,notification:{kind:"showLaterYes"===e?Dt.Lasting.Kind.optInDismissShowLaterYes:"showLaterNo"===e?Dt.Lasting.Kind.optInDismissShowLaterNo:(0,ue.L0)(e)}}))))},e.highlightMenuUnmounted=function(e,t,n){return()=>t.pipe(mo.R(n),f.h({kind:re.Kind.onboardingAnchorUnmounted,stepNames:["highlightMenu"],docId:e}))},e.firstHighlightMounted=function(e,t,n,i){return()=>t.geometry.pipe(mo.R(i),E.h((e=>e.size>0)),u.U((e=>(0,o.zG)(Array.from(e.values()),_e.Ew((({rects:e})=>e.some((e=>e.width>40)))),me.map(ae.ei("rects")),me.chain(_e.Ew((e=>e.width>40)))))),ze.oA,b.q(1),u.U((t=>({kind:re.Kind.onboardingAnchorMounted,stepName:"firstHighlight",docId:e,anchorNode:{getBoundingClientRect:()=>{const e=(0,lo.Z)(t,n.textNode.rect.getCurrent().client,n.textNode.scroll.getCurrent());return DOMRect.fromRect({x:e.left+40,y:e.top,width:0,height:e.height})}}}))))},e.closeItemMenuOnScroll=function(){return(0,o.ls)(le.ofKind(re.Kind.panelScroll),u.U((({source:e,docId:t})=>({kind:re.Kind.setItemMenuVisibleFor,item:me.none,uiMode:e,docId:t,source:"api"}))))},e.optInDismiss=function(e){return(0,o.ls)(le.ofKind(re.Kind.optInDismissModalResult),M.b((({result:t})=>{switch(t){case"dismiss":break;case"showLaterYes":e.readerOptOut({hoursToWaitBeforeShowingAgain:24});break;case"showLaterNo":e.readerOptOut({hoursToWaitBeforeShowingAgain:1440});break;default:(0,ue.L0)(t)}})),co.c(g.E))},e.optInTryItOut=function(e){return(0,o.ls)(le.ofKind(re.Kind.optInTryItOutModalResult),M.b((({result:t})=>{switch(t){case"notNow":case"dismiss":case"decline":break;case"continue":e.readerOptIn();break;default:(0,ue.L0)(t)}})),co.c(g.E))},e.turnOffRecap=function(e){return(0,o.ls)(le.ofKind(re.Kind.turnOffRecapModalResult),M.b((({result:t})=>{switch(t){case"dismiss":case"hideRecap":break;case"turnOffRecap":e.readerToggleFeature({enabled:!1});break;default:(0,ue.L0)(t)}})),co.c(g.E))},e.showOnboardingOnTakeATour=function(){return(0,o.ls)(le.ofKind(re.Kind.aboutRecapModalResult),E.h((({result:e})=>"takeATour"===e)),u.U((({docId:e})=>({kind:re.Kind.onboardingSetKind,onboardingKind:me.some("general"),docId:e}))))}}(ro||(ro={}));var go,fo=n(19019),bo=n(66319);!function(e){e.eq=S.MW({textField:S.w4,formEl:S.w4,buttonEl:S.w4,messageId:P.eo.eq,initTime:S.lr,startTime:S.lr})}(go||(go={}));class ko{constructor(e,t,n,i){this.actions=e,this._itemsManager=t,this._activeAnnotation=n,this._layout=i,this._state=Y.h.create(me.none),this._subscriptions=new D.w,this.state=Y.h.combine(this._state,this._itemsManager.highlights,((e,t)=>(0,o.zG)(e,me.chain((e=>(0,o.zG)(me.fromNullable(t.get(e.docId)),me.chain(ne.Ew((t=>t.id===e.item.id))),me.map((t=>({item:t,docId:e.docId,highlightNode:e.highlightNode,hovered:e.hovered,feedbackMenuPlacement:e.feedbackMenuPlacement,feedback:he.Yo((()=>e.feedbackMenuActive))(t.feedback)}))))))))).view(),this._subscriptions.add(this._handleSetHighlightMenuVisibleFor()),this._subscriptions.add(this._handleToggleHighlightFeedbackMenu()),this._subscriptions.add(this._handleHighlightMenuActionClick()),this._subscriptions.add(this._handleMenuHovered())}onPlacementChange(e){this._state.modify(me.map((t=>({...t,feedbackMenuPlacement:(0,o.zG)(e,me.map((e=>"top"===e?"top-end":"bottom"===e?"bottom-end":e)))}))))}_handleSetHighlightMenuVisibleFor(){this.actions.pipe(le.ofKind(re.Kind.setHighlightMenuVisibleFor),u.U(ae.ei("item")),h.M(this._activeAnnotation),M.b((([e,t])=>(0,o.zG)(Ie.Y(me.option)({item:e,activeAnnotation:me.fromNullable(t)}),me.fold((()=>this._state.set(me.none)),(({item:e,activeAnnotation:t})=>this._state.modify((n=>me.some({item:e,docId:e.docId,hovered:!1,highlightNode:{getBoundingClientRect:()=>this._getTargetBoundingClientRect(t)},feedbackMenuActive:!1,feedbackMenuPlacement:(0,o.zG)(n,me.chain(ae.ei("feedbackMenuPlacement")))}))))))))).subscribe()}_handleToggleHighlightFeedbackMenu(){return this.actions.pipe(le.ofKind(re.Kind.toggleItemFeedbackMenu),le.ofUIMode("highlights"),M.b((({menuOpen:e})=>this._state.modify(me.map((t=>({...t,feedbackMenuActive:e}))))))).subscribe()}_handleHighlightMenuActionClick(){return this.actions.pipe(E.h((0,kt.Kg)(re.is(re.Kind.copyItem),re.is(re.Kind.replyToItem),re.is(re.Kind.removeItem),re.is(re.Kind.itemFeedback),re.is(re.Kind.setItemChecked))),le.ofUIMode("highlights"),M.b((()=>this._state.set(me.none)))).subscribe()}_handleMenuHovered(){return this.actions.pipe(le.ofKind(re.Kind.highlightMenuHovered)).subscribe((({hovered:e})=>this._state.modify(me.map((t=>({...t,hovered:e}))))))}_getTargetBoundingClientRect(e){var t,n;const i=null!==(n=null===(t=this._layout.mouse.get().offset)||void 0===t?void 0:t.left)&&void 0!==n?n:e.activeHighlightRect.left+.5*e.activeHighlightRect.width,a=e.highlightRects.filter((e=>e.left<=i&&e.left+e.width>=i)),s=Math.min(...a.map((e=>e.top))),r=Math.max(...a.map((e=>e.top+e.height))),l=(0,lo.Z)(y.Wm.create({left:i,width:0,top:s,height:r-s}),this._layout.textNode.rect.getCurrent().client,this._layout.textNode.scroll.getCurrent());return DOMRect.fromRect((0,o.zG)(Yi(l,Zi(e.activeHighlightRect)),(e=>({x:e.left,y:e.top,width:e.width,height:e.height}))))}dispose(){this._subscriptions.unsubscribe()}}var wo=n(56060),Io=n(68282),yo=n(84429);const _o=({onHover:e=o.Q1,onPlacementChange:t=o.Q1,referenceElement:n,children:i,onPopperMount:a=o.Q1})=>{const r=s.useRef(null),[l,d]=s.useState(null),[c,u]=s.useState(null),m=(0,ln.sJ)();s.useEffect((()=>{l&&a(l)}),[l]);const{styles:h,attributes:p,state:g}=(0,Me.D)(n,l,{placement:"top",modifiers:[{name:"preventOverflow",options:{padding:8}},{name:"offset",options:{offset:[0,Io.uy]}},{name:"arrow",options:{element:c,padding:5}},{name:"eventListeners",enabled:!1},m]}),f=(null==g?void 0:g.placement)||null;return s.useEffect((()=>{f!==r.current&&(r.current=f,t(me.fromNullable(f)))})),s.createElement("div",{ref:d,style:{...h.popper,zIndex:1},className:yo.popover,onMouseMove:()=>null==e?void 0:e(!0),onMouseLeave:()=>null==e?void 0:e(!1),...p.popper},i,s.createElement(Io.QH,{ref:u,style:h.arrow,placement:f}))};var Co;!function(e){const t=Ee.UI.Grid.make((({state:e,slots:t,notify:n})=>s.createElement(xe.F.Fragment,null,e.pipe(u.U((({highlightNode:e,hovered:i,docId:o})=>s.createElement(_o,{key:"highlight-menu",referenceElement:e,onHover:e=>i!==e&&n({kind:"hovered",hovered:e})(),onPlacementChange:e=>n({kind:"placementChange",placement:e})(),onPopperMount:e=>n({kind:"mount",node:e,docId:o})()},s.createElement(Cn,null,s.createElement(xe.F.Fragment,null,t.menu),s.createElement(en.u,{title:Ye.highlightMenu.logoTooltip},s.createElement("div",{className:wo.logoContainer},s.createElement(Xt.K,{size:16}))))))))))),n=Nn.getUIPart(Ye.highlightMenu.actions,Te.InlineHighlightsDisabled),i=Ee.UI.Knot.make(t,{menu:n});e.UIPart=Ee.UI.Union.asOption(i),e.createFlow=function(e){return Ee.Z.composeUnion({None:()=>w.of(null),Some:Ee.Z.composeKnot({value:Ee.Z.composeKnot({root:Ee.Z.fromSideEffect((t=>{switch(t.kind){case"hovered":e.actions.next({kind:re.Kind.highlightMenuHovered,hovered:t.hovered});break;case"placementChange":e.onPlacementChange(t.placement);break;case"mount":e.actions.next({kind:re.Kind.onboardingAnchorMounted,stepName:"highlightMenu",anchorNode:t.node,docId:t.docId});break;default:(0,ue.L0)(t)}}),e.state.view(me.map(ae.H6("highlightNode","hovered","docId"))).pipe(ze.oA)),menu:Ee.Z.fromSideEffect((0,o.ls)(Nn.toReaderAction("highlights"),(t=>e.actions.next(t))),e.state.pipe(ze.oA,u.U((e=>({item:e.item,docId:e.docId,feedback:e.feedback,feedbackMenuPlacement:e.feedbackMenuPlacement,disablePositionUpdates:!0,uiMode:"highlights"})))))})})},(()=>e.state))}}(Co||(Co={}));var vo=n(55935);class Eo{constructor(e,t,n,i){this._actions=e,this._itemsManager=t,this._layout=n,this._activeAnnotation=i,this._subscriptions=new D.w,this._highlightMenuViewModel=new ko(this._actions,this._itemsManager,this._activeAnnotation,this._layout),this.cardHovered=this._highlightMenuViewModel.state.view(me.fold(o.jv,ae.ei("hovered"))),this.cardDismissed=this._highlightMenuViewModel.state.view(me.isNone).pipe(vo.T(1),E.h(H.fQ)),this.view=w.of(Ee.UI.mount(Co.UIPart,Co.createFlow(this._highlightMenuViewModel)))}dispose(){this._subscriptions.unsubscribe(),this._highlightMenuViewModel.dispose()}}class Mo{constructor(e,t,n,i,a,r,d,c,m,h,p,g,f=l.Y.create("gmail.reader.panelInjection")){this._getEnv=g,this._logger=f,this._subs=new D.w,this._recapBarInjections=new Map,this._replyFormInjections=new Map,this._subs.add(e.pipe(k.O(fo.Of.empty()),Jt.G(),u.U((([e,t])=>({...t,updated:So(e.updated,e.messages,t.updated,t.messages)}))),E.h((e=>e.added.size>0||e.updated.size>0||e.removed.size>0)),M.b((({added:e,updated:t,removed:a,messages:r})=>{t.forEach((e=>{var t;null===(t=this._recapBarInjections.get(e))||void 0===t||t.dispose(),this._recapBarInjections.delete(e),this._logger.trace("Recap bar disposed: message updated")})),a.forEach((e=>{var t;i(e),null===(t=this._recapBarInjections.get(e))||void 0===t||t.dispose(),this._recapBarInjections.delete(e),this._logger.trace("Recap bar disposed: message removed")}));for(const i of r.values())(0,o.zG)(i,me.fromPredicate((n=>e.has(n.id)||t.has(n.id))),me.chain(Uo),me.chain((e=>Ie.Y(me.option)({injectBefore:(0,o.zG)(me.fromNullable(e.firstElementChild),me.filter((e=>e instanceof HTMLElement))),injectionParent:me.some(e)}))),ce.bw((({injectBefore:e,injectionParent:t})=>{var o;const a=n(i.id),r=T.VB.get({monitorAs:"reader-recap-bar"}).inject(O.EM.fromDocument(e.ownerDocument,"grammarly-extension"),(n=>t.insertBefore(n,e)),(()=>s.createElement(ao,{env:this._getEnv()},s.createElement("div",{style:{margin:"4px -6px 0 0"}},s.createElement(a,null)))));null===(o=this._recapBarInjections.get(i.id))||void 0===o||o.dispose(),this._recapBarInjections.set(i.id,r),this._logger.trace("Recap bar injected")})))}))).subscribe()),this._subs.add(t.pipe(E.h((e=>e.added.size>0||e.updated.size>0||e.removed.size>0)),M.b((({added:e,updated:t,removed:n,forms:i})=>{t.forEach((e=>{var t;null===(t=this._replyFormInjections.get(e))||void 0===t||t.dispose(),this._replyFormInjections.delete(e),this._logger.trace("Reply panel disposed: form updated")})),n.forEach((e=>{var t;r(e),null===(t=this._replyFormInjections.get(e))||void 0===t||t.dispose(),this._replyFormInjections.delete(e),this._logger.trace("Reply panel disposed: form removed")}));for(const n of i.values())(0,o.zG)(n,me.fromPredicate((({messageId:n})=>e.has(n)||t.has(n))),me.chain((({formEl:e,messageId:t})=>Ie.Y(me.option)({insertBefore:me.fromNullable(e.closest("table[role=presentation]")),messageId:me.some(t)}))),me.chain((({insertBefore:e,messageId:t})=>Ie.Y(me.option)({injectBefore:me.some(e),injectionParent:(0,o.zG)(me.fromNullable(e.parentElement),me.filter((e=>e instanceof HTMLElement))),messageId:me.some(t)}))),ce.bw((({injectBefore:e,injectionParent:t,messageId:n})=>{var i;const o=a(n),r=T.VB.get({monitorAs:"reader-reply-panel"}).inject(O.EM.fromDocument(e.ownerDocument,"grammarly-extension"),(n=>t.insertBefore(n,e)),(()=>s.createElement(ao,{env:this._getEnv()},s.createElement("div",{style:{margin:"0 0 8px 48px"}},s.createElement(o,null)))));null===(i=this._replyFormInjections.get(n))||void 0===i||i.dispose(),this._replyFormInjections.set(n,r),this._logger.trace("Reply panel injected")})))}))).subscribe());const b=T.VB.get({monitorAs:"reader-modals-and-notifications"}).inject(O.EM.fromDocument(document,"grammarly-extension"),O.zs.appendChild(document.documentElement),(()=>s.createElement(ao,{env:this._getEnv()},s.createElement(xe.F.Fragment,null,c.state.view(me.fold((()=>null),(({component:e})=>e))),s.createElement(m,null),d.state.view("ui")))));this._subs.add((()=>b.dispose())),p.next((()=>s.createElement(ao,{env:this._getEnv()},s.createElement(h,null))))}dispose(){this._subs.unsubscribe();for(const e of this._recapBarInjections.values())e.dispose(),this._logger.trace("Recap bar disposed");for(const e of this._replyFormInjections.values())e.dispose(),this._logger.trace("Reply panel disposed")}}function Uo(e){var t;return(0,o.zG)(me.fromNullable(null===(t=e.bodyNode.node.parentElement)||void 0===t?void 0:t.parentElement),me.filter((e=>e instanceof HTMLElement)))}function So(e,t,n,i){const a=(0,o.zG)(e,Nt.DZ(S.w4)((e=>(0,o.zG)(me.fromNullable(t.get(e)),me.chain(Uo)))));return(0,o.zG)(n,Nt.hX((e=>(0,o.zG)(me.fromNullable(i.get(e)),me.chain(Uo),me.fold(o.jv,(e=>a.has(e)))))))}var No=n(97757),xo=n(67434),Po=n(44212),Fo=n(78146),Ko=n(12126),Ro=n(70631),Lo=n(77150),Bo=n(78674);class Ao{constructor(e,t,n,i=l.Y.create("gmail.reader.remoteData")){this._checkingService=e,this._threadContext=t,this._logger=i,this._subscriptions=new D.w,this._docInfo=Y.h.create(new Map),this._summaries=Y.h.create(new Map),this._annotations=Y.h.create(new Map),this._pendingUpdates=Y.h.create(new Map),this._errors=Y.h.create(new Map),this.docInfo=this._docInfo.view(),this.summaries=this._summaries.view(),this.annotations=this._annotations.view(),this.pendingUpdates=this._pendingUpdates.view(),this.errors=this._errors.view(),this._subscriptions.add(this._threadContext.view((e=>new Set(e.messageIndexToIdMap.values()))).pipe((0,No.Gx)(n),xo.R(((e,t)=>new Set(Array.from(e).concat(Array.from(t)))),new Set),(0,de.Yp)(S.yv),function(e,t=0){return n=>{const i=new $e.xQ;return(0,o.zG)(n,Xe.b((e=>Ko.D(Array.from(e)))),xi.zg((t=>e.pipe(u.U((e=>(0,o.zG)(me.fromNullable(e.expandedMessages.get(t)),me.fold(o.jv,Ro.d6)))),E.h(H.fQ),b.q(1),f.h(t)))),M.b((()=>i.next())),Lo.R((()=>i.pipe(Bo.b(t)))),u.U((e=>new Set(e))),E.h((e=>e.size>0)))}}(this._threadContext),Po.u(),Fo.v(o.yR),xi.zg((e=>e.pipe(c.w((e=>this._updateContextInfoAndGetChecks(e).pipe(M.b((e=>this._logger.debug("Received message",e))),xo.R(((e,t)=>[...e,t]),[]),u.U(pe.nI),ze.oA,M.b((t=>this._updateChecksState(e,t)))))))))).subscribe())}_updateChecksState(e,t){const n=t[0].updateContextInfoId,i=!!t.find(oe.j.isDocFinished);(0,o.zG)(t,_e.Ew(oe.j.Reader.isDocInfo),ce.bw((t=>{return this._docInfo.modify(a.ZQ(P.eo.eq)(e,(n=t,ae.CE(n,"kind"))));var n})));const s=t.filter(oe.j.Reader.isDocAnnotation);(0,o.zG)(pe.nI(s),me.alt((()=>i?me.some(s):me.none)),ce.bw((t=>this._annotations.modify(a.ZQ(P.eo.eq)(e,{updateContextInfoId:n,annotations:t.map(te.fromMessage)})))));const r=(0,o.zG)(t,_e.hX(oe.j.Reader.isSummaryItem),_e.u4(new Map,((e,t)=>e.set(t.id,t))));(0,o.zG)(t,_e.Ew(oe.j.Reader.isSummaryFinished),me.map((e=>(0,o.zG)(e.summaryItems,_e.UI((e=>me.fromNullable(r.get(e)))),_e.oA,_e.UI(se)))),ce.bw((t=>this._summaries.modify(a.ZQ(P.eo.eq)(e,{updateContextInfoId:n,items:t}))))),i&&this._pendingUpdates.modify(a.EG(P.eo.eq)(e))}_updateContextInfoAndGetChecks(e){return(0,o.zG)(function(e,t){return(0,o.zG)(he.ij(new Si.Pi(`message ${e} is not expanded`))(t.expandedMessages.get(e)),he.tS((t=>Ro.d6(t)?he.F2(t.value):he.t$(new Si.Pi(Ro.IR(t)?t.error.message:`message ${e} not extracted`)))),he.tS((e=>Ie.Y(he.wE)({containerType:he.F2("email"),docid:he.F2(e.id),title:t.subject,delta:he.F2(e.textMap.getRichText()),siblingIndex:he.F2(e.index),authors:(0,o.zG)(t.loggedUser,he.UI((t=>[{email:e.context.author.email,name:e.context.author.name,currentSessionUser:e.context.author.email===t.email}]))),audience:(0,o.zG)(t.loggedUser,he.UI((t=>e.context.audience.map((e=>({email:e.email,name:e.email,currentSessionUser:e.email===t.email}))))),he.tS((e=>Ie.Y(he.wE)({recipients:he.F2(e),channelId:t.threadId,channelName:t.subject})))),metadata:he.F2({email:e.context.metadata})}))))}(e,this._threadContext.get()),he.g_((t=>(this._errors.modify(a.ZQ(P.eo.eq)(e,t)),this._logger.warn(`Extraction error for ${e}`,t),g.E)),(t=>(this._errors.modify(a.EG(P.eo.eq)(e)),this._logger.info(`Getting checks for ${e}`),Ko.D(this._checkingService.get().updateContextInfo(t))))),c.w(he.g_((t=>(this._errors.modify(a.ZQ(P.eo.eq)(e,t)),this._logger.warn(`updateContextInfo error for ${e}`,t),g.E)),(t=>(this._pendingUpdates.modify(a.ZQ(P.eo.eq)(e,t)),this._checkingService.get().messages.pipe(E.h((0,kt.W9)((0,kt.Kg)(oe.j.isReader,oe.j.isDocFinished),(e=>e.updateContextInfoId===t)))))))))}dispose(){this._subscriptions.unsubscribe()}}var To=n(84603),Oo=n(29567);var Go,zo,Ho,Vo,Do,Zo,Yo,qo;function jo(e,t){return(0,o.zG)((0,o.zG)(me.some(e.item.apiKind),me.filter(be.PJ.isNotDebugAnnotation)),me.map((n=>({docId:e.docId,filteringInfo:(0,o.zG)(me.fromNullable(t.docInfo.get().get(e.docId)),me.chain(ae.ei("filtered"))),subject:n,subtype:"highlights"===e.uiMode?"inline":"panel",itemDelta:e.item.delta}))))}function Qo(e,t,n){const i=(0,o.zG)(t,me.fold((()=>[]),ne.qo)),a=(0,o.zG)(n,me.fold((()=>[]),ne.qo));return(0,o.zG)(e,Qt.MoreDataPopupKind.fold({followUps:()=>i,keyPoints:()=>a,all:()=>[...i,...a]}),ne.UI((e=>({delta:e.delta,type:e.apiKind}))))}function Wo(e,t){return()=>e.pipe(Xe.b((e=>e.entries())),Fo.v((e=>e[0])),xi.zg((e=>e.pipe(b.q(1),c.w((([e,n])=>t(e)(n.state).pipe(mo.R(n.disposed.pipe(E.h(H.fQ))))))))),co.c(g.E))}function Jo(e,t,n,i,p,f,I,y,_,C,v=r.O,U=l.Y.create("gmail.reader.threadIntegrationV1")){const N=new D.w,F=H.iy.create(),K=()=>n.view("threadId").view((0,o.ls)(me.fromEither,me.toUndefined)).get(),R=(0,H.Vo)((()=>v().bgRpc.api)),L=new Ni.X(new Map),B=new Ni.X(new Map),A=new $e.xQ,T=new ho(A),O=f.view((e=>"optedIn"===e.kind?be.t.optedIn:"optedOut"!==e.kind||(0,Oi.U7)(e)?be.t.notOptedInYet:be.t.optedOut)),G=new Ao(e,n,O.view((e=>e===be.t.optedIn)).pipe(E.h(H.fQ))),z=function(e){const t=Date.now();return bo.x.create(e,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["contenteditable"]}).pipe(E.h((e=>e.some((e=>"attributes"==e.type&&(0,We.Re)(e.target)?e.target.matches(Ai.kO):Array.from(e.addedNodes).filter(We.Re).some((e=>e.matches(Ai.kO)||!!e.querySelector(Ai.kO)))||Array.from(e.removedNodes).filter(We.Re).some((e=>e.querySelector(Ai.kO))))))),u.U((t=>Array.from(e.querySelectorAll(Ai.kO))))).pipe(k.O(Array.from(e.querySelectorAll(Ai.kO))),u.U((e=>(0,o.zG)(e,_e.UI((e=>(0,o.zG)(me.fromNullable(e.closest(Ai.e8)),me.chain((n=>{var i;return Ie.Y(me.option)({textField:me.some(e),formEl:me.fromNullable(null===(i=n.closest(Ai.KC))||void 0===i?void 0:i.querySelector(Ai.ZA)),buttonEl:me.fromNullable(n.querySelector(Ai.DM)),messageId:(0,o.zG)(me.fromNullable(e.closest(Ai.n4)),me.chain(fo.Su)),initTime:me.some(t),startTime:me.some(Date.now()-t)})}))))),_e.oA,_e.u4(new Map,((e,t)=>(0,o.zG)(e,a.ZQ(S.w4)(t.formEl,t))))))),k.O(new Map),Jt.G(),u.U((([e,t])=>(0,o.zG)(Pi.yi(go.eq)(e,t),Fi.v.reduce({forms:new Map(Array.from(t.values()).map((e=>[e.messageId,e]))),added:new Set,updated:new Set,removed:new Set},((e,t)=>({...e,removed:e.removed.add(t.messageId)})),((e,t,n)=>({...e,updated:e.updated.add(n.messageId)})),((e,t)=>({...e,added:e.added.add(t.messageId)})))))))}(t).pipe(d.shareReplay({bufferSize:1,refCount:!0})),V=new Ti(i,z.pipe(u.U((0,o.ls)(ae.ei("forms"),a.UI((e=>e.textField)))))),Z=new fe.Impl(A,G,n,I,f.get()),q=new we.Impl(A,I,f,G,C),j=Y.h.create(null),Q=new st(n,q,Z,f.view((e=>"optedIn"===e.kind&&e.onboarding||{})),I,A,j),W=new Ht.Impl(A,q,Z,Q),J=new qt.Impl(A),X=p?null:new Ki(po(Z,q,n),t,((e,t,n,i,o)=>new Ei(e,t,(e=>new $(e,!0,j)),((e,t)=>{const i=new Eo(A,Z,t,e);return T.addEffects(ro.highlightMenuUnmounted(n,i.cardDismissed,o)),i}),((e,t,i,a)=>(T.addEffects(ro.firstHighlightMounted(n,t,e,o)),new so(e,t,i,a,v))),(e=>new x({...e,offByTextPositionChange:void 0})),!1)),((e,t)=>({highlightId:e,annotation:t,highlightColor:null,highlightDisplayFormat:null,highlightLiveliness:null}))),ee=p?null:new Mo(i,z,(e=>()=>Ee.UI.mount(Wn.UIPart,Wn.createFlow(((e,t,n,i)=>(0,o.zG)(me.fromNullable(L.value.get(e)),me.getOrElse((()=>{const s=new Qt.ViewModelImpl(A,e,v().config.bundleInfo.browser,t,q,O,n.view((t=>t.messageIndexToIdMap.get(t.messageCount-1)===e)),i.availableFor(Y.h.create(me.some(e))));return L.next((0,o.zG)(L.value,a.ZQ(P.eo.eq)(e,s))),s}))))(e,Z,n,Q),Q.state.view("activeStep")))),(e=>{var t,n;null===(t=B.value.get(e))||void 0===t||t.dispose(),B.next((0,o.zG)(B.value,a.EG(P.eo.eq)(e))),null===(n=L.value.get(e))||void 0===n||n.dispose(),L.next((0,o.zG)(L.value,a.EG(P.eo.eq)(e)))}),(e=>()=>Ee.UI.mount(si.UIPart,si.createFlow(((e,t,n)=>(0,o.zG)(me.fromNullable(B.value.get(e)),me.getOrElse((()=>{const i=new Wt.ViewModelImpl(A,e,t,n.availableFor(Y.h.create(me.some(e))));return B.next((0,o.zG)(B.value,a.ZQ(P.eo.eq)(e,i))),i}))))(e,Z,Q)))),(e=>{var t;null===(t=B.value.get(e))||void 0===t||t.dispose(),B.next((0,o.zG)(B.value,a.EG(P.eo.eq)(e)))}),Q,W,(()=>Ee.UI.mount(ci.UIPart,ci.createFlow(J))),(()=>{const e=s.useRef(new Yt.Impl(A));return Oe.P.useEffectOnWillUnmount((()=>e.current.dispose())),Ee.UI.mount(pi.UIPart,pi.createFlow(e.current))}),y,v);return X&&N.add(((e,t,n,i)=>e.hoveredAnnotation.pipe(u.U((e=>e?{annotation:e,hoveredOn:Date.now()}:null)),Jt.G(),M.b((([e,o])=>{if(e&&null===o){const o=e.annotation.annotation;t.readerV1HighlightHover(Date.now()-e.hoveredOn,o.id,o.docId,n,i())}}))))(X,_,F,K).subscribe()),N.add(((e,t,n,i,a)=>e.pipe(u.U((({forms:e,added:t})=>Array.from(e.values()).filter((({messageId:e})=>t.has(e))))),Xe.b((e=>w.of(...e))),h.M(t),M.b((([{initTime:e,messageId:t},a])=>{i.readerV1ReplyStart(a.messageCount,t,n,Date.now()-e,(0,o.zG)(a.threadId,me.fromEither,me.toUndefined))})),xi.zg((([e])=>m.R(e.buttonEl,"click").pipe(h.M(w.of(e),To.x.getRecipientsContextEventObservable(e.formEl,null),t),E.h((([e,t,n])=>n.length>0)),xi.zg((([e,t,n,i])=>(0,o.zG)(Ie.Y(me.option)({message:(0,o.zG)(me.fromNullable(i.expandedMessages.get(t.messageId)),me.chain(de.zk)),loggedUser:me.fromEither(i.loggedUser)}),me.fold((()=>g.E),(({message:e,loggedUser:s})=>Ko.D((0,Oo.j)(s.email,(0,o.zG)(n,_e.UI((e=>Oo.G.create(e.email))),_e.oA),(e=>a.get().isGenericEmailDomain(e)))).pipe(u.U((o=>({message:e,isExternalComm:o,threadContext:i,recipients:n,data:t}))))))))),M.b((({data:e,recipients:t,threadContext:a,message:s,isExternalComm:r})=>{i.readerV1ReplySent(a.messageCount,e.messageId,s.context.audience.length,(0,de.Y2)(s.textMap.getPlainText()),t.length,n,Date.now()-e.startTime,(0,o.zG)(me.fromEither(r),me.flatten,me.toUndefined),(0,o.zG)(a.threadId,me.fromEither,me.toUndefined))})))))))(z,n,F,_,R).subscribe()),N.add(((e,t,n,i)=>e.pipe(u.U((e=>(0,o.zG)(me.fromNullable(e.messageIndexToIdMap.get(e.messageCount-1)),me.chain((t=>me.fromNullable(e.expandedMessages.get(t)))),me.chain(de.zk),me.map((t=>({lastMessage:t,ctx:e})))))),ze.oA,b.q(1),c.w((({lastMessage:e,ctx:n})=>Ko.D((0,Oo.j)(e.context.author.email,e.context.audience.map((e=>e.email)),(e=>t.get().isGenericEmailDomain(e)))).pipe(u.U((t=>({lastMessage:e,ctx:n,isExternalComm:t})))))),M.b((({lastMessage:e,ctx:t,isExternalComm:a})=>{i.readerV1SessionStart(e.id,e.context.audience.length,(0,de.Y2)(e.textMap.getPlainText()),t.messageCount,n,(0,o.zG)(me.fromEither(a),me.flatten,me.toUndefined),(0,o.zG)(t.threadId,me.fromEither,me.toUndefined))}))))(n,R,F,_).subscribe()),N.add(function(e,t,n,i){return e.pipe(u.U((e=>(0,o.zG)(Array.from(e.expandedMessages.values()),ne.DZ(de.zk),Nt.nI(Si.mq.eqByDocId)))),(0,de.Yp)(Si.mq.eqByDocId),Xe.b((e=>w.of(...e))),xi.zg((a=>Ko.D((0,Oo.j)(a.context.author.email,a.context.audience.map((e=>e.email)),(e=>t.get().isGenericEmailDomain(e)))).pipe(u.U((t=>({msg:a,isExternalComm:(0,o.zG)(me.fromEither(t),me.flatten,me.toUndefined),threadId:(0,o.zG)(e.get().threadId,me.fromEither,me.toUndefined),messageCount:e.get().messageCount}))),M.b((({msg:e,isExternalComm:t,threadId:o,messageCount:a})=>{i.readerV1MessageOpen(e.index===a-1,a,e.id,(0,de.Y2)(e.textMap.getPlainText()),e.context.audience.length,n,t,o)}))))))}(n,R,F,_).subscribe()),T.addEffects(ro.logAction(l.Y.create("gmail.reader.actions")),ro.optInDismiss(I),ro.optInTryItOut(I),ro.turnOffRecap(I),ro.reply(V),ro.replyToItem(V),ro.copyItem(),ro.closeHighlightMenuOnExternalPopupShow(),ro.closeRecapBarPopupOnItemMenuShow(),ro.closeRecapBarPopupOnHighlightMenuShow(),ro.closeReplyPanelItemMenuOnExternalPopupShow(),ro.toggleActiveHighlightMenu((null==X?void 0:X.activeAnnotation)||g.E),ro.openModalsOnMenuItemClick(),ro.showCopyNotification(),ro.showUndoItemRemovedNotification(),ro.showItemFeedbackNotification(),ro.showGenericFeedbackNotification(),ro.showTurnoffNotification(),ro.showOptInDismissNotification(),ro.closeItemMenuOnScroll(),ro.showOnboardingOnTakeATour(),Go.itemLooked(e,G),Go.itemCopy(e,G),Go.itemRemove(e,G),Go.itemReply(e,G),Go.itemCheck(e,G),Go.itemFeedback(e,G),Go.recapPanelReady(e,G,O),Go.recapBarDataPopupOpened(e,G,Z),zo.copy(_,F,K),zo.remove(_,F,K),zo.undoRemove(_,F,K),zo.reply(_,F,K),zo.check(_,F,K),zo.feedback(_,F,K),zo.itemMenuOpen(_,F,K),zo.highlightMenuOpen(_,F,K),Ho.shown(_,F,K),Ho.dismiss(_,F,K),Ho.next(_,F,K),Ho.prev(_,F,K),Ho.setKind(_,F,K),Vo.tryItOutClicked(_,F,K),Vo.dismissClicked(_,F,K),Vo.tryItOutModalResult(_,F,K),Vo.dismissModalResult(_,F,K),Vo.showOptInHeader(L,_,F,K),Do.toggleHighlights(_,F,K),Do.reply(_,F,K),Do.showAnyway(_,F,K),Do.recapBarToggle(_,F,K),Do.menuItemClick(_,F,K),Do.showRecapBar(L,_,F,K),Do.popupShowHide(L,_,F,K),Do.recapBarLoaded(L,Z,q,_,F,K),Zo.toggleExpand(_,F,K),Zo.toggleMode(_,F,K),Zo.panelShow(B,_,F,K),Yo.aboutRecapResult(_,F,K),Yo.turnOffRecapResult(_,F,K),Yo.genericFeedbackResult(_,F,K),Yo.itemFeedbackResult(_,F,K),qo.learnMore(_,F,K),qo.dataCollectionPolicy(_,F,K),qo.privacyPolicy(_,F,K),qo.termsOfService(_,F,K)),U.debug(`Thread integration created for thread #${K()||"unknown"}`),()=>{_.readerV1SessionEnd(F,K()),J.dispose(),T.dispose(),G.dispose(),Array.from(L.value.values()).forEach((e=>e.dispose())),L.next(new Map),Array.from(B.value.values()).forEach((e=>e.dispose())),B.next(new Map),null==ee||ee.dispose(),Z.dispose(),null==X||X.dispose(),V.dispose(),q.dispose(),W.dispose(),Q.dispose(),N.unsubscribe(),U.debug("Thread integration disposed")}}!function(e){e.itemLooked=function(e,t){return ro.tracking(re.Kind.setItemMenuVisibleFor,(n=>{return(0,o.zG)(Ie.Y(me.option)({docId:me.some(n.docId),filteringInfo:me.some((0,o.zG)(me.fromNullable(t.docInfo.get().get(n.docId)),me.chain(ae.ei("filtered")))),itemDelta:(0,o.zG)(n.item,me.map((e=>e.delta))),subject:(0,o.zG)(n.item,me.map((e=>e.apiKind)),me.filter(be.PJ.isNotDebugAnnotation)),subtype:me.some((i=n.uiMode,"highlights"===i?"inline":"panel"))}),ce.bw((t=>e.get().sendReaderFeedback({...t,kind:oe.e.readerLooked}))));var i}))},e.itemCopy=function(e,t){return ro.tracking(re.Kind.copyItem,(n=>(0,o.zG)(jo(n,t),ce.bw((t=>e.get().sendReaderFeedback({...t,kind:oe.e.readerCopy}))))))},e.itemRemove=function(e,t){return ro.tracking(re.Kind.removeItem,(n=>(0,o.zG)(jo(n,t),ce.bw((t=>e.get().sendReaderFeedback({...t,kind:oe.e.readerIgnore}))))))},e.itemReply=function(e,t){return ro.tracking(re.Kind.replyToItem,(n=>(0,o.zG)(jo(n,t),ce.bw((t=>e.get().sendReaderFeedback({...t,kind:oe.e.readerReply}))))))},e.itemCheck=function(e,t){return ro.tracking(re.Kind.setItemChecked,(n=>(0,o.zG)(jo(n,t),ce.bw((t=>e.get().sendReaderFeedback({...t,kind:n.checked?oe.e.readerCheck:oe.e.readerUncheck}))))))},e.itemFeedback=function(e,t){return ro.tracking(re.Kind.itemFeedback,(n=>(0,o.zG)(jo(n,t),ce.bw((t=>e.get().sendReaderFeedback({...t,kind:n.feedback===be.h2.good?oe.e.readerLike:n.feedback===be.h2.bad?oe.e.readerDislike:(0,ue.vE)(n.feedback)}))))))},e.recapBarDataPopupOpened=function(e,t,n){return ro.tracking(re.Kind.setRecapBarPopup,(({docId:i,popupKind:s})=>(0,o.zG)(s,me.filter(Qt.PopupKind.isMoreDataPopupKind),ce.bw((s=>{e.get().sendReaderFeedback({kind:oe.e.readerPanelOpened,docId:i,subtype:s,items:Qo(s,(0,o.zG)(n.followUps.get(),a.P5(P.eo.eq)(i)),(0,o.zG)(n.keyPoints.get(),a.P5(P.eo.eq)(i))),filteringInfo:(0,o.zG)(me.fromNullable(t.docInfo.get().get(i)),me.chain(ae.ei("filtered")))})})))))},e.recapPanelReady=function(e,t,n){return i=>Z.aj([n,t.docInfo]).pipe(u.U((([e,t])=>e===be.t.optedIn?me.some(t):me.none)),ze.oA,u.U((e=>(0,o.zG)(Array.from(e.values()),Nt.nI(ee.eqByDocId)))),(0,de.Yp)(ee.eqByDocId),Xe.b((e=>w.of(...e))),M.b((n=>e.get().sendReaderFeedback({kind:oe.e.readerPanelReady,docId:n.docId,filteringInfo:(0,o.zG)(me.fromNullable(t.docInfo.get().get(n.docId)),me.chain(ae.ei("filtered")))}))),co.c(g.E))}}(Go||(Go={})),function(e){e.check=function(e,t,n){return ro.tracking(re.Kind.setItemChecked,(({checked:i,uiMode:o,docId:a,item:s})=>{e.readerV1FollowUpCheck(s.id,a,o,t,i,n())}))},e.feedback=function(e,t,n){return ro.tracking(re.Kind.itemFeedback,(({feedback:i,item:o,docId:a,uiMode:s})=>{switch(o.kind){case be.YB.followUp:"good"===i?e.readerV1FollowUpThumbsUpClick(o.id,a,s,t,n()):e.readerV1FollowUpThumbsDownClick(o.id,a,s,t,n());break;case be.YB.keyPoint:"good"===i?e.readerV1KeyPointThumbsUpClick(o.id,a,s,t,n()):e.readerV1KeyPointThumbsDownClick(o.id,a,s,t,n());break;case be.YB.highlight:"good"===i?e.readerV1HighlightThumbsUpClick(o.id,a,s,t,n()):e.readerV1HighlightThumbsDownClick(o.id,a,s,t,n());break;default:(0,ue.L0)(o)}}))},e.reply=function(e,t,n){return ro.tracking(re.Kind.replyToItem,(({item:i,docId:o,uiMode:a})=>{switch(i.kind){case be.YB.followUp:e.readerV1FollowUpReplyItemClick(i.id,o,a,t,n());break;case be.YB.keyPoint:e.readerV1KeyPointReplyItemClick(i.id,o,a,t,n());break;case be.YB.highlight:e.readerV1HighlightReplyItemClick(i.id,o,a,t,n());break;default:(0,ue.L0)(i)}}))},e.copy=function(e,t,n){return ro.tracking(re.Kind.copyItem,(({item:i,docId:o,uiMode:a})=>{switch(i.kind){case be.YB.followUp:e.readerV1FollowUpCopyItemClick(i.id,o,a,t,n());break;case be.YB.keyPoint:e.readerV1KeyPointCopyItemClick(i.id,o,a,t,n());break;case be.YB.highlight:e.readerV1HighlightCopyItemClick(i.id,o,a,t,n());break;default:(0,ue.L0)(i)}}))},e.remove=function(e,t,n){return ro.tracking(re.Kind.removeItem,(({item:i,docId:o,uiMode:a})=>{switch(i.kind){case be.YB.followUp:e.readerV1FollowUpRemoveItemClick(i.id,o,a,t,n());break;case be.YB.keyPoint:e.readerV1KeyPointRemoveItemClick(i.id,o,a,t,n());break;case be.YB.highlight:e.readerV1HighlightRemoveItemClick(i.id,o,a,t,n());break;default:(0,ue.L0)(i)}}))},e.undoRemove=function(e,t,n){return ro.tracking(re.Kind.undoRemoveItem,(({item:i,docId:o})=>{switch(i.kind){case be.YB.followUp:e.readerV1FollowUpUndoRemoveItemClick(i.id,o,t,n());break;case be.YB.keyPoint:e.readerV1KeyPointUndoRemoveItemClick(i.id,o,t,n());break;case be.YB.highlight:e.readerV1HighlightUndoRemoveItemClick(i.id,o,t,n());break;default:(0,ue.L0)(i)}}))},e.itemMenuOpen=function(e,t,n){return ro.tracking(re.Kind.setItemMenuVisibleFor,(({item:i,docId:a,uiMode:s})=>{(0,o.zG)(i,ce.bw((i=>{e.readerV1ItemMenuOpen(i.id,i.kind,a,s,t,n())})))}))},e.highlightMenuOpen=function(e,t,n){return ro.tracking(re.Kind.setHighlightMenuVisibleFor,(({item:i})=>{(0,o.zG)(i,ce.bw((i=>{e.readerV1ItemMenuOpen(i.id,i.kind,i.docId,"highlights",t,n())})))}))}}(zo||(zo={})),function(e){e.shown=function(e,t,n){return ro.tracking(re.Kind.onboardingShown,(({docId:i,stepName:o})=>{e.readerV1OnboardingPopupShow(i,o,t,n())}))},e.dismiss=function(e,t,n){return ro.tracking(re.Kind.onboardingDismiss,(({docId:i,stepName:o})=>{e.readerV1OnboardingPopupDismiss(i,o,t,n())}))},e.next=function(e,t,n){return ro.tracking(re.Kind.onboardingNext,(({docId:i,stepName:o})=>{e.readerV1OnboardingPopupNavigationButtonClick("next",i,o,t,n())}))},e.prev=function(e,t,n){return ro.tracking(re.Kind.onboardingPrev,(({docId:i,stepName:o})=>{e.readerV1OnboardingPopupNavigationButtonClick("prev",i,o,t,n())}))},e.setKind=function(e,t,n){return ro.tracking(re.Kind.onboardingSetKind,(({docId:i,onboardingKind:a})=>{(0,o.zG)(a,ce.bw((o=>{switch(o){case"replyPanel":e.readerV1ReplyPanelHintButtonClick(i,t,n());break;case"followUps":e.readerV1FollowUpsPanelHintButtonClick(i,t,n());break;case"keyPoints":e.readerV1KeyPointsPanelHintButtonClick(i,t,n());break;case"general":break;default:(0,ue.L0)(o)}})))}))}}(Ho||(Ho={})),function(e){e.tryItOutClicked=function(e,t,n){return ro.tracking(re.Kind.optInTryItOutModal,(({docId:i})=>{e.readerV1OptInHeaderTryItOutClick(i,t,n())}))},e.dismissClicked=function(e,t,n){return ro.tracking(re.Kind.optInDismissModal,(({docId:i})=>{e.readerV1OptInHeaderDismissClick(i,t,n())}))},e.tryItOutModalResult=function(e,t,n){return ro.tracking(re.Kind.optInTryItOutModalResult,(({docId:i,result:o})=>{switch(o){case"dismiss":e.readerV1OptInPanelDismissClick(i,t,n());break;case"notNow":e.readerV1OptInPanelNotNowClick(i,t,n());break;case"decline":e.readerV1OptInPanelDeclineClick(i,t,n());break;case"continue":e.readerV1OptInPanelContinueClick(i,t,n());break;default:(0,ue.L0)(o)}}))},e.dismissModalResult=function(e,t,n){return ro.tracking(re.Kind.optInDismissModalResult,(({docId:i,result:o})=>{switch(o){case"dismiss":e.readerV1OptInDismissModalDismissClick(i,t,n());break;case"showLaterYes":e.readerV1OptInDismissModalLaterYesClick(i,t,n());break;case"showLaterNo":e.readerV1OptInDismissModalLaterNoClick(i,t,n());break;default:(0,ue.L0)(o)}}))},e.showOptInHeader=function(e,t,n,i){return Wo(e,(e=>(0,o.ls)(u.U(ae.ei("kind")),E.h((e=>e===Qt.Kind.optIn)),b.q(1),M.b((()=>{t.readerV1OptInHeaderShow(e,n,i())})))))}}(Vo||(Vo={})),function(e){e.toggleHighlights=function(e,t,n){return ro.tracking(re.Kind.toggleInlineHighlights,(({enabled:i,docId:o})=>{e.readerV1HighlightsToggleClick(i,o,t,n())}))},e.reply=function(e,t,n){return ro.tracking(re.Kind.reply,(({popupKind:i,docId:o})=>{switch(i){case"followUps":e.readerV1FollowUpsPanelReplyClick(o,t,n());break;case"keyPoints":e.readerV1KeyPointsPanelReplyClick(o,t,n());break;case"all":e.readerV1AllDataPanelReplyClick(o,t,n());break;default:(0,ue.L0)(i)}}))},e.showAnyway=function(e,t,n){return ro.tracking(re.Kind.showAnyway,(({docId:i})=>{e.readerV1LowQualityContentShow(i,t,n())}))},e.recapBarToggle=function(e,t,n){return ro.tracking(re.Kind.toggleRecapBar,(({docId:i,isCompact:o,source:a})=>{switch(a){case"logoButton":e.readerV1RecapBarLogoToggleClick(!o,i,t,n());break;case"settingsMenu":e.readerV1RecapBarOptionsVisibilityToggleClick(!o,i,t,n());break;default:(0,ue.L0)(a)}}))},e.menuItemClick=function(e,t,n){return ro.tracking(re.Kind.recapMenuItemClick,(({item:i,docId:o})=>{e.readerV1RecapBarOptionsItemClick(i,o,t,n())}))},e.showRecapBar=function(e,t,n,i){return Wo(e,(e=>(0,o.ls)(u.U(ae.ei("kind")),E.h((e=>e===Qt.Kind.indeterminate)),b.q(1),M.b((()=>{t.readerV1RecapBarShow(e,n,i())})))))},e.recapBarLoaded=function(e,t,n,i,s,r){return Wo(e,(e=>(0,o.ls)(u.U(ae.ei("kind")),E.h((e=>e===Qt.Kind.compact||e===Qt.Kind.expanded)),b.q(1),M.b((()=>{i.readerV1RecapBarLoaded((0,o.zG)(t.followUps.get(),a.P5(P.eo.eq)(e),de.Hg),(0,o.zG)(t.highlights.get(),a.P5(P.eo.eq)(e),de.Hg),(0,o.zG)(t.keyPoints.get(),a.P5(P.eo.eq)(e),de.Hg),e,(0,o.zG)(me.fromNullable(n.state.get().docs.get(e)),me.chain(ae.ei("goodForAnnotations")),ce.FX(!0)),(0,o.zG)(me.fromNullable(n.state.get().docs.get(e)),me.chain(ae.ei("lowQualityInfo")),me.isSome),s,r())})))))},e.popupShowHide=function(e,t,n,i){return Wo(e,(e=>(0,o.ls)(u.U(ae.ei("popupKind")),d.skipBy(me.getEq(Qt.PopupKind.eq)),Jt.G(),M.b((([a,s])=>{(0,o.zG)(a,ce.bw((o=>{switch(o){case"settingsMenu":t.readerV1RecapBarOptionsMenuClose(e,n,i());break;case"followUps":t.readerV1FollowUpsPanelHide(e,n,i());break;case"keyPoints":t.readerV1KeyPointsPanelHide(e,n,i());break;case"all":t.readerV1AllDataPanelHide(e,n,i());break;default:(0,ue.L0)(o)}}))),(0,o.zG)(s,ce.bw((o=>{switch(o){case"settingsMenu":t.readerV1RecapBarOptionsMenuOpen(e,n,i());break;case"followUps":t.readerV1FollowUpsPanelShow(e,n,i());break;case"keyPoints":t.readerV1KeyPointsPanelShow(e,n,i());break;case"all":t.readerV1AllDataPanelShow(e,n,i());break;default:(0,ue.L0)(o)}})))})))))}}(Do||(Do={})),function(e){e.toggleExpand=function(e,t,n){return ro.tracking(re.Kind.toggleReplyPanelExpanded,(({expanded:i,docId:o})=>{i?e.readerV1ReplyPanelExpand(o,t,n()):e.readerV1ReplyPanelCollapse(o,t,n())}))},e.toggleMode=function(e,t,n){return ro.tracking(re.Kind.toggleReplyPanelMode,(({trigger:i,mode:o,docId:a})=>{o===Wt.Mode.full?e.readerV1ReplyPanelToggleFull(a,t,i,n()):e.readerV1ReplyPanelToggleCompact(a,t,n())}))},e.panelShow=function(e,t,n,i){return Wo(e,(e=>(0,o.ls)(u.U(ae.ei("kind")),E.h((e=>e!==Wt.Mode.hidden)),b.q(1),M.b((()=>{t.readerV1ReplyPanelShow(e,n,i())})))))}}(Zo||(Zo={})),function(e){e.aboutRecapResult=function(e,t,n){return ro.tracking(re.Kind.aboutRecapModalResult,(({docId:i,result:o})=>{switch(o){case"takeATour":e.readerV1AboutPanelTakeATourClick(i,t,n());break;case"dismiss":e.readerV1AboutPanelCloseClick(i,t,n());break;default:(0,ue.L0)(o)}}))},e.turnOffRecapResult=function(e,t,n){return ro.tracking(re.Kind.turnOffRecapModalResult,(({docId:i,result:o})=>{switch(o){case"turnOffRecap":e.readerV1TurnOffPanelTurnOffClick(i,t,n());break;case"dismiss":e.readerV1TurnOffPanelDismissClick(i,t,n());break;case"hideRecap":e.readerV1TurnOffPanelHideRecapClick(i,t,n());break;default:(0,ue.L0)(o)}}))},e.genericFeedbackResult=function(e,t,n){return ro.tracking(re.Kind.genericFeedbackModalResult,(({docId:i,result:o})=>{switch(o.kind){case"dismiss":e.readerV1GenericFeedbackPanelDismissClick(i,t,n());break;case"submit":e.readerV1GenericFeedbackPanelSubmitClick(o.feedbackText,i,o.rating.label,o.rating.score,t,n());break;default:(0,ue.L0)(o)}}))},e.itemFeedbackResult=function(e,t,n){return ro.tracking(re.Kind.itemFeedbackModalResult,(({docId:i,result:o,itemFeedback:a})=>{switch(o.kind){case"dismiss":e.readerV1ItemFeedbackPanelDismissClick(a.feedback,a.item.id,a.item.kind,i,a.uiMode,t,n());break;case"submit":e.readerV1ItemFeedbackPanelSubmitClick(o.feedbackText,a.feedback,a.item.id,a.item.kind,i,a.uiMode,t,n());break;default:(0,ue.L0)(o)}}))}}(Yo||(Yo={})),function(e){e.learnMore=function(e,t,n){return ro.tracking(re.Kind.learnMoreLinkVisited,(({docId:i,source:o})=>{switch(o){case"optInRecapBar":e.readerV1OptInHeaderLearnMoreClick(i,t,n());break;case"aboutRecapModal":e.readerV1AboutPanelLearnMoreClick(i,t,n());break;default:(0,ue.L0)(o)}}))},e.privacyPolicy=function(e,t,n){return ro.tracking(re.Kind.privacyPolicyLinkVisited,(({docId:i})=>{e.readerV1OptInPanelPrivacyPolicyClick(i,t,n())}))},e.dataCollectionPolicy=function(e,t,n){return ro.tracking(re.Kind.dataCollectionPolicyLinkVisited,(({docId:i})=>{e.readerV1OptInPanelDataCollectionPolicyClick(i,t,n())}))},e.termsOfService=function(e,t,n){return ro.tracking(re.Kind.termsOfServiceLinkVisited,(({docId:i})=>{e.readerV1OptInPanelTermsOfServiceClick(i,t,n())}))}}(qo||(qo={}))},86620:(e,t,n)=>{n.d(t,{C:()=>d,U:()=>i});var i,o=n(27378),a=n(29511),s=n(33678),r=n(88056),l=n(95574);!function(e){let t;!function(e){e.isAppleSystem="isAppleSystem"}(t=e.SidebarFlag||(e.SidebarFlag={})),e.Flag={...t,...s.a.Flag},e.Context=o.createContext(r.Y.invariantContent("Environment"))}(i||(i={}));class d{constructor(e=(0,a.O)()){this._flags=new Set,this.actions={openUrl:e=>l.vM((()=>{document.location.href=e.toString()})),openPopup:e=>l.vM((()=>{const t=self.open(e.toString(),void 0,"noreferrer");t&&(t.opener=null)}))},e.config.systemInfo.os.isMac&&this._flags.add(i.Flag.isAppleSystem),this._flags.add(i.Flag.supportsSVGDominantBaseline),this._flags.add(i.Flag.onlyTrustedEvents)}has(e){return this._flags.has(e)}}},92132:(e,t,n)=>{n.d(t,{Q:()=>l});var i=n(27378),o=n(15073),a=n(60797),s=n(95300),r=n(5114);const l=({children:e,remSize:t,setter:n})=>(d+=1,i.useEffect((()=>{const e=t.subscribe((e=>{c.next(r.some(e)),n(r.some(e))}));return()=>{e.unsubscribe(),d-=1,0===d&&(c.next(r.none),n(r.none))}}),[t]),i.createElement(o.u.Context.Provider,{value:c.pipe(a.oA)},e));let d=0;const c=new s.X(r.none)},80895:(e,t,n)=>{n.d(t,{C:()=>s});var i=n(27378),o=n(12187),a=n(12935);const s=({kind:e="primary",dataGrammarlyPart:t="ui-kit-badge",title:n,boldTitle:s=!1,className:r,...l})=>i.createElement("div",{"data-grammarly-part":t,...(0,o.Sh)(a.badge,r,"primary"===e?a.badgePrimary:null,"success"===e?a.badgeSuccess:null,"gold"===e?a.badgeGold:null,"error"===e?a.badgeError:null,l.rounded?a.badgeRounded:null,!l.rounded||l.size&&"small"!==l.size?null:a.badgeRoundedSmall,l.rounded&&"medium"===l.size?a.badgeRoundedMedium:null,l.rounded&&"large"===l.size?a.badgeRoundedLarge:null)},i.createElement("div",{...(0,o.Sh)(a.badgeTitle,s?a.badgeTitleBold:null)},n))},86705:(e,t,n)=>{n.d(t,{v:()=>a});var i=n(27378),o=n(80895);const a=({browser:e,className:t,title:n="BETA"})=>"safari"!==e?i.createElement(o.C,{title:n,className:t}):null},31944:(e,t,n)=>{n.d(t,{J:()=>c});var i=n(57050),o=n(27378),a=n(90845),s=n(60797),r=n(2834),l=n(12187),d=n(22536);const c=({onChange:e,labelId:t,className:n,checkboxClassName:c,labelClassName:u,checked:m,children:h,disabled:p,useDS:g,dataGrammarlyPart:f="ui-kit-checkbox",tabIndex:b=0,onMount:k=i.Q1})=>{const[w,I]=o.useState(null!=m&&m);o.useEffect((()=>{I(Boolean(m))}),[m]);const y=t=>{t.preventDefault(),t.stopPropagation(),I(!w),null==e||e(!w)},{ref:_,onMount:C}=a.P.useElWatcher();return o.useEffect((()=>{const e=_.pipe(s.oA,r.b(k)).subscribe();return()=>e.unsubscribe()}),[]),o.createElement("div",{"data-grammarly-part":f,...(0,l.Sh)(d.checkboxContainer,n)},o.createElement("div",{...(0,l.Sh)(d.checkbox,c,w?d.checkboxChecked:null,g?d.checkboxDS:null),role:"checkbox","aria-checked":w,tabIndex:b,"aria-labelledby":t,onKeyDown:e=>{" "===e.key&&y(e)},onClick:p?i.Q1:y,ref:C},w?o.createElement("div",{className:d.checkboxCheckmark}):null),o.createElement("label",{id:t,onClick:y,className:u},h))}},57053:(e,t,n)=>{n.d(t,{i:()=>s});var i=n(27378),o=n(12187),a=n(39070);const s=({maxRating:e=5,ratingLabels:t=["Not at all valuable","Slightly valuable","Somewhat valuable","Very valuable","Extremely valuable"],onChange:n,value:s,ariaLabel:r="Rating",className:l,ratingStarsClassName:d,ratingLegendClassName:c,ratingLabelsClassName:u})=>{const[m,h]=i.useState(s),[p,g]=i.useState(void 0);i.useEffect((()=>{h(s)}),[s]),i.useEffect((()=>{void 0!==m&&n(m)}),[m]);const f=[...Array(e).keys()].map((e=>e+1)),b=void 0!==p?p:m;return i.createElement("div",{"data-grammarly-part":"ui-kit-rating",role:"radiogroup","aria-label":r,...(0,o.Sh)(a.rating,l)},i.createElement("div",{...(0,o.Sh)(a.ratingStars,d),onMouseLeave:()=>g(void 0)},f.map((e=>{const t=void 0!==b&&b>=e;return i.createElement("input",{key:`rating-${e}`,id:`rating-${e}`,type:"radio",name:"rating",checked:m===e,onChange:e=>h(parseInt(e.target.value,10)),value:e,onMouseEnter:e=>{const t=e.target;g(parseInt(t.value,10))},...(0,o.Sh)(a.ratingStar,t?a.ratingStarFilled:null)})}))),i.createElement("div",{...(0,o.Sh)(a.ratingLabels,u)},f.map((e=>i.createElement("label",{key:`rating-label-${e}`,htmlFor:`rating-${e}`,...(0,o.Sh)(b===e?a.ratingLabelVisible:a.ratingLabelNotVisible)},t[e-1])))),void 0!==b?null:i.createElement("div",{...(0,o.Sh)(a.ratingLegend,c)},i.createElement("div",null,t[0]),i.createElement("div",null,t[f.length-1])))}},61930:e=>{e.exports={container:"_250H9",menu:"_3euMP",menuContent:"_2qxR6",main:"_3RM7p",mainNoSidebar:"_28xdU",mainHeader:"_1REA2",mainContent:"_1GAWt",mainContentNoFooter:"_19BNB",mainFooter:"RUwcs"}},56060:e=>{e.exports={logoContainer:"_29reH"}},84429:e=>{e.exports={popover:"_3Q4Cs"}},3225:e=>{e.exports={highlight:"_2Bg1k",background:"_30zCc",showBackground:"_1lL8m",debug:"_1gbtc",hovered:"_3gUSx"}},45435:e=>{e.exports={followUps:"tcm2A",checkboxWrapper:"_3jHQB",label:"_1Q9vX",checkbox:"_3Pb47",textChecked:"_2m02m",checkboxDoneNotification:"_1OpBA",checkboxDone:"ApDzv",arrow:"Te_Ag"}},27241:e=>{e.exports={item:"_3nGOJ",itemWrapper:"a4F2L",itemContent:"u09zZ",itemMenu:"_1nyNL"}},55189:e=>{e.exports={ellipsis:"_2z-lC",popup:"mY2ib",feedbackPopup:"_33SJE"}},23374:e=>{e.exports={keyPoints:"_2wUr6",ellipsis:"_1_XDd"}},98918:e=>{e.exports={header:"_3Xrns",title:"_2RKhZ"}},82144:e=>{e.exports={ratingContainer:"QXl_V",ratingStars:"_1I_ma",ratingLegend:"_14rQ_",ratingLabels:"_13HBd",requiredLabel:"_2RdD6"}},97002:e=>{e.exports={textBoxHeader:"_1cYkm",textbox:"_2PDN3",required:"_3JNWe",requiredLabel:"_3_rmF"}},89020:e=>{e.exports={modal:"GWUXd",closeButton:"_10hkL",button:"LqBlJ",title:"n6Qd_",body:"ehyhP",footer:"wL4JI"}},47922:e=>{e.exports={modal:"_2IwB8",header:"_1lfGX",title:"_3rMfW",body:"_1-aBq"}},82695:e=>{e.exports={modal:"_3bx_J",header:"WXCnX",title:"_3RXBr",body:"_1prUl",description:"_3YRGl"}},16626:e=>{e.exports={modal:"SEHsV",header:"_2w9zh",main:"_3aSqR",button:"x3hE-"}},60026:e=>{e.exports={header:"_2yr3Q",title:"_2D7Vs"}},6237:e=>{e.exports={modal:"_2RFVs",main:"wRUw3",header:"_2mRtU",title:"_27Olv"}},34561:e=>{e.exports={notification:"_2cS_W",slideIn:"zNxak",content:"lYEGW",header:"_3dZeW",body:"SIpgE",closeButton:"_1H7iu",logo:"eKFqN",iconCloseButton:"_3BYS6"}},90787:e=>{e.exports={notificationsContainer:"_2yNIl"}},9305:e=>{e.exports={notification:"_3hels",iconAndText:"_1VXt4",icon:"_3ksm1",closeButton:"_38p56",undoButton:"_2PfYt",undoIcon:"_3H2bX"}},36890:e=>{e.exports={notificationsContainer:"_18cgL"}},81792:e=>{e.exports={onboarding:"_2JL8H",onboardingHeader:"ZQPPn",onboardingContent:"JXN6T",onboardingClose:"_3vjX4",onboardingIcon:"_2480e",onboardingFooter:"_2zySg",onboardingFooterCenter:"_3npAJ",onboardingFooterLeft:"_10RPB",onboardingFooterRight:"_1nH6-"}},11474:e=>{e.exports={switch:"_3zVve",label:"_3l0y-"}},42050:e=>{e.exports={logoIconSpinning:"_3WkYJ",spin:"_1GFgY"}},39320:e=>{e.exports={footer:"_3tiyl",replyButton:"cEz0M",header:"_1Foik",headerCounts:"_2Lxec",contentContent:"_31lXZ",contentOverflowTop:"_3E4mc",contentOverflowBottom:"_1RVgY",contentCounts:"_22CLo"}},79011:e=>{e.exports={moreDataEntryPoint:"Yd28F",moreDataEntryPointWithOnboarding:"_1LMSD"}},68715:e=>{e.exports={recapPanel:"_1C_9_",panelBackground:"ajjTb",mainPart:"_1y3bt",asidePart:"_2eHwj",contentLabel:"bmgwL",optInContent:"_1efas",logoAndBadge:"_3fc2G",logoContainer:"_2erSY",warningBadge:"_2uJ24",betaBadge:"_5y0E_",ghostButton:"_33K4e",learnMoreLink:"_3Vm_Q",tryItOutButton:"_1SALU"}},21042:e=>{e.exports={compactReplyPanel:"_2mNF8",compactReplyPanelContent:"_1GJDq",compactReplyPanelLogo:"_29OZv"}},55722:e=>{e.exports={content:"_3zs-N",contentExpanded:"_3_sy7",contentOverflowTop:"cJVGE",contentCounts:"BoCCC"}},60268:e=>{e.exports={fullReplyPanel:"_2jzR-"}},22157:e=>{e.exports={header:"_37oBB",headerContent:"_3khiA",headerButton:"_1L_BS"}},36755:e=>{e.exports={sidebarLogo:"_3Z6Xi",sidebarFooter:"_2rVMK"}},72746:e=>{e.exports={container:"UncBG"}},80682:e=>{e.exports={button:"_2_LEZ",noPadding:"_1czX_",dark:"_1rBkt",secondary:"_1wEPq",tertiary:"m1Y7-"}},2771:e=>{e.exports={feedbackPopup:"v6gUy",buttonText:"_2lwmU",inactiveThumbsDown:"_3ymsc",inactiveThumbsUp:"MCvfs"}},21462:e=>{e.exports={separator:"_2Y281"}},12935:e=>{e.exports={badge:"Mora3",badgePrimary:"_1446Q",badgeSuccess:"_2FQ9t",badgeGold:"_3t7g2",badgeError:"_154CZ",badgeRounded:"_2atD_",badgeRoundedSmall:"OxUT1",badgeRoundedMedium:"_1Rehq",badgeRoundedLarge:"_1Mmea",badgeTitle:"_1imRR",badgeTitleBold:"KO4Gs"}},22536:e=>{e.exports={checkboxContainer:"_3bj_g",checkbox:"xrB8R",checkboxDS:"_2UTyE",checkboxChecked:"Uhddy",checkboxCheckmark:"_1qI2g",spin:"_3S_a3"}},69801:e=>{e.exports={container:"_3ALsx",containerDark:"_3tfUf",fadein:"_1rbL3",noop:"_1hifN",fadeInBottom:"_6seIJ",fadeInTop:"_3Yni4",fadeInRight:"DzY8I",fadeInLeft:"_2z2jp",fadeout:"_3QvQa",fadeOutBottom:"pUAhn",fadeOutTop:"_2r68V",fadeOutRight:"_2pV2v",fadeOutLeft:"NyHp4"}},42603:e=>{e.exports={arrow:"_1g2DO",arrowDark:"bc373",arrowLight:"_2SnBW"}},39070:e=>{e.exports={rating:"_2oJv0",ratingStars:"_3FAXT",ratingStar:"_1p53S",ratingStarFilled:"_1E3qz",ratingLabels:"jzPuo",ratingLabelVisible:"_3yF9v",ratingLabelNotVisible:"_2zNv4",ratingLegend:"_1XbY_",spin:"fu5_3"}},98499:e=>{e.exports={switchContainer:"qQhHU",switchContainerCompact:"i_xK_",switch:"_2Ag9O",switchAfter:"O4aPa",switchChecked:"_1x1OX",switchDisabled:"_3i5BY",on_off:"_17N4Q"}}}]);